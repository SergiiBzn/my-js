<a name="top"></a>

[–ù–∞ –≥–ª–∞–≤–Ω—É—é](../README.md)

## –í–æ–ø—Ä–æ—Å—ã

[–ü–µ—Ä–µ–π—Ç–∏ –∫ –≤–æ–ø—Ä–æ—Å–∞–º](#questions)

| ‚Ññ. | –í–æ–ø—Ä–æ—Å |
| --- | --------- |
|     | Core |
|250 | [–†–µ–∫—É—Ä—Å–∏—è –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#250) |
|251 | [–ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏ (error boundaries)?](#251) |
|252 | [keys –≤ React. –ú–µ—Ç–æ–¥ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ shouldComponentUpdate](#252) |
|253 | [react-router v5](#253) |
|254 | [Route, Switch, Link v5](#254) |
|255 | [react-router v6](#255) |
|256 | [](#256) |
|257 | [React / redux Dev Tools](#257) |
|258 | [HOC - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞](#258) |
|259 | [React Transition Group](#259) |
|260 | [Formik, Yup - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ä–º–∞–º–∏](#260) |
|261 | [](#261) |
|     | –•—É–∫–∏ |
|300 | [–•—É–∫–∏ –≤ React](#300) |
|301 | [–ú–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –º–æ–∂–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å –•—É–∫–∏](#301) |
|302 | [–•—É–∫–∏](#302) |
|303 | [–•—É–∫–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞](#303) |
|304 | [–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤](#304) |
|305 | [–ü—Ä–∞–∫—Ç–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤](#305) |
|306 | [](#306) |
|307 | [](#307) |
|308 | [](#308) |
|309 | [](#309) |
|310 | [](#310) |
|320 | [](#320) |
|321 | [](#321) |
|322 | [](#322) |
|323 | [](#323) |
|324 | [](#324) |
|325 | [configureStore(), createReducer(), createAction(), createSlice(), createAsyncThunk(), createEntityAdapter()](#325) |
|326 | [](#326) |
|327 | [](#327) |
|328 | [](#328) |
|329 | [](#329) |
|     | Redux Toolkit |
|330 | [Redux Toolkit: configureStore()](#330) |
|331 | [Redux Toolkit: createAction()](#331) |
|332 | [Redux Toolkit: createReducer()](#332) |
|333 | [Redux Toolkit: createSlice()](#333) |
|334 | [Redux Toolkit: createAsyncThunk()](#334) |
|335 | [Redux Toolkit: createEntityAdapter()](#335) |
|336 | [Redux Toolkit: RTK Query](#336) |
|337 | [](#337) |
|338 | [Redux Toolkit –ø—Ä–∏–º–µ—Ä](#338) |
|339 | [Redux Toolkit –ø—Ä–∏–º–µ—Ä 2](#339) |
|340 | [Redux Toolkit createAsyncThunk](#340) |
|341 | [RTK Query](#341) |
|342 | [](#342) |
|343 | [](#343) |
|344 | [](#344) |
|345 | [](#345) |
|346 | [](#346) |
|347 | [](#347) |
|     | Redux |
|350 | [Redux](#350) |
|351 | [connect. HOC](#351) |
|352 | [actions](#352) |
|353 | [reducer](#353) |
|354 | [middleware](#354) |
|355 | [Redux, Actions, Reducer, Store - –ø—Ä–∏–º–µ—Ä—ã](#355) |
|356 | [redux-forms –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ React + Redux](#356) |
|357 | [Redux –ø—Ä–∏–º–µ—Ä](#357) |
|358 | [–°–æ–µ–¥–∏–Ω—è–µ–º React –∏ Redux –ø—Ä–∏ –ø–æ–º–æ—â–∏ connect –∏ —Ö—É–∫–æ–≤](#358) |
|359 | [combineReducers –∏ reducers](#359) |
|360 | [createSelector from 'reselect'](#360) |
|361 | [enhancer](#361) |
|362 | [applyMiddleware](#362) |
|363 | [ReduxThunk](#363) |
|364 | [](#364) |
|365 | [](#365) |
|377 | [](#377) |
|378 | [](#378) |
|379 | [](#379) |
|380 | [](#380) |
|381 | [](#381) |



<a name="questions"></a>

250. ### <a name="250"></a> –†–µ–∫—É—Ä—Å–∏—è –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

 –†–µ–∫—É—Ä—Å–∏—è –ø–æ –¥–æ—á–µ—Ä–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–º –æ–±—Ö–æ–¥–µ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ DOM-—É–∑–ª–∞ React –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –æ–±–æ–∏–º —Å–ø–∏—Å–∫–∞–º –ø–æ—Ç–æ–º–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ —Å–æ–∑–¥–∞—ë—Ç –º—É—Ç–∞—Ü–∏—é, –∫–æ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç –æ—Ç–ª–∏—á–∏–µ.

–ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–Ω–µ—Ü –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É —ç—Ç–∏–º–∏ –¥–µ—Ä–µ–≤—å—è–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:
```jsx harmony
<ul>
  <li>–ø–µ—Ä–≤—ã–π</li>
  <li>–≤—Ç–æ—Ä–æ–π</li>
</ul>

<ul>
  <li>–ø–µ—Ä–≤—ã–π</li>
  <li>–≤—Ç–æ—Ä–æ–π</li>
  <li>—Ç—Ä–µ—Ç–∏–π</li>
</ul>
```
React —Å—Ä–∞–≤–Ω–∏—Ç –¥–≤–∞ –¥–µ—Ä–µ–≤–∞ <li –ø–µ—Ä–≤—ã–π</li, —Å—Ä–∞–≤–Ω–∏—Ç –¥–≤–∞ –¥–µ—Ä–µ–≤–∞ <li –≤—Ç–æ—Ä–æ–π</li, –∞ –∑–∞—Ç–µ–º –≤—Å—Ç–∞–≤–∏—Ç –¥–µ—Ä–µ–≤–æ <li —Ç—Ä–µ—Ç–∏–π</li.

–ï—Å–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞–∏–≤–Ω–æ, –≤—Å—Ç–∞–≤–∏–≤ —ç–ª–µ–º–µ–Ω—Ç –≤ –Ω–∞—á–∞–ª–æ, —Ç–æ –ø–æ—Å—Ç—Ä–∞–¥–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É —ç—Ç–∏–º–∏ –¥–µ—Ä–µ–≤—å—è–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–æ—Ö–æ:
```jsx harmony
<ul>
  <li>–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</li>
  <li>–ú–æ—Å–∫–≤–∞</li>
</ul>

<ul>
  <li>–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É</li>
  <li>–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</li>
  <li>–ú–æ—Å–∫–≤–∞</li>
</ul>
```
React –±—É–¥–µ—Ç –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–º–∫–∞, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å <li –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</li>  –∏ <li –ú–æ—Å–∫–≤–∞</li> –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º–∏. –≠—Ç–∞ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π.

### –ö–ª—é—á–∏

–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã React –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—Ç—Ä–∏–±—É—Ç key. –ö–æ–≥–¥–∞ —É –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –µ—Å—Ç—å –∫–ª—é—á–∏, React –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö, —á—Ç–æ–±—ã —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Ç–æ–º–∫–æ–≤ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞ —Å –ø–æ—Ç–æ–º–∫–∞–º–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–µ—Ä–µ–≤–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å key –∫ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É –ø—Ä–∏–º–µ—Ä—É –≤—ã—à–µ, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ —Å—Ç–∞–Ω–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º:
```jsx harmony
<ul>
  <li key="2015">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</li>
  <li key="2016">–ú–æ—Å–∫–≤–∞</li>
</ul>

<ul>
  <li key="2014">–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É</li>
  <li key="2015">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</li>
  <li key="2016">–ú–æ—Å–∫–≤–∞</li>
</ul>
```
–¢–µ–ø–µ—Ä—å React –∑–Ω–∞–µ—Ç, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç —Å –∫–ª—é—á–æ–º '2014' ‚Äî –Ω–æ–≤—ã–π, –∞ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∫–ª—é—á–∞–º–∏ '2015' –∏ '2016' —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏—Å—å.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –Ω–∞–π—Ç–∏ –∫–ª—é—á –æ–±—ã—á–Ω–æ –Ω–µ—Å–ª–æ–∂–Ω–æ. –≠–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å, —É–∂–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –∏ –∫–ª—é—á –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∑—è—Ç –∏–∑ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö:
```jsx harmony
<li key={item.id}>{item.name}</li>
```
–ö–æ–≥–¥–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –≤ –≤–∞—à—É –º–æ–¥–µ–ª—å –∏–ª–∏ –ø—Ä–æ—Ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á. –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Ç–æ–ª—å–∫–æ —Å—Ä–µ–¥–∏ –µ–≥–æ —Å–æ—Å–µ–¥–µ–π, –∞ –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–æ.
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
  
251. ### <a name="251"></a> –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏ (error boundaries)

 `Error boundaries` - —ç—Ç–æ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –ª—é–±—ã–µ –æ—à–∏–±–∫–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –≤ –¥–µ—Ä–µ–≤–µ –ø–æ—Ç–æ–º–∫–æ–≤, –≤—ã–≤–æ–¥—è—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤ –∫–æ–Ω—Å–æ–ª—å –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–π UI –≤–º–µ—Å—Ç–æ "—Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ". –ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –≤ –º–µ—Ç–æ–¥–∞—Ö –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö –ª—é–±—ã—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–ö–ª–∞—Å—Å–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–º, –∫–æ–≥–¥–∞ –≤ –Ω–µ–º –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ `static getDerivedStateFromError()` –∏–ª–∏ `componentDidCatch()` (–æ–¥–∏–Ω –∏–ª–∏ –æ–±–∞). `static getDerivedStateFromError()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∑–∞–ø–∞—Å–Ω–æ–≥–æ UI –ø–æ—Å–ª–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –æ—à–∏–±–∫–∏. `componentDidCatch()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –≤ –∫–æ–Ω—Å–æ–ª—å.

*–ü—Ä–∏–º–µ—Ä*

```js
import React, { Component } from 'react'

class ErrorBoundary extends Component {
   state = {
      isErrorOccured: false,
      errorMessage: ''
   }
   componentDidCatch = (error, info) => {
      this.setState({
        isErrorOccured: true,
        errorMessage: error
      })
   }
   render() {
      if(this.state.isErrorOccured) {
         return <p>–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</p>
      } else {
         return <div>{this.props.children}</div>
      }
   }
}

export default ErrorBoundary
```

–ó–¥–µ—Å—å —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –¥–≤—É–º—è —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ - `isErrorOccured` –∏ `errorMessage`, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏. –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ `componentDidCatch()`, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ - `error` –∏ `info`.

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å?**

```js
<ErrorBoundary>
   <User/>
</ErrorBoundary>
```

**–ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏ –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ –≤:**

* –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π
* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `setTimeout()`)
* –ü—Ä–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ
* –ü—Ä–∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ —Å–∞–º–æ–º –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
  
252. ### <a name="252"></a> keys –≤ React. –ú–µ—Ç–æ–¥ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ shouldComponentUpdate

 ### –ö–ª—é—á–∏

–ö–ª—é—á–∏ –ø–æ–º–æ–≥–∞—é—Ç React –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã, –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–ª–∏ —É–¥–∞–ª–µ–Ω—ã. –ò—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑—ã–≤–∞—Ç—å, —á—Ç–æ–±—ã React –º–æ–≥ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞ —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏:
```jsx harmony
const numbers = [1, 2, 3, 4, 5];
const listItems = numbers.map((number) =>
  <li key={number.toString()}>
    {number}
  </li>
);
```
–õ—É—á—à–∏–π —Å–ø–æ—Å–æ–± –≤—ã–±—Ä–∞—Ç—å –∫–ª—é—á ‚Äî —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —è–≤–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –æ—Ç –µ–≥–æ —Å–æ—Å–µ–¥–µ–π. –ß–∞—â–µ –≤—Å–µ–≥–æ –≤—ã –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ID –∏–∑ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ –∫–ª—é—á–∏:
```jsx harmony
const todoItems = todos.map((todo) =>
  <li key={todo.id}>
    {todo.text}
  </li>
);
```
–ö–æ–≥–¥–∞ —É –≤–∞—Å –Ω–µ—Ç –∑–∞–¥–∞–Ω–Ω—ã—Ö ID –¥–ª—è —Å–ø–∏—Å–∫–∞, —Ç–æ –≤ –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞–∫ –∫–ª—é—á:
```jsx harmony
const todoItems = todos.map((todo, index) =>
  // –î–µ–ª–∞–π—Ç–µ —Ç–∞–∫, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞ –Ω–µ—Ç –∑–∞–¥–∞–Ω–Ω–æ–≥–æ ID
  <li key={index}>
    {todo.text}
  </li>
);
```
–ú—ã –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∫–∞–∫ –∫–ª—é—á–∏, –µ—Å–ª–∏ –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–æ–∂–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å—Å—è. –≠—Ç–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ —Å–∫–∞–∂–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ü–æ—á–∏—Ç–∞–π—Ç–µ —Å—Ç–∞—Ç—å—é –†–æ–±–∏–Ω–∞ –ü–æ–∫–æ—Ä–Ω–∏ (Robin Pokorny), –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä—è—Å–Ω—è–µ—Ç, –ø–æ—á–µ–º—É –∏–Ω–¥–µ–∫—Å—ã-–∫–ª—é—á–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º. –ï—Å–ª–∏ –≤—ã –æ–ø—É—Å—Ç–∏—Ç–µ –∫–ª—é—á –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Å–ø–∏—Å–∫–µ, —Ç–æ React –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∫–∞–∫ –∫–ª—é—á–∏.

### shouldComponentUpdate

shouldComponentUpdate(nextProps, nextState)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ shouldComponentUpdate(), —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –ø—Ä–æ–ø—Å–æ–≤. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

shouldComponentUpdate() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º, –∫–æ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–≤–Ω–æ true. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ –∏–ª–∏ –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è forceUpdate().

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ù–æ –Ω–µ –æ–ø–∏—Ä–∞–π—Ç–µ—Å—å –Ω–∞ –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ¬´–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å¬ª —Ä–µ–Ω–¥–µ—Ä, —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–∞–≥–∞–º. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PureComponent, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –æ–ø–∏—Å—ã–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ shouldComponentUpdate() –≤—Ä—É—á–Ω—É—é. PureComponent –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.

–ï—Å–ª–∏ –≤—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –µ–≥–æ –≤—Ä—É—á–Ω—É—é, –≤—ã –º–æ–∂–µ—Ç–µ —Å—Ä–∞–≤–Ω–∏—Ç—å this.props —Å nextProps, –∞ this.state —Å nextState. –í–µ—Ä–Ω–∏—Ç–µ false —á—Ç–æ–±—ã –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ React. –í–æ–∑–≤—Ä–∞—Ç false –Ω–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è.

–ú—ã –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –¥–µ–ª–∞—Ç—å –≥–ª—É–±–æ–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JSON.stringify() –≤ shouldComponentUpdate(). –≠—Ç–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –ø–ª–æ—Ö–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è, –µ—Å–ª–∏ shouldComponentUpdate() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç false, —Ç–æ UNSAFE_componentWillUpdate(), render() –∏ componentDidUpdate() –Ω–µ –±—É–¥—É—Ç –≤—ã–∑–≤–∞–Ω—ã. –í –±—É–¥—É—â–µ–º React –º–æ–∂–µ—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å shouldComponentUpdate() –∫–∞–∫ –ø–æ–¥—Å–∫–∞–∑–∫—É, –∞ –Ω–µ —Å—Ç—Ä–æ–≥–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≤–æ–∑–≤—Ä–∞—Ç false —Å–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
  
253. ### <a name="253"></a> react-router v5

 React Router —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (routing) –≤ React. –û–Ω —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å URL –Ω–∞ –±—Ä–∞—É–∑–µ—Ä–µ. React Router –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å "–ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö" (data flow) –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–æ–Ω—è—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.

### 1. –û—Å–Ω–æ–≤–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –Ω–∏–∂–µ –ø—Ä–∏–º–µ—Ä–µ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–µ —Ä–æ—É—Ç–µ—Ä–æ–º: –≥–ª–∞–≤–Ω–∞—è (home), –∫–æ–Ω—Ç–∞–∫—Ç—ã (about) –∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (users). –ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ <Link> (—Å—Å—ã–ª–∫–µ) —Ä–æ—É—Ç–µ—Ä —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π <Route> (–º–∞—Ä—à—Ä—É—Ç, –ø—É—Ç—å).

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –∑–∞ —Å—Ü–µ–Ω–æ–π <Link> —Ä–µ–Ω–¥–µ—Ä–∏—Ç <a> —Å –Ω–∞—Å—Ç–æ—è—â–∏–º href, —Ç–∞–∫ —á—Ç–æ –ª—é–¥–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏–ª–∏ —ç–∫—Ä–∞–Ω–Ω—ã–µ —Å—á–∏—Ç—ã–≤–∞—é—é—â–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (screen readers), —Å–º–æ–≥—É—Ç –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.
```jsx harmony
import React from 'react'
import {
  BrowserRouter as Router,
  Switch,
  Route,
  Link
} from 'react-router-dom'

export const App = () => (
  <Router>
      <header>
        <nav>
          <ul>
            <li>
              <Link to="/">–ì–ª–∞–≤–Ω–∞—è</Link>
            </li>
            <li>
              <Link to="/about">–ö–æ–Ω—Ç–∞–∫—Ç—ã</Link>
            </li>
            <li>
              <Link to="/users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</Link>
            </li>
          </ul>
        </nav>
      </header>

      <main>
        {/* <Switch> —Ä–µ–Ω–¥–µ—Ä–∏—Ç –ø–µ—Ä–≤—ã–π <Route>, —Å–æ–≤–ø–∞–≤—à–∏–π —Å URL */}
        <Switch>
          <Route path="/about">
            <About />
          </Route>
          <Route path="/users">
            <Users />
          </Route>
          <Route path="/">
            <Home />
          </Route>
        </Switch>
      </main>
  </Router>
)

const Home = () => <h2>–ì–ª–∞–≤–Ω–∞—è</h2>

const About = () => <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>

const Users = () => <h2>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
```	      
	      
### 2. –í–ª–æ–∂–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥
	      
–ù–∏–∂–µ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Ä–æ—É—Ç–∏–Ω–≥–∞. –ú–∞—Ä—à—Ä—É—Ç /topics –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Topics, –∫–æ—Ç–æ—Ä—ã–π, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —Ä–µ–Ω–¥–µ—Ä–∏—Ç –¥–∞–ª—å–Ω–µ–π—à–∏–µ <Route> –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è :id.
```jsx harmony
import React from "react"
import {
  BrowserRouter as Router,
  Switch,
  Route,
  Link,
  useRouteMatch,
  useParams
} from "react-router-dom"

export const App = () => (
  <Router>
    <header>
      <nav>
        <ul>
          <li>
            <Link to="/">–ì–ª–∞–≤–Ω–∞—è</Link>
          </li>
          <li>
            <Link to="/about">–ö–æ–Ω—Ç–∞–∫—Ç—ã</Link>
          </li>
          <li>
            <Link to="/topics">–¢–µ–º—ã</Link>
          </li>
        </ul>
      </nav>
    </header>

    <main>
      <Switch>
        <Route path="/about">
          <About />
        </Route>
        <Route path="/topics">
          <Topics />
        </Route>
        <Route path="/">
          <Home />
        </Route>
      </Switch>
    </main>
  </Router>
)

const Home = () => <h2>–ì–ª–∞–≤–Ω–∞—è</h2>

const About = () => <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>

function Topics() {
  const match = useRouteMatch()

  return (
    <>
      <h2>–¢–µ–º—ã</h2>

      <nav>
        <ul>
          <li>
            <Link to={`${match.url}/components`}>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</Link>
          </li>
          <li>
            <Link to={`${match.url}/props-vs-state`}>–ü—Ä–æ–ø—ã –ø—Ä–æ—Ç–∏–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è</Link>
          </li>
        </ul>
      </nav>

      {/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ Topics –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π <Switch> —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏,
          –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞ URL /topics. –í—ã –º–æ–∂–µ—Ç–µ –¥—É–º–∞—Ç—å –æ –≤—Ç–æ—Ä–æ–º
          <Route> –∫–∞–∫ –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–µ–º
          –∏–ª–∏ –∫–∞–∫ –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–π,
          –∫–æ–≥–¥–∞ –Ω–∏ –æ–¥–Ω–∞ –∏–∑ —Ç–µ–º –Ω–µ –≤—ã–±—Ä–∞–Ω–∞ */}
      <div>
        <Switch>
          <Route path={`${match.path}/:topicId`}>
            <Topic />
          </Route>
          <Route path={match.path}>
            <h3>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É.</h3>
          </Route>
        </Switch>
      </div>
    </>
  )
}

function Topic() {
  const { topicId } = useParams()
  return <h3>–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã: {topicId}</h3>
}
```
	      
### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
	      
–í React Router —Å—É—â–µ—Å—Ç–≤—É–µ—Ç 3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

- —Ä–æ—É—Ç–µ—Ä—ã (routers), –Ω–∞–ø—Ä–∏–º–µ—Ä, <BrowserRouter> –∏–ª–∏ <HashRouter>
- –º–∞—Ä—à—Ä—É—Ç—ã (route matchers), –Ω–∞–ø—Ä–∏–º–µ—Ä, <Route> –∏–ª–∏ <Switch>
- –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è (navigation), –Ω–∞–ø—Ä–∏–º–µ—Ä, <Link>, <NavLink> –∏–ª–∏ <Redirect>
	      
–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ react-router-dom.

### –†–æ—É—Ç–µ—Ä—ã
	      
–õ—é–±–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ä–æ—É—Ç–µ—Ä–∞. –î–ª—è –≤–µ–±-–ø—Ä–æ–µ–∫—Ç–æ–≤ react-router-dom –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç <BrowserRouter> –∏ <HashRouter>. –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –º–µ–∂–¥—É –Ω–∏–º–∏ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Å–ø–æ—Å–æ–±–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è URL –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º.

<BrowserRouter> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ã—á–Ω—ã–µ URL. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ URL –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ. Create React App –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.
<HashRouter> —Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é –ª–æ–∫–∞—Ü–∏—é –≤ —Ö—ç—à-—á–∞—Å—Ç–∏ URL (–ø–æ—Å–ª–µ —Å–∏–º–≤–æ–ª–∞ "#"), –ø–æ—ç—Ç–æ–º—É URL –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫: http://example.com/#/your/page. –ü–æ—Å–∫–æ–ª—å–∫—É —Ö—ç—à –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä—É, –µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
	
–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–æ—É—Ç–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–µ—Ä–Ω—É—Ç—å –≤ –Ω–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è:
	
```jsx harmony
import React from "react"
import ReactDOM from "react-dom"
import { BrowserRouter } from "react-router-dom"

const App = () => <h1>–ü—Ä–∏–≤–µ—Ç, React Router</h1>

ReactDOM.render(
  <BrowserRouter>
    <App />
  </BrowserRouter>,
  document.getElementById("root")
)	      
```	      

### –ú–∞—Ä—à—Ä—É—Ç—ã
	
–°—É—â–µ—Å—Ç–≤—É–µ—Ç 2 –≤–∏–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π —Å URL: Switch –∏ Route. –ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ <Switch> –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç <Route>, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–µ–∫—É—â–µ–º—É URL. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Ç–∞–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞, –æ–Ω —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–º–µ—â–∞—Ç—å –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø–µ—Ä–µ–¥ –º–µ–Ω–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–º–∏.

–ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, <Switch> –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç (—Ç–æ—á–Ω–µ–µ, —Ä–µ–Ω–¥–µ—Ä–∏—Ç null).
```jsx harmony
import React from "react"
import ReactDOM from "react-dom"
import {
  BrowserRouter as Router,
  Switch,
  Route
} from "react-router-dom"

const App = () => (
  <main>
    <Switch>
      {/* –ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–º URL —è–≤–ª—è–µ—Ç—Å—è /about, —Ä–∞–Ω–¥–µ—Ä–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç,
          –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è */}
      <Route path="/about">
        <About />
      </Route>

      {/* –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —ç—Ç–∏—Ö –¥–≤—É—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤.
          –ë–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π path="/contact/:id" –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–¥ path="/contact" */}
      <Route path="/contact/:id">
        <Contact />
      </Route>
      <Route path="/contact">
        <AllContacts />
      </Route>

      {/* –ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤ –Ω–µ —Å–æ–≤–ø–∞–ª,
          —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç (–æ–Ω —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω—ã–º).

          –í–∞–∂–Ω–æ: –º–∞—Ä—à—Ä—É—Ç —Å path="/" –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å
          URL, –ø–æ—Å–∫–æ–ª—å–∫—É –≤—Å–µ URL –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å /. –ü–æ—ç—Ç–æ–º—É
          –º—ã –ø–æ–º–µ—Å—Ç–∏–ª–∏ –µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º */}
      <Route path="/">
        <Home />
      </Route>
    </Switch>
  </main>
)

ReactDOM.render(
  <Router>
    <App />
  </Router>,
  document.getElementById("root")
)
```	
	
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ <Route path> –∏—â–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å –Ω–∞—á–∞–ª–æ–º, –∞ –Ω–µ —Å–æ –≤—Å–µ–º URL. –ü–æ—ç—Ç–æ–º—É <Route path="/"> –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å URL. –ü–æ—ç—Ç–æ–º—É –≤ <Switch> –º—ã, –æ–±—ã—á–Ω–æ, –ø–æ–º–µ—â–∞–µ–º –µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º. –î—Ä—É–≥–∏–º –≤–æ–∑–º–æ–∂–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ exact: <Route exact path="/">, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–æ—É—Ç–µ—Ä –∏—Å–∫–∞—Ç—å –ø–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ.

### –ù–∞–≤–∏–≥–∞—Ü–∏—è
	
React Router –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç <Link> –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ <Link> –≤ HTML —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è <a>.
	
```jsx harmony
<Link to="/">–ì–ª–∞–≤–Ω–∞—è</Link>
// <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
```	
	
<NavLink> - —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø <Link>, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å—Ç–∏–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Å—ã–ª–∫–∏.
```jsx harmony
<NavLink to="/react" activeClassName="hurray">
  React
</NavLink>

// –ö–æ–≥–¥–∞ URL —è–≤–ª—è–µ—Ç—Å—è /react, —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —ç—Ç–æ:
// <a href="/react" className="hurray">React</a>

// –ö–æ–≥–¥–∞ URL —è–≤–ª—è–µ—Ç—Å—è –¥—Ä—É–≥–∏–º:
// <a href="/react">React</a>
```	
–î–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <Redirect>. –ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ <Redirect> –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.
```jsx harmony
<Redirect to="/login">	
```	

## –ü—Ä–∏–º–µ—Ä —Å –ø—Ä–æ–µ–∫—Ç–∞
	
### App.js	
```jsx harmony
import {BrowserRouter as Router, Route, Switch} from 'react-router-dom';

import {MainPage, ComicsPage} from '../pages';
import AppHeader from "../appHeader/AppHeader";

const App = () => {
    
    return (
        <Router>
            <div className="app">
                <AppHeader/>
                <main>
                    <Switch>
                        <Route exact path="/">
                            <MainPage/>
                        </Route>
                        <Route exact path="/comics">
                            <ComicsPage/>
                        </Route>
                    </Switch>
                </main>
            </div>
        </Router>
    )
}

export default App;	
```	
### MainPage.js
```jsx harmony
import { useState } from "react";

import RandomChar from "../randomChar/RandomChar";
import CharList from "../charList/CharList";
import CharInfo from "../charInfo/CharInfo";
import ErrorBoundary from "../errorBoundary/ErrorBoundary";

import decoration from '../../resources/img/vision.png';

const MainPage = () => {

    const [selectedChar, setChar] = useState(null);

    const onCharSelected = (id) => {
        setChar(id);
    }

    return (
        <>
            <ErrorBoundary>
                <RandomChar/>
            </ErrorBoundary>
            <div className="char__content">
                <ErrorBoundary>
                    <CharList onCharSelected={onCharSelected}/>
                </ErrorBoundary>
                <ErrorBoundary>
                    <CharInfo charId={selectedChar}/>
                </ErrorBoundary>
            </div>
            <img className="bg-decoration" src={decoration} alt="vision"/>
        </>
    )
}

export default MainPage;	
```
### ComicsPage.js
```jsx harmony
import ComicsList from "../comicsList/ComicsList";
import AppBanner from "../appBanner/AppBanner";

const ComicsPage = () => {
    return (
        <>
            <AppBanner/>
            <ComicsList/>
        </>
    )
}

export default ComicsPage;	
```	
	
https://github.com/harryheman/React-Total/blob/main/md/react-router.md#%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
  
254. ### <a name="254"></a> Route, Switch, Link v6

 ### <a name="router"></a> `<Router>`

–û–±—â–∏–π –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ä–æ—É—Ç–µ—Ä–∞. –û–±—ã—á–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤:

- [&lt;BrowserRouter>](#browser)
- [&lt;HashRouter>](#hash)
- [&lt;MemoryRouter>](#memory)
- [&lt;StaticRouter>](#static)
- `<NativeRouter>`

- [Route](#route)		
- [Switch](#switch)	
- [Link](#link)	
- [NavLink](#nav)
- [Redirect](#redirect)
	
	
–û–¥–Ω–∏–º –∏–∑ —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ `<Router>` —è–≤–ª—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∏—Å—Ç–æ—Ä–∏–∏ —Å —Ç–∞–∫–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–∞–∫ `Redux` –∏–ª–∏ `MobX`. *–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ*, —á—Ç–æ –¥–µ–ª–∞—Ç—å —ç—Ç–æ–≥–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è.

#### –ü—Ä–æ–ø—ã

- `history`: object - –∞—Ç—Ä–∏–±—É—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- `children`: node - –¥–æ—á–µ—Ä–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç

	
### <a name="browser"></a> `<BrowserRouter>`

`<Router>`, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π `HTML5 history API` (—Å–æ–±—ã—Ç–∏—è "pushState", "replaceState" –∏ "popState") –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ UI —Å URL.

```js
<BrowserRouter
  basename={optionalString}
  forceRefresh={optionalBool}
  getUserConfirmation={optionalFunc}
  keyLength={optionalNumber}
>
  <App />
</BrowserRouter>
```

#### –ü—Ä–æ–ø—ã

- `basename`: string - –±–∞–∑–æ–≤—ã–π URL –¥–ª—è –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏–π. –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è –∏–∑ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –±–∞–∑–æ–≤—ã–π URL –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–π –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```js
<BrowserRouter basename="/calendar">
    <Link to="/today"/> // —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–∞–∫ <a href="/calendar/today">
    <Link to="/tomorrow"/> // —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–∞–∫ <a href="/calendar/tomorrow">
    ...
</BrowserRouter>
```

- `getUserConfirmation`: func - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.confirm`)

```js
<BrowserRouter
  getUserConfirmation={(message, callback) => {
    // –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    const allowTransition = window.confirm(message)
    callback(allowTransition)
  }}
/>
```

- `forceRefresh`: bool - –µ—Å–ª–∏ `true`, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- `keyLength`: number - –¥–ª–∏–Ω–∞ `location.key` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–≤–Ω—è–µ—Ç—Å—è 6)
- `children`: node - –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã

**[‚¨Ü 254](#254)**	

	
### <a name="hash"></a> `<HashRouter>`

`<Router>`, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Ö—ç—à-—á–∞—Å—Ç—å URL (—Ç.–µ. `window.location.hash`) –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ UI —Å URL.

*–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ*, —á—Ç–æ —Ö—ç—à-–∏—Å—Ç–æ—Ä–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `location.key` –∏–ª–∏ `location.state`.

```js
<HashRouter
  basename={optionalString}
  getUserConfirmation={optionalFunc}
  hashType={optionalString}
>
  <App />
</HashRouter>
```

#### –ü—Ä–æ–ø—ã

- `basename`: string - –±–∞–∑–æ–≤—ã–π URL –¥–ª—è –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏–π

```js
<HashRouter basename="/calendar"/>
<Link to="/today"/> // —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–∞–∫ <a href="#/calendar/today">
```

- `getUserConfirmation`: func - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.confirm`)
- `hashType`: string - —Ç–∏–ø –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –¥–ª—è `window.location.hash`. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
  - `slash` - `#/` –∏ `#/sunshine/lollipops` (–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - `noslash` - `#` –∏ `#sunshine/lollipops`
  - `hashbang` - `#!/` –∏ `#!/sunshine/lollipops` (–ø—Ä–∏–∑–Ω–∞–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –≤ Chrome)
- `children`: node - –¥–æ—á–µ—Ä–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç

**[‚¨Ü 254](#254)**
	
	
### <a name="memory"></a> `<MemoryRouter>`

`<Router>`, —Ö—Ä–∞–Ω—è—â–∏–π –∏—Å—Ç–æ—Ä–∏—é URL –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ —á–∏—Ç–∞–µ—Ç –∏ –Ω–µ –ø–∏—à–µ—Ç –≤ –∞–¥—Ä–µ—Å–Ω—É—é —Å—Ç—Ä–æ–∫—É). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `React Native`).

```js
<MemoryRouter
  initialEntries={optionalArray}
  initialIndex={optionalNumber}
  getUserConfirmation={optionalFunc}
  keyLength={optionalNumber}
>
  <App />
</MemoryRouter>
```

#### –ü—Ä–æ–ø—ã

- `initialEntries`: array - –º–∞—Å—Å–∏–≤ –ª–æ–∫–∞—Ü–∏–π –≤ —Å—Ç–µ–∫–µ –∏—Å—Ç–æ—Ä–∏–∏. –õ–æ–∫–∞—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ —Å `{ pathname, search, hash, state }` –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞–º–∏

```js
<MemoryRouter
  initialEntries={["/one", "/two", { pathname: "/three" }]}
  initialIndex={1}
>
  <App />
</MemoryRouter>
```

- `initialIndex`: number - –∏–Ω–¥–µ–∫—Å –Ω–∞—á–∞–ª—å–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏ –≤ –º–∞—Å—Å–∏–≤–µ `initialEntries`
- `getUserConfirmation`: func - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.confirm`)
- `keyLength`: number - –¥–ª–∏–Ω–∞ `location.key` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - 6)
- `children`: node - –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã

**[‚¨Ü 254](#254)**
	
	
### <a name="static"></a> `<StaticRouter>`

`<Router>`, –Ω–µ –∏–∑–º–µ–Ω—è—é—â–∏–π –ª–æ–∫–∞—Ü–∏—é. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏.

–ü—Ä–∏–º–µ—Ä node-—Å–µ—Ä–≤–µ—Ä–∞, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ 302 –¥–ª—è `<Redirect>` –∏ –æ–±—ã—á–Ω—ã–π HTML –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã:

```js
import http from "http"
import React from "react"
import ReactDOMServer from "react-dom/server"
import { StaticRouter } from "react-router"

http
  .createServer((req, res) => {
    // –î–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
    const context = {}

    const html = ReactDOMServer.renderToString(
      <StaticRouter location={req.url} context={context}>
        <App />
      </StaticRouter>
    )

    // context.url –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å URL –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ <Redirect>
    if (context.url) {
      res.writeHead(302, {
        Location: context.url
      })
      res.end()
    } else {
      res.write(html)
      res.end()
    }
  })
  .listen(3000)
```

#### –ü—Ä–æ–ø—ã

- `basename`: string - –±–∞–∑–æ–≤—ã–π URL –¥–ª—è –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏–π
- `location`: string - URL, –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã–π —Å–µ—Ä–≤–µ—Ä–æ–º (`req.url`)
- `location`: object - –æ–±—ä–µ–∫—Ç –ª–æ–∫–∞—Ü–∏–∏ –≤–∏–¥–∞ `{ pathname, search, hash, state }`
- `context`: object - –æ–±—ã—á–Ω—ã–π JS-–æ–±—ä–µ–∫—Ç. –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ –∫ —ç—Ç–æ–º—É –æ–±—ä–µ–∫—Ç—É –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ

```js
const context = {}
<StaticRouter context={context}>
  <App />
</StaticRouter>
```

–ü—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏, `<Route>` –ø–µ—Ä–µ–¥–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É, –ø–æ–¥–ª–µ–∂–∞—â–µ–º—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É, –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫–∞–∫ –ø—Ä–æ–ø `staticContext`. –ü–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, —ç—Ç–∏ —Å–≤–æ–π—Å—Ç–≤–∞ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞:

```js
if (context.status === "404") {
  // ...
}
```

- `children`: node - –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã


**[‚¨Ü 254](#254)**

	
### Route <a name="route"></a>			

–î–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º –≤ `React Router`. –ü–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ —Ö–æ—Ä–æ—à–æ –∑–Ω–∞—Ç—å, –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç. –í –æ—Å–Ω–æ–≤–Ω–æ–º, –æ–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ UI –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –µ–≥–æ –ø—Ä–æ–ø–∞ `path` —Å —Ç–µ–∫—É—â–∏–º URL.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

```js
import React from "react"
import ReactDOM from "react-dom"
import { BrowserRouter as Router, Route } from "react-router-dom"

ReactDOM.render(
  <Router>
    <div>
      <Route exact path="/">
        <Home />
      </Route>
      <Route path="/news">
        <NewsFeed />
      </Route>
    </div>
  </Router>,
  node
)
```

–ï—Å–ª–∏ –ª–æ–∫–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±—É–¥–µ—Ç `/`, —Ç–æ –∏–µ—Ä–∞—Ä—Ö–∏—è UI –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```js
<div>
  <Home />
  <!-- react-empty: 2 -->
</div>
```

–ê –¥–ª—è –ª–æ–∫–∞—Ü–∏–∏ `/news` —Ç–∞–∫:

```js
<div>
  <!-- react-empty: 1 -->
  <NewsFeed />
</div>
```

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ "react-empty" - —ç—Ç–æ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω—É–ª–µ–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏, –º–∞—Ä—à—Ä—É—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤—Å–µ–≥–¥–∞: –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Å —Ç–µ–∫—É—â–µ–π –ª–æ–∫–∞—Ü–∏–µ–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –ø—Ä–∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ - `null`. –ï—Å–ª–∏ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Ç–æ–º–∫–æ–º –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö `<Route>`, `React` –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —ç–∫–∑–µ–º–ø–ª—è—Ä –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º, —Ç.–µ. –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª–æ–∫–∞—Ü–∏–∏. –í–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –∫ –∫–∞–∂–¥–æ–º—É `<Route>` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–ø `key` —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º.

#### –ú–µ—Ç–æ–¥—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –º–∞—Ä—à—Ä—É—Ç–∞

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–º —Å–ø–æ—Å–æ–±–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–∞–∫ –≤ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä–µ. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã:

- `<Route component>`
- `<Route render>`
- `<Route children>`

–°–ª–µ–¥—É–µ—Ç –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –æ–¥–Ω–æ–≥–æ —Å—Ç–∏–ª—è.

#### –ü—Ä–æ–ø—ã –º–∞—Ä—à—Ä—É—Ç–∞

–í—Å–µ 3 –º–µ—Ç–æ–¥–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–ø—ã:

- `match`
- `location`
- `history`

#### component

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç, –ø–æ–¥–ª–µ–∂–∞—â–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Å –ª–æ–∫–∞—Ü–∏–µ–π. –î–∞–Ω–Ω–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ –ø—Ä–æ–ø—ã –º–∞—Ä—à—Ä—É—Ç–∞:

```js
import React from "react"
import ReactDOM from "react-dom"
import { BrowserRouter as Router, Route } from "react-router-dom"

// –í—Å–µ –ø—Ä–æ–ø—ã –º–∞—Ä—à—Ä—É—Ç–∞ (match, location –∏ history) –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è User
const User = (props) => <h1>–ü—Ä–∏–≤–µ—Ç, {props.match.params.username}!</h1>

ReactDOM.render(
  <Router>
    <Route path="/user/:username" component={User} />
  </Router>,
  node
)
```

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `component` (–≤–º–µ—Å—Ç–æ `render` –∏–ª–∏ `children`), –º–∞—Ä—à—Ä—É—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `React.createElement` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ React-—ç–ª–µ–º–µ–Ω—Ç–∞. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–ø–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—é/–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤–º–µ—Å—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `render` –∏–ª–∏ `children`.

#### render: func

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –±–µ–∑ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

–í–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ–ø–∞ `component`, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –≤—ã–∑—ã–≤–∞–µ–º—É—é –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Å –ª–æ–∫–∞—Ü–∏–µ–π. –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –ø—Ä–æ–ø–∞–º –º–∞—Ä—à—Ä—É—Ç–∞:

```js
import React from "react"
import ReactDOM from "react-dom"
import { BrowserRouter as Router, Route } from "react-router-dom"

// –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
ReactDOM.render(
  <Router>
    <Route path="/home" render={() => <div>–ì–ª–∞–≤–Ω–∞—è</div>} />
  </Router>,
  node
)

// –∫–æ–º–ø–æ–∑–∏—Ü–∏—è
// –í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å routeProps, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∏—Ö –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è Component
const FadingRoute = ({ component: Component, ...rest }) => (
  <Route
    {...rest}
    render={routeProps => (
      <FadeIn>
        <Component {...routeProps} />
      </FadeIn>
    )}
  />
)

ReactDOM.render(
  <Router>
    <FadingRoute path="/cool" component={Something} />
  </Router>,
  node
)
```

#### children: func

–ü–æ—Ä–æ–π –Ω–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–ø–∞ `children`. –û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ `render`, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–æ–≥–æ, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å –ª–æ–∫–∞—Ü–∏–µ–π.

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–ø –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ –∂–µ –ø—Ä–æ–ø—ã –º–∞—Ä—à—Ä—É—Ç–∞. –ü—Ä–∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞, –ø—Ä–æ–ø `match` –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `null`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å UI. –í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –Ω–∏–∂–µ –ø—Ä–∏–º–µ—Ä–µ –º—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å `active`:

```js
import React from "react"
import ReactDOM from "react-dom"
import {
  BrowserRouter as Router,
  Link,
  Route
} from "react-router-dom"

const ListItemLink = ({ to, ...rest }) => (
  <Route
    path={to}
    children={({ match }) => (
      <li className={match ? "active" : ""}>
        <Link to={to} {...rest} />
      </li>
    )}
  />
)

ReactDOM.render(
  <Router>
    <ul>
      <ListItemLink to="/somewhere" />
      <ListItemLink to="/somewhere-else" />
    </ul>
  </Router>,
  node
)
```

–≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏:

```js
<Route
  children={({ match, ...rest }) => (
    {/* Animate –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤—Å–µ–≥–¥–∞, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª
        –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/—Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –µ–≥–æ –ø–æ—Ç–æ–º–∫–æ–≤ */}
    <Animate>
      {match && <Something {...rest}/>}
    </Animate>
  )}
/>
```

#### –ü—Ä–æ–ø—ã

- `path`: string, string[] - –ª—é–±–æ–π –≤–∞–ª–∏–¥–Ω—ã–π URL –∏–ª–∏ –º–∞—Å—Å–∏–≤ —Ç–∞–∫–∏—Ö URL (–º–∞—Ä—à—Ä—É—Ç –±–µ–∑ `path` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ª—é–±–æ–π –ª–æ–∫–∞—Ü–∏–µ–π)

```js
<Route path="/users/:id">
  <User />
</Route>
<Route path={["/users/:id", "/profile/:id"]}>
  <User />
</Route>
```

- `exact`: bool - –µ—Å–ª–∏ `true`, –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ–∏—Å–∫ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å `location.pathname`

```js
<Route exact path="/one">
  <About />
</Route>
```

- `strict`: bool - –µ—Å–ª–∏ `true`, –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∑–∞–º—ã–∫–∞—é—â–∏–π —Å–ª—ç—à
- `location`: object - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –ª–æ–∫–∞—Ü–∏–µ–π –≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–µ–π
- `sensitive`: bool - –µ—Å–ª–∏ `true`, –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä

**[‚¨Ü 254](#254)**	
	
	
### Switch <a name="switch"></a>		

–†–µ–Ω–¥–µ—Ä–∏—Ç –ø–µ—Ä–≤—ã–π –¥–æ—á–µ—Ä–Ω–∏–π `<Route>` –∏–ª–∏ `<Redirect>` –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Å —Ç–µ–∫—É—â–µ–π –ª–æ–∫–∞—Ü–∏–µ–π (URL).

**–í —á–µ–º —Å–æ—Å—Ç–æ–∏—Ç –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å `<Switch>`?**

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å `<Switch>` —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–∞—Ä—à—Ä—É—Ç –∏–∑ –Ω–∞–±–æ—Ä–∞. –ë–µ–∑ `<Switch>` —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–∞–∂–¥—ã–π –º–∞—Ä—à—Ä—É—Ç, —Å–æ–≤–ø–∞–≤—à–∏–π —Å –ª–æ–∫–∞—Ü–∏–µ–π.

```js
import { Route } from "react-router"

const routes = (
  <div>
    <Route path="/about">
      <About />
    </Route>
    <Route path="/:user">
      <User />
    </Route>
    <Route>
      <NoMatch />
    </Route>
  </div>
)
```

–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏–∏ URL, —Ä–∞–≤–Ω–æ–º `/about`, –≤—Å–µ 3 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±—É–¥—É—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ª–æ–∫–∞—Ü–∏–µ–π –∏ –æ—Ç—Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ("—Å–∞–π–¥–±–∞—Ä—ã" - sidebars, "—Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏" - breadcrumbs, "—Ç–∞–±—ã" - tabs –∏ —Ç.–¥.).

–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –æ–±—ã—á–Ω–æ, –º—ã —Ö–æ—Ç–∏–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω `<Route>`. –ï—Å–ª–∏ –º—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ `/about`, —Ç–æ –µ–¥–≤–∞ –ª–∏ –º—ã —Ö–æ—Ç–∏–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<User />` –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—à–∏–±–∫–∏ 404. –í–æ—Ç –∫–∞–∫ –¥–æ–±–∏—Ç—å—Å—è —ç—Ç–æ–≥–æ —Å –ø–æ–º–æ—â—å—é `<Switch>`:

```js
import { Route, Switch } from "react-router"

const routes = (
  <Switch>
    <Route exact path="/">
      <Home />
    </Route>
    <Route path="/about">
      <About />
    </Route>
    <Route path="/:user">
      <User />
    </Route>
    <Route>
      <NoMatch />
    </Route>
  </Switch>
)
```

–≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É –Ω–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞ —Ç–æ–π –∂–µ –ø–æ–∑–∏—Ü–∏–∏, —á—Ç–æ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π.

#### –ü—Ä–æ–ø—ã

- `location`: object - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –ª–æ–∫–∞—Ü–∏–∏ (—Ç–µ–∫—É—â–µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ URL)
- `children`: node - –ø–æ—Ç–æ–º–∫–∏ `<Switch>` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ `<Route>` –∏–ª–∏ `<Redirect>`. `<Route>` —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ø–æ –ø—Ä–æ–ø—É `path`, `<Redirect>` - –ø–æ –ø—Ä–æ–ø—É `from`. –£–∫–∞–∑–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–ø–æ–≤ –≤—Å–µ–≥–¥–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç. –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ `<Redirect>` –≤ `<Switch>`, –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—Å–µ –ø—Ä–æ–ø—ã `<Route>` (`path`, `exact` –∏ `strict`). –ü—Ä–æ–ø `from` - —ç—Ç–æ —Å–∏–Ω–æ–Ω–∏–º –ø—Ä–æ–ø–∞ `path`. –ï—Å–ª–∏ –≤ `<Switch>` –ø–µ—Ä–µ–¥–∞–Ω –ø—Ä–æ–ø `location`, –∑–Ω–∞—á–µ–Ω–∏–µ `location` —Å–æ–≤–ø–∞–≤—à–µ–≥–æ –ø–æ—Ç–æ–º–∫–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–æ.

```js
import { Redirect, Route, Switch } from "react-router"

let routes = (
  <Switch>
    <Route exact path="/">
      <Home />
    </Route>

    <Route path="/users">
      <Users />
    </Route>
    <Redirect from="/accounts" to="/users" />

    <Route>
      <NoMatch />
    </Route>
  </Switch>
)
```
	
**[‚¨Ü 254](#254)**

	
### Link <a name="link"></a>	

- [&lt;NavLink>](#nav)

–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–ø–æ—Å–æ–± –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

```js
<Link to="/about">–ö–æ–Ω—Ç–∞–∫—Ç—ã</Link>
```

#### –ü—Ä–æ–ø—ã

- `to`: string - —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏, —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–µ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ "pathname", "search" –∏ "hash"

```js
<Link to="/courses?sort=name" />
```
- `to`: object - –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞:
  - `pathname`: string - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—É—Ç–∏
  - `search`: string - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
  - `hash`: string - —Ö—ç—à-—á–∞—Å—Ç—å URL
  - `state`: object - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏

```js
<Link
  to={{
    pathname: "/courses",
    search: "?sort=name",
    hash: "#the-hash",
    state: { fromDashboard: true }
  }}
/>
```

- `to`: func - —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∞—è –ª–æ–∫–∞—Ü–∏—è –∏ –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –æ–±—ä–µ–∫—Ç–∞

```js
<Link to={location => ({ ...location, pathname: "/courses" })} />
<Link to={location => `${location.pathname}?sort=name`} />
```

- `replace`: bool - –µ—Å–ª–∏ `true`, —Ç–æ–≥–¥–∞ –Ω–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è –∑–∞–º–µ–Ω—è–µ—Ç —Ç–µ–∫—É—â—É—é –≤ —Å—Ç–µ–∫–µ –∏—Å—Ç–æ—Ä–∏–∏, –∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –Ω–µ–π

```js
<Link to="/courses" replace />
```

- `component`: React.Component - –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–π –ø—Ä–æ–ø

```js
const FancyLink = React.forwardRef((props, ref) => (
  <a ref={ref} {...props}>üíÖ {props.children}</a>
))

<Link to="/" component={FancyLink} />
```

- –¥—Ä—É–≥–∏–µ - `title`, `id`, `className` –∏ —Ç.–¥.

**[‚¨Ü 254](#254)**	
	
	
### NavLink <a name="nav"></a>		

–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è `<Link>`, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π –∫ —ç–ª–µ–º–µ–Ω—Ç—É, —Å–æ–≤–ø–∞–¥–∞—é—â–µ–º—É —Å —Ç–µ–∫—É—â–∏–º URL (–∞–∫—Ç–∏–≤–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É).

```js
<NavLink to="/about">About</NavLink>
```

#### –ü—Ä–æ–ø—ã

- `activeClassName`: string - –∫–ª–∞—Å—Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞. –ó–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è `active`. –û–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å –ø—Ä–æ–ø–æ–º `className`

```js
<NavLink to="/faq" activeClassName="selected">
  –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
</NavLink>
```

- `activeStyle`: object - —Å—Ç–∏–ª–∏, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –∫ –∞–∫—Ç–∏–≤–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É

```js
<NavLink
  to="/faq"
  activeStyle={{
    fontWeight: "bold",
    color: "red"
  }}
>
  –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
</NavLink>
```

- `exact`: bool - –µ—Å–ª–∏ `true`, —Ç–æ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å/—Å—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ç–æ—á–Ω–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏
- `strict`: bool - –µ—Å–ª–∏ `true`, —Ç–æ–≥–¥–∞ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∑–∞–º—ã–∫–∞—é—â–∏–π (–ø–æ—Å–ª–µ–¥–Ω–∏–π) —Å–ª—ç—à
- `isActive`: func - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–∫–∏

```js
<NavLink
  to="/events/123"
  isActive={(match, location) => {
    if (!match) {
      return false
    }

    // —Å–æ–±—ã—Ç–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —è–≤–ª—è–µ—Ç—Å—è –Ω–µ—á–µ—Ç–Ω—ã–º —á–∏—Å–ª–æ–º
    const eventID = parseInt(match.params.eventID)
    return !isNaN(eventID) && eventID % 2 === 1
  }}
>
  –°–æ–±—ã—Ç–∏–µ 123
</NavLink>
```

- `location`: object - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –¥—Ä—É–≥–æ–π –ª–æ–∫–∞—Ü–∏–µ–π
- `aria-current`: string - –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ `aria-current` –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Å—ã–ª–∫–∏. –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `page` (–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), `step`, `location`, `date`, `time`, `true`, `false`.

**[‚¨Ü 254](#254)**	
	

### Redirect <a name="redirect"></a>	

–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ `<Redirect>` –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—é –≤ –Ω–æ–≤—É—é –ª–æ–∫–∞—Ü–∏—é. –ù–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –≤ —Å—Ç–µ–∫–µ –∏—Å—Ç–æ—Ä–∏–∏, –∫–∞–∫ –ø—Ä–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ (HTTP 3xx).

```js
<Route exact path="/">
  {loggedIn ? <Redirect to="/dashboard" /> : <PublicHomePage />}
</Route>
```

#### –ü—Ä–æ–ø—ã

- `to`: string - –ª—é–±–æ–π –≤–∞–ª–∏–¥–Ω—ã–π URL
- `to`: object - –æ–±—ä–µ–∫—Ç –ª–æ–∫–∞—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```js
<Redirect
  to={{
    pathname: "/login",
    search: "?utm=your+face",
    state: { referrer: currentLocation }
  }}
/>
```

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `Login` –æ–±—ä–µ–∫—Ç `state` –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `props.location.state`, –∞ –∫–ª—é—á `referrer` - —á–µ—Ä–µ–∑ `props.state.referrer`.

- `push`: bool - –µ—Å–ª–∏ `true`, –Ω–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å—Ç–µ–∫ –∏—Å—Ç–æ—Ä–∏–∏, –∞ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç —Ç–µ–∫—É—â—É—é
- `from`: string - –ª—é–±–æ–π –≤–∞–ª–∏–¥–Ω—ã–π URL. –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –≤ `<Switch>`

```js
<Switch>
  <Redirect from="/old-path" to="/new-path" />
  <Route path="/new-path">
    <Place />
  </Route>
</Switch>

// –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å —Å–æ–≤–ø–∞–≤—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
<Switch>
  <Redirect from="/users/:id" to="/users/profile/:id" />
  <Route path="/users/profile/:id">
    <Profile />
  </Route>
</Switch>
```

- `exact`: bool - —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, –∞–Ω–∞–ª–æ–≥ `Route.exact`. –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `from`
- `strict`: bool - —É—á–µ—Ç –∑–∞–º—ã–∫–∞—é—â–µ–≥–æ —Å–ª—ç—à–∞, –∞–Ω–∞–ª–æ–≥ `Route.strict`. –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `from`
- `sensitive`: bool - —É—á–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞, –∞–Ω–∞–ª–æ–≥ `Route.sensitive`

**[‚¨Ü 254](#254)**
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
  
255. ### <a name="255"></a> react-router v6

```jsx harmony
import * as React from "react";
import { Routes, Route, Outlet, Link } from "react-router-dom";

export default function App() {
  return (
    <div>
      <h1>Basic Example</h1>

      <p>
        This example demonstrates some of the core features of React Router
        including nested <code>&lt;Route&gt;</code>s,{" "}
        <code>&lt;Outlet&gt;</code>s, <code>&lt;Link&gt;</code>s, and using a
        "*" route (aka "splat route") to render a "not found" page when someone
        visits an unrecognized URL.
      </p>

      {/* Routes nest inside one another. Nested route paths build upon
            parent route paths, and nested route elements render inside
            parent route elements. See the note about <Outlet> below. */}
      <Routes>
        <Route path="/" element={<Layout />}>
          <Route index element={<Home />} />
          <Route path="about" element={<About />} />
          <Route path="dashboard" element={<Dashboard />} />

          {/* Using path="*"" means "match anything", so this route
                acts like a catch-all for URLs that we don't have explicit
                routes for. */}
          <Route path="*" element={<NoMatch />} />
        </Route>
      </Routes>
    </div>
  );
}

function Layout() {
  return (
    <div>
      {/* A "layout route" is a good place to put markup you want to
          share across all the pages on your site, like navigation. */}
      <nav>
        <ul>
          <li>
            <Link to="/">Home</Link>
          </li>
          <li>
            <Link to="/about">About</Link>
          </li>
          <li>
            <Link to="/dashboard">Dashboard</Link>
          </li>
          <li>
            <Link to="/nothing-here">Nothing Here</Link>
          </li>
        </ul>
      </nav>

      <hr />

      {/* An <Outlet> renders whatever child route is currently active,
          so you can think about this <Outlet> as a placeholder for
          the child routes we defined above. */}
      <Outlet />
    </div>
  );
}

function Home() {
  return (
    <div>
      <h2>Home</h2>
    </div>
  );
}

function About() {
  return (
    <div>
      <h2>About</h2>
    </div>
  );
}

function Dashboard() {
  return (
    <div>
      <h2>Dashboard</h2>
    </div>
  );
}

function NoMatch() {
  return (
    <div>
      <h2>Nothing to see here!</h2>
      <p>
        <Link to="/">Go to the home page</Link>
      </p>
    </div>
  );
}  
```  
  
https://github.com/remix-run/react-router/blob/main/docs/upgrading/v5.md#upgrade-to-react-router-v6      
      
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
  
256. ### <a name="256"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
  
257. ### <a name="257"></a> React / redux Dev Tools

React Developer Tools –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø—Ä–æ–ø—ã. –û–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∫–∞–∫ –≤ –≤–∏–¥–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ (Chrome –∏ Firefox), —Ç–∞–∫ –∏ –≤ –≤–∏–¥–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ä–∞–±–æ—Ç–∞—é—Ç —Å –¥—Ä—É–≥–∏–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ Safari, IE –∏ React Native).

–í–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Redux DevTools:
	
1. –ü–æ–∑–≤–æ–ª—è—é—Ç –∏–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø–æ–ª–µ–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –æ–ø–µ—Ä–∞—Ü–∏–∏
2. –ü–æ–∑–≤–æ–ª—è—é—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –Ω–∞–∑–∞–¥, "–æ—Ç–º–µ–Ω—è—è" –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
3. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π "–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π" –æ–ø–µ—Ä–∞—Ü–∏–∏
4. –ï—Å–ª–∏ —Ä–µ–¥—É–∫—Ç–æ—Ä –≤—ã–±—Ä–æ—Å–∏–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –≤—ã —Å–º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ, –∏ –≤ —á–µ–º –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞
5. –° –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `persistState()` –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Å—Å–∏—é –æ—Ç–ª–∞–¥–∫–∏ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
  
258. ### <a name="258"></a> HOC - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞

`–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞` (Higher-Order Component, HOC) ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏. HOC –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é API React, –Ω–æ —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∏–∑-–∑–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ–π –ø—Ä–∏—Ä–æ–¥—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

## –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞?

![Higher Order Components](./assets/img2/Higher-Order-Components.jpg)

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞ (Higher Order Component, HOC) - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –≠—Ç–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ç–µ—Ö–Ω–∏–∫–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. `HOC` –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é `React API`. `HOC` —è–≤–ª—è–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º, –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–º –æ—Ç –∫–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ–π –ø—Ä–∏—Ä–æ–¥—ã `React`. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø—Ä–æ–ø—ã –≤ `UI`, –∞ `HOC` —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –¥—Ä—É–≥–æ–π. –ü—Ä–∏–º–µ—Ä–∞–º–∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö `HOC` —è–≤–ª—è—é—Ç—Å—è –º–µ—Ç–æ–¥—ã `connect` –≤ `Redux` –∏ `createContainer` –≤ `Relay`.

```jsx
// HOC.js
import React, { Component } from 'react'

export default function Hoc(WrappedComponent) {
  return class extends Component {
    render() {
      return (
        <div>
          <WrappedComponent></WrappedComponent>
        </div>
      )
    }
  }
}
```

```jsx
// App.js
import React, { Component } from 'react'
import Hoc from './HOC'

class App extends Component {
  render() {
    return (
      <div>
        –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞
      </div>
    )
  }
}

App = Hoc(App)

export default App
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:_

- –ú—ã –Ω–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∞ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ.
- `HOC` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ —Ü–µ–ª—è—Ö –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.
- `HOC` —è–≤–ª—è—é—Ç—Å—è "—á–∏—Å—Ç—ã–º–∏" (pure) —Ñ—É–Ω–∫—Ü–∏—è–º–∏. –û–Ω–∏ –Ω–µ –∏–º–µ—é—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (side effects) –∏ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.	    

	    
`–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞` ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.	    
	    
```jsx harmony
import {useState, useEffect} from 'react';
import {Container} from 'react-bootstrap';
import './App.css';

const withSlider = (BaseComponent, getData) => {
    return (props) => {
        const [slide, setSlide] = useState(0);
        const [autoplay, setAutoplay] = useState(false)

        useEffect(() => {
            setSlide(getData);
        }, [])

        function changeSlide(i) {
            setSlide(slide => slide + i);
        }

        return <BaseComponent
                            {...props}
                            slide={slide}
                            autoplay={autoplay}
                            changeSlide={changeSlide}
                            setAutoplay={setAutoplay} />
    }
}

const getDataFromFirstFetch = () => {return 10};
const getDataFromSecondFetch = () => {return 20};

const SliderFirst = (props) => {

    return (
        <Container>
            <div className="slider w-50 m-auto">
                <img className="d-block w-100" src="https://www.planetware.com/wpimages/2020/02/france-in-pictures-beautiful-places-to-photograph-eiffel-tower.jpg" alt="slide" />
                <div className="text-center mt-5">Active slide {props.slide}</div>
                <div className="buttons mt-3">
                    <button 
                        className="btn btn-primary me-2"
                        onClick={() => props.changeSlide(-1)}>-1</button>
                    <button 
                        className="btn btn-primary me-2"
                        onClick={() => props.changeSlide(1)}>+1</button>
                </div>
            </div>
        </Container>
    )
}

const SliderSecond = (props) => {

    return (
        <Container>
            <div className="slider w-50 m-auto">
                <img className="d-block w-100" src="https://www.planetware.com/wpimages/2020/02/france-in-pictures-beautiful-places-to-photograph-eiffel-tower.jpg" alt="slide" />
                <div className="text-center mt-5">Active slide {props.slide} <br/>{props.autoplay ? 'auto' : null} </div>
                <div className="buttons mt-3">
                    <button 
                        className="btn btn-primary me-2"
                        onClick={() => props.changeSlide(-1)}>-1</button>
                    <button 
                        className="btn btn-primary me-2"
                        onClick={() => props.changeSlide(1)}>+1</button>
                    <button 
                        className="btn btn-primary me-2"
                        onClick={() => props.setAutoplay(autoplay => !props.autoplay)}>toggle autoplay</button>
                </div>
            </div>
        </Container>
    )
}

const SliderWithFirstFetch = withSlider(SliderFirst, getDataFromFirstFetch());
const SliderWithSecondFetch = withSlider(SliderSecond, getDataFromSecondFetch());

const withLogger = WrappedComponent => props => {
    useEffect(() => {
        console.log('first render!')
    }, [])

    return <WrappedComponent {...props} />
}

const Hello = () => {
    return (
      <h1>Hello!</h1>
    )
}

const HelloWithLogger = withLogger(Hello);

function App() {
    return (
        <>
            <HelloWithLogger />
            <SliderWithFirstFetch />
            <SliderWithSecondFetch />
        </>
    );
}

export default App;	    
```	    
 
### –ü—Ä–∏–º–µ—Ä —Å  –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
	    
```jsx harmony
class CommentList extends React.Component {
  constructor(props) {
    super(props);
    this.handleChange = this.handleChange.bind(this);
    this.state = {
      // "DataSource" -- –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
      comments: DataSource.getComments()
    };
  }

  componentDidMount() {
    // –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è
    DataSource.addChangeListener(this.handleChange);
  }

  componentWillUnmount() {
    // –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –æ–ø–æ–≤–µ—â–µ–Ω–∏–π
    DataSource.removeChangeListener(this.handleChange);
  }

  handleChange() {
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
    this.setState({
      comments: DataSource.getComments()
    });
  }

  render() {
    return (
      <div>
        {this.state.comments.map((comment) => (
          <Comment comment={comment} key={comment.id} />
        ))}
      </div>
    );
  }
}
```	
	
–¢–µ–ø–µ—Ä—å –º—ã —Ä–µ—à–∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —É–∂–µ –∑–Ω–∞–∫–æ–º—ã–π –Ω–∞–º —à–∞–±–ª–æ–Ω:
	
```jsx harmony
class BlogPost extends React.Component {
  constructor(props) {
    super(props);
    this.handleChange = this.handleChange.bind(this);
    this.state = {
      blogPost: DataSource.getBlogPost(props.id)
    };
  }

  componentDidMount() {
    DataSource.addChangeListener(this.handleChange);
  }

  componentWillUnmount() {
    DataSource.removeChangeListener(this.handleChange);
  }

  handleChange() {
    this.setState({
      blogPost: DataSource.getBlogPost(this.props.id)
    });
  }

  render() {
    return <TextBlock text={this.state.blogPost} />;
  }
}
```	
	
–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É CommentList –∏ BlogPost –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã DataSource –∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç —Ä–∞–∑–Ω—ã–π –≤—ã–≤–æ–¥. –û–¥–Ω–∞–∫–æ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–≤–æ—ë–º –æ–Ω–∏ –ø–æ—Ö–æ–∂–∏:

- –û–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ—Ç DataSource –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.
- –û–±–∞ –º–µ–Ω—è—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ DataSource.
- –û–±–∞ –æ—Ç–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –æ—Ç DataSource –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.
	
–ú–æ–∂–µ—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å, —á—Ç–æ –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö —Å–≤—è–∑–∫–∞ ¬´–ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ DataSource, –∑–∞—Ç–µ–º –≤—ã–∑–≤–∞—Ç—å setState¬ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –æ—á–µ–Ω—å —á–∞—Å—Ç–æ. –ë—ã–ª–æ –±—ã –∑–¥–æ—Ä–æ–≤–æ –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.

–î–∞–≤–∞–π—Ç–µ —Ä–µ–∞–ª–∏–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é withSubscription ‚Äî –æ–Ω–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –∏—Ö –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DataSource (–Ω–∞–ø–æ–¥–æ–±–∏–µ CommentList –∏ BlogPost). –§—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–ø—Å—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–º—É –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:

```jsx harmony	
const CommentListWithSubscription = withSubscription(
  CommentList,
  (DataSource) => DataSource.getComments()
);

const BlogPostWithSubscription = withSubscription(
  BlogPost,
  (DataSource, props) => DataSource.getBlogPost(props.id)
);
```
	
–ü–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —ç—Ç–æ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –í—Ç–æ—Ä–æ–π ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∏–∑–≤–ª–µ–∫–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –Ω–∞–º –¥–∞–Ω–Ω—ã–µ, –æ–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç DataSource –∏ —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ–ø—Å—ã.

–ö–æ–≥–¥–∞ CommentListWithSubscription –∏ BlogPostWithSubscription —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è, –æ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç –≤ CommentList –∏ BlogPost –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ DataSource —á–µ—Ä–µ–∑ –ø—Ä–æ–ø data:

```jsx harmony	
// –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç...
function withSubscription(WrappedComponent, selectData) {
  // ...–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä—É–≥–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç...
  return class extends React.Component {
    constructor(props) {
      super(props);
      this.handleChange = this.handleChange.bind(this);
      this.state = {
        data: selectData(DataSource, props)
      };
    }

    componentDidMount() {
      // ...–∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è...
      DataSource.addChangeListener(this.handleChange);
    }

    componentWillUnmount() {
      DataSource.removeChangeListener(this.handleChange);
    }

    handleChange() {
      this.setState({
        data: selectData(DataSource, this.props)
      });
    }

    render() {
      // ... –∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ —Å–≤–µ–∂–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏!
      // –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞—ë–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø—Å—ã
      return <WrappedComponent data={this.state.data} {...this.props} />;
    }
  };
}	    
```	    
	    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
  
259. ### <a name="259"></a> React Transition Group

https://github.com/harryheman/my-js/blob/master/docs/guide/react-transition-group.md	
	
http://reactcommunity.org/react-transition-group/	
	
```jsx harmony
import { useState } from 'react';
import { Container } from 'react-bootstrap';
import { CSSTransition } from 'react-transition-group';
import './App.css';

const Modal = (props) => {
  const duration = 300;

  // const defaultStyle = {
  //     transition: `all ${duration}ms ease-in-out`,
  //     opacity: 0,
  //     visibility: 'hidden'
  // }
  //
  // const transitionStyles = {
  //     entering: { opacity: 1, visibility: 'visible' },
  //     entered:  { opacity: 1, visibility: 'visible' },
  //     exiting:  { opacity: 0, visibility: 'hidden' },
  //     exited:  { opacity: 0, visibility: 'hidden' },
  // };

  return (
    <CSSTransition
      in={props.show}
      timeout={duration}
      onEnter={() => props.setShowTrigger(false)}
      onExited={() => props.setShowTrigger(true)}
      classNames='modal'
      mountOnEnter
      unmountOnExit
    >
      <div className='modal mt-5 d-block'>
        <div className='modal-dialog'>
          <div className='modal-content'>
            <div className='modal-header'>
              <h5 className='modal-title'>Typical modal window</h5>
              <button
                onClick={() => props.onClose(false)}
                type='button'
                className='btn-close'
                aria-label='Close'
              ></button>
            </div>
            <div className='modal-body'>
              <p>Modal body content</p>
            </div>
            <div className='modal-footer'>
              <button
                onClick={() => props.onClose(false)}
                type='button'
                className='btn btn-secondary'
              >
                Close
              </button>
              <button
                onClick={() => props.onClose(false)}
                type='button'
                className='btn btn-primary'
              >
                Save changes
              </button>
            </div>
          </div>
        </div>
      </div>
    </CSSTransition>
  );
};

function App() {
  const [showModal, setShowModal] = useState(false);
  const [showTrigger, setShowTrigger] = useState(true);

  return (
    <Container>
      <Modal
        show={showModal}
        onClose={setShowModal}
        setShowTrigger={setShowTrigger}
      />
      {showTrigger ? (
        <button
          type='button'
          className='btn btn-warning mt-5'
          onClick={() => setShowModal(true)}
        >
          Open Modal
        </button>
      ) : null}
    </Container>
  );
}

export default App;	
```	
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
260. ### <a name="260"></a> Formik, Yup - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ä–º–∞–º–∏

### —Ö—É–∫ useFormik	
```jsx harmony
import {useFormik} from 'formik';
import * as Yup from 'yup';

const Form = () => {

	const formik = useFormik({
		initialValues: {
			name: '',
			email: '',
			amount: 0,
			currency: '',
			text: '',
			terms: false
		},
		validationSchema: Yup.object({
			name: Yup.string()
				.min(2, '–ú–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞')
				.required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
			email: Yup.string()
				.email('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π email –∞–¥—Ä–µ—Å')
				.required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
			amount: Yup.number()
				.min(5, '–ù–µ –º–µ–Ω–µ–µ 5')
				.required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
			currency: Yup.string().required('–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É'),
			text: Yup.string()
				.min(10, '–ù–µ –º–µ–Ω–µ–µ 10 —Å–∏–º–≤–æ–ª–æ–≤'),
			terms: Yup.boolean()
				.required('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ!')
				.oneOf([true], '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ!')
		}),
		onSubmit: values => console.log(JSON.stringify(values, null, 2))
	})

	return (
		<form className="form" onSubmit={formik.handleSubmit}>
			<h2>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ</h2>
			<label htmlFor="name">–í–∞—à–µ –∏–º—è</label>
			<input
				id="name"
				name="name"
				type="text"
				value={formik.values.name}
				onChange={formik.handleChange}
				onBlur={formik.handleBlur}
			/>
			{formik.errors.name && formik.touched.name ? <div className='error'>{formik.errors.name}</div> : null}
			<label htmlFor="email">–í–∞—à–∞ –ø–æ—á—Ç–∞</label>
			<input
				id="email"
				name="email"
				type="email"
				value={formik.values.email}
				onChange={formik.handleChange}
				onBlur={formik.handleBlur}
			/>
			{formik.errors.email && formik.touched.email ? <div className='error'>{formik.errors.email}</div> : null}
			<label htmlFor="amount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
			<input
				id="amount"
				name="amount"
				type="number"
				value={formik.values.amount}
				onChange={formik.handleChange}
				onBlur={formik.handleBlur}
			/>
			{formik.errors.amount && formik.touched.amount ? <div className='error'>{formik.errors.amount}</div> : null}
			<label htmlFor="currency">–í–∞–ª—é—Ç–∞</label>
			<select
				id="currency"
				name="currency"
				value={formik.values.currency}
				onChange={formik.handleChange}
				onBlur={formik.handleBlur}>
				<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É</option>
				<option value="USD">USD</option>
				<option value="UAH">UAH</option>
				<option value="RUB">RUB</option>
			</select>
			{formik.errors.currency && formik.touched.currency ? <div className='error'>{formik.errors.currency}</div> : null}
			<label htmlFor="text">–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</label>
			<textarea
				id="text"
				name="text"
				value={formik.values.text}
				onChange={formik.handleChange}
				onBlur={formik.handleBlur}
			/>
			{formik.errors.text && formik.touched.text ? <div className='error'>{formik.errors.text}</div> : null}
			<label className="checkbox">
				<input
					name="terms"
					type="checkbox"
					value={formik.values.terms}
					onChange={formik.handleChange}
					onBlur={formik.handleBlur}
				/>
				–°–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏?
			</label>
			{formik.errors.terms && formik.touched.terms ? <div className='error'>{formik.errors.terms}</div> : null}
			<button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
		</form>
	)
}

export default Form;	
```	

### Formik, Form, Field, ErrorMessage
```jsx harmony
import { Formik, Form, Field, ErrorMessage } from 'formik';
import * as Yup from 'yup';

const CustomForm = () => {

	return (
		<Formik
			initialValues = {{
				name: '',
				email: '',
				amount: 0,
				currency: '',
				text: '',
				terms: false
			}}
			validationSchema = {Yup.object({
				name: Yup.string()
					.min(2, '–ú–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞')
					.required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
				email: Yup.string()
					.email('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π email –∞–¥—Ä–µ—Å')
					.required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
				amount: Yup.number()
					.min(5, '–ù–µ –º–µ–Ω–µ–µ 5')
					.required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
				currency: Yup.string().required('–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É'),
				text: Yup.string()
					.min(10, '–ù–µ –º–µ–Ω–µ–µ 10 —Å–∏–º–≤–æ–ª–æ–≤'),
				terms: Yup.boolean()
					.required('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ!')
					.oneOf([true], '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ!')
			})}
			onSubmit = {values => console.log(JSON.stringify(values, null, 2))}
		>
			<Form className="form">
				<h2>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ</h2>
				<label htmlFor="name">–í–∞—à–µ –∏–º—è</label>
				<Field
					id="name"
					name="name"
					type="text"
				/>
				<ErrorMessage className='error' name='name' component='div' />
				<label htmlFor="email">–í–∞—à–∞ –ø–æ—á—Ç–∞</label>
				<Field
					id="email"
					name="email"
					type="email"
				/>
				<ErrorMessage className='error' name='email' component='div' />
				<label htmlFor="amount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
				<Field
					id="amount"
					name="amount"
					type="number"
				/>
				<ErrorMessage className='error' name='amount' component='div' />
				<label htmlFor="currency">–í–∞–ª—é—Ç–∞</label>
				<Field
					id="currency"
					name="currency"
					as='select'>
					<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É</option>
					<option value="USD">USD</option>
					<option value="UAH">UAH</option>
					<option value="RUB">RUB</option>
				</Field>
				<ErrorMessage className='error' name='currency' component='div' />
				<label htmlFor="text">–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</label>
				<Field
					id="text"
					name="text"
					as='textarea'
				/>
				<ErrorMessage className='error' name='text' component='div' />
				<label className="checkbox">
					<Field
						name="terms"
						type="checkbox"
					/>
					–°–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏?
				</label>
				<ErrorMessage className='error' name='terms' component='div' />
				<button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
			</Form>
		</Formik>
	)
}

export default CustomForm;	
```	

### useField
```jsx harmony
import { Formik, Form, Field, ErrorMessage, useField } from 'formik';
import * as Yup from 'yup';

const MyTextInput = ({label, ...props}) => {
	const [field, meta] = useField(props);

	return (
		<>
			<label htmlFor={props.name}>{label}</label>
			<input {...props} {...field} />
			{meta.touched && meta.error ? (
				<div className='error'>{meta.error}</div>
			) : null}
		</>
	)
};

const MyCheckbox = ({children, ...props}) => {
	const [field, meta] = useField({...props, type: 'checkbox'});

	return (
		<>
			<label className='checkbox'>
				<input type='checkbox' {...props} {...field} />
				{children}
			</label>

			{meta.touched && meta.error ? (
				<div className='error'>{meta.error}</div>
			) : null}
		</>
	)
};

const CustomForm = () => {

	return (
		<Formik
			initialValues = {{
				name: '',
				email: '',
				amount: 0,
				currency: '',
				text: '',
				terms: false
			}}
			validationSchema = {Yup.object({
		name: Yup.string()
			.min(2, '–ú–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞')
			.required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
			email: Yup.string()
			.email('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π email –∞–¥—Ä–µ—Å')
			.required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
			amount: Yup.number()
			.min(5, '–ù–µ –º–µ–Ω–µ–µ 5')
			.required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
			currency: Yup.string().required('–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É'),
			text: Yup.string()
			.min(10, '–ù–µ –º–µ–Ω–µ–µ 10 —Å–∏–º–≤–æ–ª–æ–≤'),
			terms: Yup.boolean()
			.required('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ!')
			.oneOf([true], '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ!')
	})}
			onSubmit = {values => console.log(JSON.stringify(values, null, 2))}
		>
			<Form className="form">
				<h2>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ</h2>				
				<MyTextInput
					label='–í–∞—à–µ –∏–º—è'
					id="name"
					name="name"
					type="text"
				/>
				<MyTextInput
					label='–í–∞—à–∞ –ø–æ—á—Ç–∞'
					id="email"
					name="email"
					type="email"
				/>
				<label htmlFor="amount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
				<Field
					id="amount"
					name="amount"
					type="number"
				/>
				<ErrorMessage className='error' name='amount' component='div' />
				<label htmlFor="currency">–í–∞–ª—é—Ç–∞</label>
				<Field
					id="currency"
					name="currency"
					as='select'>
					<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É</option>
					<option value="USD">USD</option>
					<option value="UAH">UAH</option>
					<option value="RUB">RUB</option>
				</Field>
				<ErrorMessage className='error' name='currency' component='div' />
				<label htmlFor="text">–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</label>
				<Field
					id="text"
					name="text"
					as='textarea'
				/>
				<ErrorMessage className='error' name='text' component='div' />
				<MyCheckbox
					name='terms'>
					–°–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏?
				</MyCheckbox>
				<button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
			</Form>
		</Formik>
	)
}

export default CustomForm;	
```	

### –í–∞–ª–∏–¥–∞—Ü–∏—è –±–µ–∑ Yup
```jsx harmony
const validate = values => {
	const errors = {};

	if (!values.name) {
		errors.name = '–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ!';
	} else if (values.name.length < 2) {
		errors.name = '–ú–∏–Ω–∏–º–º—É–º 2 —Å–∏–º–≤–æ–ª–∞';
	}

	if (values.email) {
		errors.email = '–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ!';
	} else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(values.email)
	) {
		errors.email = '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π email –∞–¥—Ä–µ—Å'
	}

	return errors;
}	
```	
	
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
261. ### <a name="261"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	
  
300. ### <a name="300"></a> –•—É–∫–∏ –≤ React

 `–•—É–∫–∏` ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –º–æ–∂–µ—Ç–µ ¬´–ø–æ–¥—Ü–µ–ø–∏—Ç—å—Å—è¬ª –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –∏ –º–µ—Ç–æ–¥–∞–º –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ React –∏–∑ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –•—É–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–æ–≤ ‚Äî –æ–Ω–∏ –¥–∞—é—Ç –≤–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React –±–µ–∑ –∫–ª–∞—Å—Å–æ–≤.
	
```jsx harmony
import React, { useState } from 'react';

function Example() {
  // –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—É—é –º—ã –Ω–∞–∑–æ–≤—ë–º "count"
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>–í—ã –∫–ª–∏–∫–Ω—É–ª–∏ {count} —Ä–∞–∑</p>
      <button onClick={() => setCount(count + 1)}>
        –ù–∞–∂–º–∏ –Ω–∞ –º–µ–Ω—è
      </button>
    </div>
  );
}
```	

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ö—É–∫–æ–≤	
- –•—É–∫–∏ –¥–∞—é—Ç –Ω–æ–≤—ã–π –º–æ—â–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.	
- –•—É–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞–º –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏
- –° –ø–æ–º–æ—â—å—é —Ö—É–∫–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ, –∏ —è —Å—á–∏—Ç–∞—é, —á—Ç–æ —á—Ç–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –º–µ–Ω—å—à–µ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –ø–æ—Å–∫–æ–ª—å–∫—É —Ç—ã –Ω–µ –ø—Ä—ã–≥–∞–µ—à—å –ø–æ —Ñ–∞–π–ª—É, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –≤ –∫–∞–∫–æ–º –º–µ—Ç–æ–¥–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞, –ø–æ —Ç–≤–æ–µ–º—É –º–Ω–µ–Ω–∏—é, —á—Ç–æ-—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ.
- –•—É–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∞–º –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è –¥–µ—Ä–µ–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –•—É–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–∑–±–∏—Ç—å –æ–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–ø–∏—Å–∫–µ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö)	
- –•—É–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π React –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
301. ### <a name="301"></a> –ú–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –º–æ–∂–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å –•—É–∫–∏

 ### –ö–∞–∫ –º–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ö—É–∫–∞–º?	
- constructor: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –Ω–µ –Ω—É–∂–µ–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –í—ã –º–æ–∂–µ—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –≤—ã–∑–æ–≤ useState. –ï—Å–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω—ã, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ useState.
- getDerivedStateFromProps: –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ.
- shouldComponentUpdate: –°–º–æ—Ç—Ä–∏—Ç–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ React.memo –Ω–∏–∂–µ.
- render: –≠—Ç–æ —Ç–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
- componentDidMount, componentDidUpdate, componentWillUnmount: –•—É–∫ useEffect –∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (–≤–∫–ª—é—á–∞—è –±–æ–ª–µ–µ —Ä–µ–¥–∫–∏–µ —Å–ª—É—á–∞–∏).
- getSnapshotBeforeUpdate, componentDidCatch –∏ getDerivedStateFromError: –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö—É–∫–æ–≤-–∞–Ω–∞–ª–æ–≥–æ–≤ –¥–ª—è —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤, –Ω–æ –æ–Ω–∏ –±—É–¥—É—Ç —Å–∫–æ—Ä–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã.
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
302. ### <a name="302"></a> –•—É–∫–∏

 `–•—É–∫–∏` ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –º–æ–∂–µ—Ç–µ ¬´–ø–æ–¥—Ü–µ–ø–∏—Ç—å—Å—è¬ª –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –∏ –º–µ—Ç–æ–¥–∞–º –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ React –∏–∑ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –•—É–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–æ–≤ ‚Äî –æ–Ω–∏ –¥–∞—é—Ç –≤–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React –±–µ–∑ –∫–ª–∞—Å—Å–æ–≤.	
	
`–•—É–∫–∏` ‚Äî –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏–µ –≤ React 16.8, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –¥—Ä—É–≥–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ React –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤.	
	
- [useState](#useState)
- [useEffect](#useEffect)	
- [useContext](#useContext)	
- [useReducer](#useReducer)	
- [useCallback](#useCallback)	
- [useMemo](#useMemo)	
- [useRef](#useRef)
- [useImperativeHandle](#useImperativeHandle)
- [useLayoutEffect](#useLayoutEffect)
- [useDebugValue](#useDebugValue)
- [useDeferredValue](#useDeferredValue)
- [useTransition](#useTransition)	
- [useId](#useId)	
	
### useState <a name="useState"></a>
	
```jsx harmony	
const [state, setState] = useState(initialState);
```	
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

–í–æ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (state) —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (initialState).

–§—É–Ω–∫—Ü–∏—è setState –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è. –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å—Ç–∞–≤–∏—Ç –≤ –æ—á–µ—Ä–µ–¥—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
```jsx harmony
setState(newState);
```	
–í–æ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤ –ø–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ useState, –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Å–∞–º—ã–º –ø–æ—Å–ª–µ–¥–Ω–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

`–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è`
	
–ï—Å–ª–∏ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ setState. –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –≤–µ—Ä–Ω—ë—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –í–æ—Ç –ø—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å—á—ë—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±–µ —Ñ–æ—Ä–º—ã setState:
```jsx harmony
function Counter({initialCount}) {
  const [count, setCount] = useState(initialCount);
  return (
    <>
      –°—á—ë—Ç: {count}
      <button onClick={() => setCount(initialCount)}>–°–±—Ä–æ—Å–∏—Ç—å</button>
      <button onClick={() => setCount(prevCount => prevCount - 1)}>-</button>
      <button onClick={() => setCount(prevCount => prevCount + 1)}>+</button>
    </>
  );
}
```	
–ö–Ω–æ–ø–∫–∏ ¬´+¬ª –∏ ¬´-¬ª –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –∑–Ω–∞—á–µ–Ω–∏–∏. –ù–æ –∫–Ω–æ–ø–∫–∞ ¬´–°–±—Ä–æ—Å–∏—Ç—å¬ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ã—á–Ω—É—é —Ñ–æ—Ä–º—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –≤—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ –æ–±—Ä–∞—Ç–Ω–æ –≤ 0.

	
### –ü—Ä–∏–º–µ—Ä
	
```jsx harmony
import React, {useState} from 'react'

function computeInitialCounter() {
  console.log('Some calculations...')
  return Math.trunc(Math.random() * 20)
}

function App() {
  // const [counter, setCounter] = useState(0)
  // const [counter, setCounter] = useState(computeInitialCounter())
  const [counter, setCounter] = useState(() => {
    return computeInitialCounter()
  })

  const [state, setState] = useState({
    title: '–°—á–µ—Ç—á–∏–∫',
    date: Date.now()
  })

  function increment() {
    // setCounter(counter + 1)
    // setCounter(counter + 1)
    setCounter((prevCounter) => {
      return prevCounter + 1
    })
    // setCounter(prev => prev + 1)
  }

  function decrement() {
    setCounter(counter - 1)
  }

  function updateTitle() {
    setState(prev => {
      return {
        ...prev,
        title: '–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ'
      }
    })
  }

  return (
    <div>
      <h1>–°—á–µ—Ç—á–∏–∫: {counter}</h1>
      <button onClick={increment} className="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å</button>
      <button onClick={decrement} className="btn btn-danger">–£–±—Ä–∞—Ç—å</button>
      <button onClick={updateTitle} className="btn btn-default">–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ</button>

      <pre>{JSON.stringify(state, null, 2)}</pre>
    </div>
  )
}

export default App	
```	
	
	
**[‚¨Ü 302](#302)**
	
	
### useEffect <a name="useEffect"></a>	
	
```jsx harmony	
useEffect(didUpdate);
```	
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥, –≤–æ–∑–º–æ–∂–Ω–æ, —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏.

–ú—É—Ç–∞—Ü–∏–∏, –ø–æ–¥–ø–∏—Å–∫–∏, —Ç–∞–π–º–µ—Ä—ã, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥—Ä—É–≥–∏–µ –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–µ–ª–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–Ω–∞–∑—ã–≤–∞–µ–º–æ–≥–æ —ç—Ç–∞–ø–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ React). –≠—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–º –æ—à–∏–±–∫–∞–º –∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è–º –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ useEffect. –§—É–Ω–∫—Ü–∏—è, –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –≤ useEffect, –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–∞ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ä–µ–Ω–¥–µ—Ä –±—É–¥–µ—Ç –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –Ω–∞ —ç–∫—Ä–∞–Ω–µ. –î—É–º–∞–π—Ç–µ –æ–± —ç—Ñ—Ñ–µ–∫—Ç–∞—Ö –∫–∞–∫ –æ –ª–∞–∑–µ–π–∫–µ –∏–∑ —á–∏—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞ React –≤ –º–∏—Ä –∏–º–ø–µ—Ä–∞—Ç–∏–≤–æ–≤.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ñ—Ñ–µ–∫—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–µ—à–∏—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

`–û—á–∏—Å—Ç–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞`
	
–ß–∞—Å—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç—ã —Å–æ–∑–¥–∞—é—Ç —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—á–∏—Å—Ç–∏—Ç—å (–∏–ª–∏ —Å–±—Ä–æ—Å–∏—Ç—å) –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∫–∏–¥–∞–µ—Ç —ç–∫—Ä–∞–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–æ–¥–ø–∏—Å–∫—É –∏–ª–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∞–π–º–µ—Ä–∞. –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ, —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –≤ useEffect, –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É:
```jsx harmony
useEffect(() => {
  const subscription = props.source.subscribe();
  return () => {
    // –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
    subscription.unsubscribe();
  };
});
```	
–§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–æ —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ (–∫–∞–∫ –æ–±—ã—á–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç), –ø—Ä–µ–¥—ã–¥—É—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç –æ—á–∏—â–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –∫–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞–∑–¥–µ–ª—É.

`–ü–æ—Ä—è–¥–æ–∫ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤`
	
–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç componentDidMount –∏ componentDidUpdate, —Ñ—É–Ω–∫—Ü–∏—è, –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –≤ useEffect, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –ø–æ—Å–ª–µ —Ä–∞–∑–º–µ—Ç–∫–∏ –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç —Ö—É–∫ –ø–æ–¥—Ö–æ–¥—è—â–∏–º –¥–ª—è –º–Ω–æ–≥–∏—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ —Ä–∞–±–æ—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–æ–º.

–û–¥–Ω–∞–∫–æ –Ω–µ –≤—Å–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–ª–æ–∂–µ–Ω—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–µ–Ω–∏–µ DOM, –∫–æ—Ç–æ—Ä–æ–µ –≤–∏–¥–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –¥–æ–ª–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–º–µ—á–∞–ª –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è. (–†–∞–∑–ª–∏—á–∏–µ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ —Å—Ö–æ–∂–µ —Å –ø–∞—Å—Å–∏–≤–Ω—ã–º –∏ –∞–∫—Ç–∏–≤–Ω—ã–º —Å–ª—É—à–∞—Ç–µ–ª—è–º–∏ —Å–æ–±—ã—Ç–∏–π.) –î–ª—è —ç—Ç–∏—Ö —Ç–∏–ø–æ–≤ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ React –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–¥–∏–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ö—É–∫, –Ω–∞–∑—ã–≤–∞–µ–º—ã–π useLayoutEffect. –û–Ω –∏–º–µ–µ—Ç —Ç—É –∂–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—É, —á—Ç–æ –∏ useEffect, –∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –µ–≥–æ –∑–∞–ø—É—Å–∫–µ.

–•–æ—Ç—è useEffect –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É, –æ–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –Ω–æ–≤—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏. React –≤—Å–µ–≥–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏–º–µ–Ω—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –Ω–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

`–£—Å–ª–æ–≤–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞`
	
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ñ—Ñ–µ–∫—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —ç—Ñ—Ñ–µ–∫—Ç –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫–æ–π-—Ç–æ –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å.

–û–¥–Ω–∞–∫–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–ª–∏—à–Ω–∏–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø—Ä–∏–º–µ—Ä–µ –ø–æ–¥–ø–∏—Å–∫–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞. –ù–∞–º –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—É—é –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∫–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è –ø—Ä–æ–ø source.

–ß—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç—Ç–æ, –ø–µ—Ä–µ–¥–∞–π—Ç–µ –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –≤ useEffect, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º –∑–Ω–∞—á–µ–Ω–∏–π, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≤–∏—Å–∏—Ç —ç—Ñ—Ñ–µ–∫—Ç. –ù–∞—à –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ç–µ–ø–µ—Ä—å –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
```jsx harmony
useEffect(
  () => {
    const subscription = props.source.subscribe();
    return () => {
      subscription.unsubscribe();
    };
  },
  [props.source],
);	
```

```jsx harmony
import React, { useState, useEffect } from 'react';

function FriendStatus(props) {
  const [isOnline, setIsOnline] = useState(null);

  useEffect(() => {
    function handleStatusChange(status) {
      setIsOnline(status.isOnline);
    }
    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);
    // –£–∫–∞–∑—ã–≤–∞–µ–º, –∫–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å —ç—Ç–æ—Ç —ç—Ñ—Ñ–µ–∫—Ç:
    return function cleanup() {
      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);
    };
  });

  if (isOnline === null) {
    return '–ó–∞–≥—Ä—É–∑–∫–∞...';
  }
  return isOnline ? '–í —Å–µ—Ç–∏' : '–ù–µ –≤ —Å–µ—Ç–∏';
}	
```
	
### –ü—Ä–∏–º–µ—Ä
	
```jsx harmony
import React, {useState, useEffect} from 'react'

function App() {
  const [type, setType] = useState('users')
  const [data, setData] = useState([])
  const [pos, setPos] = useState({
    x: 0, y: 0
  })

  // useEffect(() => {
  //   console.log('render')
  // })

  useEffect(() => {
    fetch(`https://jsonplaceholder.typicode.com/${type}`)
      .then(response => response.json())
      .then(json => setData(json))

    return () => {
      console.log('clean type')
    }
  }, [type])

  const mouseMoveHandler = event => {
    setPos({
      x: event.clientX,
      y: event.clientY
    })
  }

  useEffect(() => {
    console.log('ComponentDidMount')

    window.addEventListener('mousemove', mouseMoveHandler)

    return () => {
      window.removeEventListener('mousemove', mouseMoveHandler)
    }
  }, [])

  return (
    <div>
      <h1>–†–µ—Å—É—Ä—Å: {type}</h1>

      <button onClick={() => setType('users')}>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
      <button onClick={() => setType('todos')}>Todos</button>
      <button onClick={() => setType('posts')}>–ü–æ—Å—Ç—ã</button>

      {/*<pre>{JSON.stringify(data, null, 2)}</pre>*/}
      <pre>{JSON.stringify(pos, null, 2)}</pre>
    </div>
  )
}

export default App	
```	
	
	
**[‚¨Ü 302](#302)**
	
	
### useContext <a name="useContext"></a>	
	
```jsx harmony	
const value = useContext(MyContext);
```	
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–∑–Ω–∞—á–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω–æ–µ –∏–∑ React.createContext) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–æ–ø–æ–º value –±–ª–∏–∂–∞–π—à–µ–≥–æ <MyContext.Provider> –Ω–∞–¥ –≤—ã–∑—ã–≤–∞—é—â–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –≤ –¥–µ—Ä–µ–≤–µ.

–ö–æ–≥–¥–∞ –±–ª–∏–∂–∞–π—à–∏–π <MyContext.Provider> –Ω–∞–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, —ç—Ç–æ—Ç —Ö—É–∫ –≤—ã–∑–æ–≤–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º —ç—Ç–æ–º—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É MyContext. –î–∞–∂–µ –µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç React.memo –∏–ª–∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç shouldComponentUpdate, —Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è, –Ω–∞—á–∏–Ω–∞—è c –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ useContext.

–ó–∞–ø–æ–º–Ω–∏—Ç–µ, –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –¥–ª—è useContext –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å–∞–º –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

- –ü—Ä–∞–≤–∏–ª—å–Ω–æ: useContext(MyContext)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: useContext(MyContext.Consumer)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: useContext(MyContext.Provider)
	
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç, –≤—ã–∑—ã–≤–∞—é—â–∏–π useContext, –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –ï—Å–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∑–∞—Ç—Ä–∞—Ç–µ–Ω, –≤—ã –º–æ–∂–µ—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Å –ø–æ–º–æ—â—å—é –º–µ–º–æ–∏–∑–∞—Ü–∏–∏.

useContext(MyContext) –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –í–∞–º –≤—Å—ë –µ—â—ë –Ω—É–∂–µ–Ω <MyContext.Provider> –≤—ã—à–µ –≤ –¥–µ—Ä–µ–≤–µ, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

`–°–æ–µ–¥–∏–Ω–∏–º –≤—Å–µ –≤–º–µ—Å—Ç–µ —Å Context.Provider`
```jsx harmony
const themes = {
  light: {
    foreground: "#000000",
    background: "#eeeeee"
  },
  dark: {
    foreground: "#ffffff",
    background: "#222222"
  }
};

const ThemeContext = React.createContext(themes.light);

function App() {
  return (
    <ThemeContext.Provider value={themes.dark}>
      <Toolbar />
    </ThemeContext.Provider>
  );
}

function Toolbar(props) {
  return (
    <div>
      <ThemedButton />
    </div>
  );
}

function ThemedButton() {
  const theme = useContext(ThemeContext);
  return (
    <button style={{ background: theme.background, color: theme.foreground }}>
      –Ø —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω —Ç–µ–º–æ–π –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞!
    </button>
  );
}	
```

**[‚¨Ü 302](#302)**
	
	
### useReducer <a name="useReducer"></a>	
	
```jsx harmony	
const [state, dispatch] = useReducer(reducer, initialArg, init);
```	
–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è useState. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ–¥—é—Å–µ—Ä —Ç–∏–ø–∞ (state, action) => newState –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –ø–∞—Ä–µ —Å –º–µ—Ç–æ–¥–æ–º dispatch. (–ï—Å–ª–∏ –≤—ã –∑–Ω–∞–∫–æ–º—ã —Å Redux, –≤—ã —É–∂–µ –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.)

–•—É–∫ useReducer –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ useState, –∫–æ–≥–¥–∞ —É –≤–∞—Å —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π, –∏–ª–∏ –∫–æ–≥–¥–∞ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ. useReducer —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç –≥–ª—É–±–æ–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –ø–æ—Å–∫–æ–ª—å–∫—É –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å dispatch –≤–º–µ—Å—Ç–æ –∫–æ–ª–±—ç–∫–æ–≤.

–í–æ—Ç –ø—Ä–∏–º–µ—Ä —Å—á—ë—Ç—á–∏–∫–∞ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ useState, –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–¥—é—Å–µ—Ä–∞:
```jsx harmony
const initialState = {count: 0};

function reducer(state, action) {
  switch (action.type) {
    case 'increment':
      return {count: state.count + 1};
    case 'decrement':
      return {count: state.count - 1};
    default:
      throw new Error();
  }
}

function Counter() {
  const [state, dispatch] = useReducer(reducer, initialState);
  return (
    <>
      Count: {state.count}
      <button onClick={() => dispatch({type: 'decrement'})}>-</button>
      <button onClick={() => dispatch({type: 'increment'})}>+</button>
    </>
  );
}
```	

`–£–∫–∞–∑–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è`
	
–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è useReducer. –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–π –∏–∑ –Ω–∏—Ö –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏. –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± ‚Äî –ø–µ—Ä–µ–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:
```jsx harmony
  const [state, dispatch] = useReducer(
    reducer,
    {count: initialCount}
  );
```	

`–õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è`
–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–µ–Ω–∏–≤–æ. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é init –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç—Ä–µ—Ç—å–µ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞. –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Ä–∞–≤–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –≤—ã–∑–æ–≤–∞ init(initialArg).

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–≤–ª–µ—á—å –ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Ä–µ–¥—é—Å–µ—Ä–∞. –≠—Ç–æ —Ç–∞–∫–∂–µ —É–¥–æ–±–Ω–æ –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–∑–∂–µ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –¥–µ–π—Å—Ç–≤–∏–µ:
```jsx harmony
function init(initialCount) {
  return {count: initialCount};
}

function reducer(state, action) {
  switch (action.type) {
    case 'increment':
      return {count: state.count + 1};
    case 'decrement':
      return {count: state.count - 1};
    case 'reset':
      return init(action.payload);
    default:
      throw new Error();
  }
}

function Counter({initialCount}) {
  const [state, dispatch] = useReducer(reducer, initialCount, init);
  return (
    <>
      Count: {state.count}
      <button
        onClick={() => dispatch({type: 'reset', payload: initialCount})}>
        Reset
      </button>
      <button onClick={() => dispatch({type: 'decrement'})}>-</button>
      <button onClick={() => dispatch({type: 'increment'})}>+</button>
    </>
  );
}
```	

**[‚¨Ü 302](#302)**
	
	
### useCallback <a name="useCallback"></a>	
	
```jsx harmony	
const memoizedCallback = useCallback(
  () => {
    doSomething(a, b);
  },
  [a, b],
);
```	
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–ª–±—ç–∫.

–ü–µ—Ä–µ–¥–∞–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–æ–ª–±—ç–∫ –∏ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –•—É–∫ useCallback –≤–µ—Ä–Ω—ë—Ç –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –∫–æ–ª–±—ç–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ, –µ—Å–ª–∏ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –æ–¥–Ω–æ–π –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –∫–æ–ª–±—ç–∫–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–æ—á–µ—Ä–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —Å—Å—ã–ª–æ–∫ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, shouldComponentUpdate).

useCallback(fn, deps) ‚Äî —ç—Ç–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç useMemo(() => fn, deps).

### –ü—Ä–∏–º–µ—Ä
	
```jsx harmony
import React, {useState, useCallback} from 'react'
import ItemsList from './ItemsList'

function App() {
  const [colored, setColored] = useState(false)
  const [count, setCount] = useState(1)

  const styles = {
    color: colored ? 'darkred' : 'black'
  }

  const generateItemsFromAPI = useCallback((indexNumber) => {
    return new Array(count).fill('').map((_, i) => `–≠–ª–µ–º–µ–Ω—Ç ${i + indexNumber}`)
  }, [count])

  return (
    <>
      <h1 style={styles}>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: {count}</h1>
      <button className={'btn btn-success'} onClick={() => setCount(prev => prev + 1)}>–î–æ–±–∞–≤–∏—Ç—å</button>
      <button className={'btn btn-warning'} onClick={() => setColored(prev => !prev)}>–ò–∑–º–µ–Ω–∏—Ç—å</button>

      <ItemsList getItems={generateItemsFromAPI} />
    </>
  )
}

export default App	
```	
	
	
**[‚¨Ü 302](#302)**
	
	
### useMemo <a name="useMemo"></a>	

```jsx harmony	
const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);
```	
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

–ü–µ—Ä–µ–¥–∞–π—Ç–µ ¬´—Å–æ–∑–¥–∞—é—â—É—é¬ª —Ñ—É–Ω–∫—Ü–∏—é –∏ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. useMemo –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫–æ–π-–ª–∏–±–æ –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–∑–º–µ–Ω–∏–ª–æ—Å—å. –≠—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ.

–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è useMemo, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –ù–µ –¥–µ–ª–∞–π—Ç–µ —Ç–∞–º –Ω–∏—á–µ–≥–æ, —á—Ç–æ –≤—ã –æ–±—ã—á–Ω–æ –Ω–µ –¥–µ–ª–∞–µ—Ç–µ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç useEffect, –∞ –Ω–µ useMemo.

–ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ –Ω–µ –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω, –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤—ã—á–∏—Å–ª—è—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ.

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useMemo –∫–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∞ –Ω–µ –∫–∞–∫ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –≥–∞—Ä–∞–Ω—Ç–∏—é. –í –±—É–¥—É—â–µ–º React –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å ¬´–∑–∞–±—ã—Ç—å¬ª –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω–µ–µ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –∏—Ö –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–∞–º—è—Ç—å –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞. –ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –∫–æ–¥, —á—Ç–æ–±—ã –æ–Ω –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ useMemo, –∞ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.	

### –ü—Ä–∏–º–µ—Ä
	
```jsx harmony
import React, {useState, useMemo, useEffect} from 'react'

function complexCompute(num) {
  console.log('complexCompute')
  let i = 0
  while (i < 1000000000) i++
  return num * 2
}

function App() {
  const [number, setNumber] = useState(42)
  const [colored, setColored] = useState(false)

  const styles = useMemo(() => ({
    color: colored ? 'darkred' : 'black'
  }), [colored])

  const computed = useMemo(() => {
    return complexCompute(number)
  }, [number])

  useEffect(() => {
    console.log('Styles changed')
  }, [styles])

  return (
    <>
      <h1 style={styles}>–í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ: {computed}</h1>
      <button className={'btn btn-success'} onClick={() => setNumber(prev => prev + 1)}>–î–æ–±–∞–≤–∏—Ç—å</button>
      <button className={'btn btn-danger'} onClick={() => setNumber(prev => prev - 1)}>–£–±—Ä–∞—Ç—å</button>
      <button className={'btn btn-warning'} onClick={() => setColored(prev => !prev)}>–ò–∑–º–µ–Ω–∏—Ç—å</button>
    </>
  )
}

export default App	
```		
	
**[‚¨Ü 302](#302)**
	
	
### useRef <a name="useRef"></a>
	
```jsx harmony	
const refContainer = useRef(initialValue);
```	
useRef –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–º–µ–Ω—è–µ–º—ã–π ref-–æ–±—ä–µ–∫—Ç, —Å–≤–æ–π—Å—Ç–≤–æ .current –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º (initialValue). –í–æ–∑–≤—Ä–∞—â—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–û–±—ã—á–Ω—ã–π —Å–ª—É—á–∞–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ‚Äî —ç—Ç–æ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ç–æ–º–∫—É –≤ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–º —Å—Ç–∏–ª–µ:
```jsx harmony
function TextInputWithFocusButton() {
  const inputEl = useRef(null);
  const onButtonClick = () => {
    // `current` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç `input`
    inputEl.current.focus();
  };
  return (
    <>
      <input ref={inputEl} type="text" />
      <button onClick={onButtonClick}>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞</button>
    </>
  );
}
```	
–ü–æ —Å—É—Ç–∏, useRef –ø–æ—Ö–æ–∂ –Ω–∞ ¬´–∫–æ—Ä–æ–±–∫—É¬ª, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏–∑–º–µ–Ω—è–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–≤–æ—ë–º —Å–≤–æ–π—Å—Ç–≤–µ .current.

–í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –∑–Ω–∞–∫–æ–º—ã —Å —Ä–µ—Ñ–∞–º–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–∞–∫ —Å–æ —Å–ø–æ—Å–æ–±–æ–º –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ DOM. –ï—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–¥–∞–¥–∏—Ç–µ React –æ–±—ä–µ–∫—Ç —Ä–µ—Ñ–∞ —Å –ø–æ–º–æ—â—å—é –ø–æ–¥–æ–±–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è <div ref={myRef}/>, React —É—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ .current –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π DOM-—É–∑–µ–ª –ø—Ä–∏ –∫–∞–∂–¥–æ–º –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏.

–ù–æ —Ö—É–∫ useRef() –ø–æ–ª–µ–∑–µ–Ω –Ω–µ —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∞—Ç—Ä–∏–±—É—Ç–∞ —Å —Ä–µ—Ñ–æ–º. –û–Ω —É–¥–æ–±–µ–Ω –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ª—é–±–æ–≥–æ –º—É—Ç–∏—Ä—É–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å —Ç–µ–º, –∫–∞–∫ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ–ª—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –≤ –∫–ª–∞—Å—Å–∞—Ö.

–≠—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Å–∫–æ–ª—å–∫—É useRef() —Å–æ–∑–¥–∞—ë—Ç –æ–±—ã—á–Ω—ã–π JavaScript-–æ–±—ä–µ–∫—Ç. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É useRef() –∏ –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Å–∞–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ {current: ...} ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ —Ö—É–∫ useRef –¥–∞—Å—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç —Å —Ä–µ—Ñ–æ–º –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ.

–ò–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ useRef –Ω–µ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤–∞—Å, –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ. –ú—É—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ .current –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –∫–æ–¥, –∫–æ–≥–¥–∞ React –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç –∏–ª–∏ –æ—Ç—Å–æ–µ–¥–∏–Ω—è–µ—Ç —Ä–µ—Ñ –∫ —É–∑–ª—É DOM, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–ª–±—ç–∫-—Ä–µ—Ñ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ.

	
### –ü—Ä–∏–º–µ—Ä
	
```jsx harmony
import React, {useState, useEffect, useRef} from 'react'

function App() {
  // const [renderCount, setRenderCount] = useState(1)
  const [value, setValue] = useState('initial')
  const renderCount = useRef(1)
  const inputRef = useRef(null)
  const prevValue = useRef('')

  useEffect(() => {
    renderCount.current++
  })

  useEffect(() => {
    prevValue.current = value
  }, [value])

  const focus = () => inputRef.current.focus()

  return (
    <div>
      <h1>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–Ω–¥–µ—Ä–æ–≤: {renderCount.current}</h1>
      <h2>–ü—Ä–æ—à–ª–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: {prevValue.current}</h2>
      <input ref={inputRef} type="text" onChange={e => setValue(e.target.value)} value={value} />
      <button className="btn btn-success" onClick={focus}>–§–æ–∫—É—Å</button>
    </div>
  )
}

export default App	
```	
	
	
**[‚¨Ü 302](#302)**
	

### useImperativeHandle <a name="useImperativeHandle"></a>
	
```jsx harmony	
useImperativeHandle(ref, createHandle, [deps])
```	
useImperativeHandle –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ ref. –ö–∞–∫ –≤—Å–µ–≥–¥–∞, –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Å–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ —Å—Å—ã–ª–∫–∏. useImperativeHandle –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å forwardRef:
```jsx harmony
function FancyInput(props, ref) {
  const inputRef = useRef();
  useImperativeHandle(ref, () => ({
    focus: () => {
      inputRef.current.focus();
    }
  }));
  return <input ref={inputRef} ... />;
}
FancyInput = forwardRef(FancyInput);
```	
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç <FancyInput ref={inputRef} />, —Å–º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å inputRef.current.focus().

**[‚¨Ü 302](#302)**
	
	
### useLayoutEffect <a name="useLayoutEffect"></a>
	
–°–∏–≥–Ω–∞—Ç—É—Ä–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ useEffect, –Ω–æ —ç—Ç–æ—Ç —Ö—É–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π DOM. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –º–∞–∫–µ—Ç–∞ –∏–∑ DOM –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è, –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ useLayoutEffect, –±—É–¥—É—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –±—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∏—Ç —à–∞–Ω—Å –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫—É.

–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π useEffect, –∫–æ–≥–¥–∞ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.	

**[‚¨Ü 302](#302)**
	

### useDebugValue <a name="useDebugValue"></a>	
```jsx harmony	
useDebugValue(value)
```	
useDebugValue –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ—Ç–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ö—É–∫–æ–≤ –≤ React DevTools.

–ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ö—É–∫ useFriendStatus, –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤¬ª:
```jsx harmony
function useFriendStatus(friendID) {
  const [isOnline, setIsOnline] = useState(null);

  // ...

  // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —è—Ä–ª—ã–∫ –≤ DevTools —Ä—è–¥–æ–º —Å —ç—Ç–∏–º —Ö—É–∫–æ–º
  // –Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–°—Ç–∞—Ç—É—Å –¥—Ä—É–≥–∞: –í —Å–µ—Ç–∏¬ª
  useDebugValue(isOnline ? '–í —Å–µ—Ç–∏' : '–ù–µ –≤ —Å–µ—Ç–∏');

  return isOnline;
}	
```
**[‚¨Ü 302](#302)**
	
	
### useDeferredValue <a name="useDeferredValue"></a>
	
```jsx harmony	
const deferredValue = useDeferredValue(value);
```	
useDeferredValue accepts a value and returns a new copy of the value that will defer to more urgent updates. If the current render is the result of an urgent update, like user input, React will return the previous value and then render the new value after the urgent render has completed.

This hook is similar to user-space hooks which use debouncing or throttling to defer updates. The benefits to using useDeferredValue is that React will work on the update as soon as other work finishes (instead of waiting for an arbitrary amount of time), and like startTransition, deferred values can suspend without triggering an unexpected fallback for existing content.

Memoizing deferred children
useDeferredValue only defers the value that you pass to it. If you want to prevent a child component from re-rendering during an urgent update, you must also memoize that component with React.memo or React.useMemo:

```jsx harmony	
function Typeahead() {
  const query = useSearchQuery('');
  const deferredQuery = useDeferredValue(query);

  // Memoizing tells React to only re-render when deferredQuery changes,
  // not when query changes.
  const suggestions = useMemo(() =>
    <SearchSuggestions query={deferredQuery} />,
    [deferredQuery]
  );

  return (
    <>
      <SearchInput query={query} />
      <Suspense fallback="Loading results...">
        {suggestions}
      </Suspense>
    </>
  );
}
```	
**[‚¨Ü 302](#302)**
	
	
### useTransition <a name="useTransition"></a>
	
```jsx harmony	
const [isPending, startTransition] = useTransition();
```	
Returns a stateful value for the pending state of the transition, and a function to start it.

startTransition lets you mark updates in the provided callback as transitions:

```jsx harmony	
startTransition(() => {
  setCount(count + 1);
})
```
	
isPending indicates when a transition is active to show a pending state:
```jsx harmony	
function App() {
  const [isPending, startTransition] = useTransition();
  const [count, setCount] = useState(0);
  
  function handleClick() {
    startTransition(() => {
      setCount(c => c + 1);
    })
  }

  return (
    <div>
      {isPending && <Spinner />}
      <button onClick={handleClick}>{count}</button>
    </div>
  );
}
```	
**[‚¨Ü 302](#302)**
	
	
### useId
	
```jsx harmony	
const id = useId();
```	
useId is a hook for generating unique IDs that are stable across the server and client, while avoiding hydration mismatches.

useId is not for generating keys in a list. Keys should be generated from your data.

For a basic example, pass the id directly to the elements that need it:
```jsx harmony
function Checkbox() {
  const id = useId();
  return (
    <>
      <label htmlFor={id}>Do you like React?</label>
      <input id={id} type="checkbox" name="react"/>
    </>
  );
};
```	
	
For multiple IDs in the same component, append a suffix using the same id:
```jsx harmony
function NameFields() {
  const id = useId();
  return (
    <div>
      <label htmlFor={id + '-firstName'}>First Name</label>
      <div>
        <input id={id + '-firstName'} type="text" />
      </div>
      <label htmlFor={id + '-lastName'}>Last Name</label>
      <div>
        <input id={id + '-lastName'} type="text" />
      </div>
    </div>
  );
}
```	
	
**[‚¨Ü 302](#302)**
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**

	
	
303. ### <a name="303"></a> –•—É–∫–∏ –ø—Ä–∏–º–µ—Ä

### useState	
```jsx harmony
import { useState } from 'react';
import {Container} from 'react-bootstrap';
import './App.css';

const Slider = (props) => {

	const [slide, setSlide] = useState(0);
	const [autoplay, setAutoplay] = useState(false);

	function changeSlide(i) {
		setSlide(slide => slide + i)
	}

	const toggleAutoplay = () => {
		setAutoplay(autoplay => !autoplay)
	}

	return (
		<Container>
			<div className="slider w-50 m-auto">
				<div className="text-center mt-5">Active slide {slide}
					<br/>{autoplay ? 'auto' : null}
				</div>
				<div className="buttons mt-3">
					<button
						className="btn btn-primary me-2"
						onClick={() => changeSlide(-1)}>-1
					</button>
					<button
						className="btn btn-primary me-2"
						onClick={() => changeSlide(1)}>+1
					</button>
					<button
						className="btn btn-primary me-2"
						onClick={toggleAutoplay}>toggle autoplay
					</button>
				</div>
			</div>
		</Container>
	)
}

function App() {
	const [slider, setSlider] = useState(true);

	return (
		<>
			<button onClick={() => setSlider(false)}>Click</button>
			{slider ? <Slider/> : null}
		</>
	);
}

export default App;	
```	
	
	
### useEffect	
```jsx harmony
import { useState, useEffect } from 'react';
import {Container} from 'react-bootstrap';
import './App.css';

const Slider = (props) => {

	const [slide, setSlide] = useState(0);
	const [autoplay, setAutoplay] = useState(false);

	function logging() {
		console.log('log!')
	}

	useEffect(() => {
		console.log('effect')
		document.title = `Slide: ${slide}`;

		window.addEventListener('click', logging);
		
		return () => {
			window.removeEventListener('click', logging);
		}

	}, [slide]);

	useEffect(() => {
		console.log('autoplay');
	}, [autoplay])

	function changeSlide(i) {
		setSlide(slide => slide + i)
	}

	const toggleAutoplay = () => {
		setAutoplay(autoplay => !autoplay)
	}

	return (
		<Container>
			<div className="slider w-50 m-auto">

				<Slide getSomeImages={getSomeImages} />

				<div className="text-center mt-5">Active slide {slide}
					<br/>{autoplay ? 'auto' : null}
				</div>
				<div className="buttons mt-3">
					<button
						className="btn btn-primary me-2"
						onClick={() => changeSlide(-1)}>-1
					</button>
					<button
						className="btn btn-primary me-2"
						onClick={() => changeSlide(1)}>+1
					</button>
					<button
						className="btn btn-primary me-2"
						onClick={toggleAutoplay}>toggle autoplay
					</button>
				</div>
			</div>
		</Container>
	)
}

function App() {
	const [slider, setSlider] = useState(true);

	return (
		<>
			<button onClick={() => setSlider(false)}>Click</button>
			{slider ? <Slider/> : null}
		</>
	);
}

export default App;	
```	
 
### useCallback	
```jsx harmony
import { useState, useEffect, useCallback } from 'react';
import {Container} from 'react-bootstrap';
import './App.css';

const Slider = (props) => {

	const [slide, setSlide] = useState(0);
	const [autoplay, setAutoplay] = useState(false);

	const getSomeImages = useCallback(() => {
		console.log('fetching');
		return [
			'https://data.pixiz.com/output/user/frame/preview/400x400/0/8/1/5/3445180_4e787.jpg',
			'http://anekdotov.net/pic/photo/0221155646p.jpg'
		]
	}, [slide]);


	function logging() {
		console.log('log!')
	}

	useEffect(() => {
		console.log('effect')
		document.title = `Slide: ${slide}`;

		window.addEventListener('click', logging);
		
		return () => {
			window.removeEventListener('click', logging);
		}

	}, [slide]);

	useEffect(() => {
		console.log('autoplay');
	}, [autoplay])

	function changeSlide(i) {
		setSlide(slide => slide + i)
	}

	const toggleAutoplay = () => {
		setAutoplay(autoplay => !autoplay)
	}

	return (
		<Container>
			<div className="slider w-50 m-auto">
				
				<Slide getSomeImages={getSomeImages} />
				
				<div className="text-center mt-5">Active slide {slide}
					<br/>{autoplay ? 'auto' : null}
				</div>
				<div className="buttons mt-3">
					<button
						className="btn btn-primary me-2"
						onClick={() => changeSlide(-1)}>-1
					</button>
					<button
						className="btn btn-primary me-2"
						onClick={() => changeSlide(1)}>+1
					</button>
					<button
						className="btn btn-primary me-2"
						onClick={toggleAutoplay}>toggle autoplay
					</button>
				</div>
			</div>
		</Container>
	)
}

const Slide = ({getSomeImages}) => {
	const [images, setImages] = useState([]);

	useEffect(() => {
		setImages(getSomeImages())
	}, [getSomeImages])

	return (
		<>
			{images.map((url, i) => <img key={i} className="d-block w-100"
																	 src={url}
																	 alt="slide"/>)}
		</>
	)
}

function App() {
	const [slider, setSlider] = useState(true);
	
	return (
		<>
			<button onClick={() => setSlider(false)}>Click</button>
			{slider ? <Slider/> : null}
		</>
	);
}

export default App;	
```	

### useMemo	
```jsx harmony
import { useState, useEffect, useCallback, useMemo} from 'react';
import {Container} from 'react-bootstrap';
import './App.css';

const countTotal = (num) => {
	console.log('counting...')
	return num + 10
}

const Slider = (props) => {

	const [slide, setSlide] = useState(0);
	const [autoplay, setAutoplay] = useState(false);

	const getSomeImages = useCallback(() => {
		console.log('fetching');
		return [
			'https://data.pixiz.com/output/user/frame/preview/400x400/0/8/1/5/3445180_4e787.jpg',
			'http://anekdotov.net/pic/photo/0221155646p.jpg'
		]
	}, [slide]);

	
	function logging() {
		console.log('log!')
	}

	useEffect(() => {
		console.log('effect')
		document.title = `Slide: ${slide}`;

		window.addEventListener('click', logging);
		
		return () => {
		 	window.removeEventListener('click', logging);
		}

	}, [slide]);

	useEffect(() => {
		console.log('autoplay');
	}, [autoplay])

	function changeSlide(i) {
		setSlide(slide => slide + i)
	}

	const toggleAutoplay = () => {
		setAutoplay(autoplay => !autoplay)
	}

	const total = useMemo(() => {
		return countTotal(slide)
	}, [slide]);

	const style = useMemo(() => ({
		color: slide > 4 ? 'red' : 'black'
	}), [slide])

	useEffect(() => {
		console.log('styles!')
	}, [style]);

	return (
		<Container>
			<div className="slider w-50 m-auto">

				<Slide getSomeImages={getSomeImages} />

				<div className="text-center mt-5">Active slide {slide}
					<br/>{autoplay ? 'auto' : null}
				</div>
				<div style={style} className="text-center mt-5">Total slides: {total}</div>
				<div className="buttons mt-3">
					<button
						className="btn btn-primary me-2"
						onClick={() => changeSlide(-1)}>-1
					</button>
					<button
						className="btn btn-primary me-2"
						onClick={() => changeSlide(1)}>+1
					</button>
					<button
						className="btn btn-primary me-2"
						onClick={toggleAutoplay}>toggle autoplay
					</button>
				</div>
			</div>
		</Container>
	)
}

const Slide = ({getSomeImages}) => {
	const [images, setImages] = useState([]);

	useEffect(() => {
		setImages(getSomeImages())
	}, [getSomeImages])

	return (
		<>
			{images.map((url, i) => <img key={i} className="d-block w-100"
																	 src={url}
																	 alt="slide"/>)}
		</>
	)
}

function App() {
	const [slider, setSlider] = useState(true);


	return (
		<>
			<button onClick={() => setSlider(false)}>Click</button>
			{slider ? <Slider/> : null}
		</>
	);
}

export default App;	
```
	
### useRef	
```jsx harmony
import {useRef, useState} from 'react';
import {Container} from 'react-bootstrap';
import './App.css';

const Form = () => {
    const [text, setTetx] = useState('');

    const myRef = useRef(1);

    return (
        <Container>
            <form className="w-50 border mt-5 p-3 m-auto">
                <div className="mb-3">
                    <label htmlFor="exampleFormControlInput1" className="form-label">Email address</label>
                    <input onChange={(e) => setTetx(e.target.value)} type="email" className="form-control" id="exampleFormControlInput1" placeholder="name@example.com"/>
                    </div>
                    <div className="mb-3">
                    <label htmlFor="exampleFormControlTextarea1" className="form-label">Example textarea</label>
                    <textarea onClick={() => myRef.current++} className="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
                </div>
            </form>
        </Container>
    )
}

function App() {
    return (
        <Form/>
    );
}

export default App;	
```		

### useContextt

Content	
```jsx harmony
import {createContext} from 'react';

const dataContext = createContext({
	mail: "name@example.com",
	text: 'some text',
	forceChangeMail: () => {}
});

export default dataContext;	
```	

Input	
```jsx harmony
import {useContext} from 'react';
import dataContext from './ConContext';

const InputComponent = () => {

	const context = useContext(dataContext);

	return (
		<input
			value={context.mail}
			type="email"
			className='form-control'
			placeholder='name@example.com'
			onFocus={context.forceChangeMail}
		/>
	)
}

export default InputComponent;	
```
	
Form
```jsx harmony
import {Container} from 'react-bootstrap';
import InputComponent from './ConInput';

const Form = (props) => {

	console.log('update')

	return (
		<Container>
			<form className="w-50 border mt-5 p-3 m-auto">
				<div className="mb-3">
					<label htmlFor="exampleFormControlInput1" className="form-label mt-3">Email address</label>
					<InputComponent />
				</div>
				<div className="mb-3">
					<label htmlFor="exampleFormControlTextarea1" className="form-label">Example textarea</label>
					<textarea value={props.text} className="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
				</div>
			</form>
		</Container>
	)
}

export default Form;	
```	

App	
```jsx harmony
import { useState } from 'react';
import './App.css';
import Form from './ConForm';
import dataContext from './ConContext';

const {Provider} = dataContext;


function App() {
    const [data, setData] = useState({
        mail: "name@example.com",
        text: 'some text',
        forceChangeMail: forceChangeMail
    });

    function forceChangeMail() {
      setData({...data, mail: 'test@gmail.com'})
    }

    return (
        <Provider value={data}>
            <Form text={data.text}/>
            <button 
                onClick={() => setData({
                    mail: "second@example.com",
                    text: 'another text',
                    forceChangeMail: forceChangeMail
                })}>
                Click me
            </button>
        </Provider>
    );
}

export default App;	
```
	
### useReducer
```jsx harmony
import {useState, useReducer} from 'react';
import {Container} from 'react-bootstrap';
import './App.css';

function reducer (state, action) {
    switch (action.type) {
        case 'toggle':
          return {autoplay: !state.autoplay}
        case 'slow':
            return {autoplay: 300}
        case 'fast':
            return {autoplay: 700}
        case 'custom':
            return {autoplay: action.payload}
        default:
            throw new Error();
    }
}

function init(initial) {
    return {autoplay: initial}
}

const Slider = ({initial}) => {
    const [slide, setSlide] = useState(0);
    const [autoplay, dispatch] = useReducer(reducer, initial, init);
    // const [autoplay, dispatch] = useReducer(reducer, {autoplay: false});

    function changeSlide(i) {
        setSlide(slide => slide + i);
    }

    return (
        <Container>
            <div className="slider w-50 m-auto">
                <img className="d-block w-100" src="https://www.planetware.com/wpimages/2020/02/france-in-pictures-beautiful-places-to-photograph-eiffel-tower.jpg" alt="slide" />
                <div className="text-center mt-5">Active slide {slide} <br/>{autoplay.autoplay ? 'auto' : null} </div>
                <div className="buttons mt-3">
                    <button 
                        className="btn btn-primary me-2"
                        onClick={() => changeSlide(-1)}>-1</button>
                    <button 
                        className="btn btn-primary me-2"
                        onClick={() => changeSlide(1)}>+1</button>
                    <button 
                        className="btn btn-primary me-2"
                        onClick={() => dispatch({type: 'toggle'})}>toggle autoplay</button>
                    <button
                      className="btn btn-primary me-2"
                      onClick={() => dispatch({type: 'slow'})}>slow autoplay</button>
                    <button
                      className="btn btn-primary me-2"
                      onClick={() => dispatch({type: 'fast'})}>fast autoplay</button>
                    <button
                      className="btn btn-primary me-2"
                      onClick={(e) => dispatch({type: 'custom', payload: +e.target.textContent})}>1000</button>
                </div>
            </div>
        </Container>
    )
}

function App() {
    return (
        <Slider initial={false}/>
    );
}

export default App;	
```	

### useDeferredValue

useDeferredValue –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ —É –≤–∞—Å –±–æ–ª—å—à–æ–π —Å–ø–∏—Å–æ–∫ –∏–ª–∏ —Å–ª–æ–∂–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ –∏–ª–∏ –∫–æ–≥–¥–∞ –µ—Å—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–∫–æ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥—Å–∫–∞–∑–æ–∫, —Ç–∞–±–æ–≤. –°—Ç–æ–∏—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–∞–º –≥–¥–µ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ.	
	
```jsx harmony
import data from './data';
import { useState, useMemo, useDeferredValue } from 'react';

function App() {
  const [text, setText] = useState('');
  const [posts, setPosts] = useState(data);
  const deferedValue = useDeferredValue(text);

  const filteredPosts = useMemo(() => {
    return posts.filter((item) =>
      item.name.toLowerCase().includes(deferedValue)
    );
  }, [deferedValue]);

  const onValueChange = (e) => {
    setText(e.target.value);
  };

  return (
    <>
      <input value={text} type='text' onChange={onValueChange} />

      <hr />

      <div>
        {filteredPosts.map((post) => (
          <div key={post._id}>
            <h4>{post.name}</h4>
          </div>
        ))}
      </div>
    </>
  );
}

export default App;	
```
	
### useTransition
	
useTransition –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ —É –≤–∞—Å –±–æ–ª—å—à–æ–π —Å–ø–∏—Å–æ–∫ –∏–ª–∏ —Å–ª–æ–∂–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ –∏–ª–∏ –∫–æ–≥–¥–∞ –µ—Å—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–∫–æ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥—Å–∫–∞–∑–æ–∫, —Ç–∞–±–æ–≤. –°—Ç–æ–∏—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–∞–º –≥–¥–µ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ.	
	
```jsx harmony
import data from './data';
import { useState, useMemo, useTransition } from 'react';

function App() {
  const [text, setText] = useState('');
  const [posts, setPosts] = useState(data);
  const [isPending, startTransition] = useTransition();

  const filteredPosts = useMemo(() => {
    return posts.filter((item) =>
      item.name.toLowerCase().includes(text)
    );
  }, [text]);

  const onValueChange = (e) => {
    startTransition(() => {
      setText(e.target.value);
    });
  };

  return (
    <>
      <input value={text} type='text' onChange={onValueChange} />

      <hr />

      <div>
        {isPending ? (
          <h3>Loading</h3>
        ) : (
          filteredPosts.map((post) => (
            <div key={post._id}>
              <h4>{post.name}</h4>
            </div>
          ))
        )}
      </div>
    </>
  );
}

export default App;	
```	

### useId
	  
```jsx harmony	  
const id = useId();
```	  
useId is a hook for generating unique IDs that are stable across the server and client, while avoiding hydration mismatches.

useId is not for generating keys in a list. Keys should be generated from your data.

For a basic example, pass the id directly to the elements that need it:
```jsx harmony
function Checkbox() {
  const id = useId();
  return (
    <>
      <label htmlFor={id}>Do you like React?</label>
      <input id={id} type="checkbox" name="react"/>
    </>
  );
};
```	  
	  
For multiple IDs in the same component, append a suffix using the same id:
```jsx harmony
function NameFields() {
  const id = useId();
  return (
    <div>
      <label htmlFor={id + '-firstName'}>First Name</label>
      <div>
        <input id={id + '-firstName'} type="text" />
      </div>
      <label htmlFor={id + '-lastName'}>Last Name</label>
      <div>
        <input id={id + '-lastName'} type="text" />
      </div>
    </div>
  );
}
```	
	  
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
304. ### <a name="304"></a> –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤

–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ö—É–∫–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.		
	
```jsx harmony
 function useCounter(initial) {
    const [counter, setCounter] = React.useState(initial);
  
    // –≠—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç —Å –∑–∞–ø—Ä–æ—Å–æ–º, —á—Ç–æ–±—ã –æ–Ω –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–ª –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ - —É–±–µ—Ä–∏—Ç–µ –≤—Å–µ props,
    // –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç + –∞—Ä–≥—É–º–µ–Ω—Ç initial –ø–æ–º–µ–Ω—è–π—Ç–µ –Ω–∞ 0 –∏–ª–∏ null
  
    // React.useEffect(() => {
    //     fetch('https://www.random.org/integers/?num=1&min=-50&max=50&col=1&base=10&format=plain&rnd=new')
    //         .then(res => res.text())
    //         .then(res => setCounter(res))
    //         .catch(err => console.log(err))
    // }, [])
  
    const incCounter = () => {
      if (counter < 50) {
        setCounter(counter => counter + 1)
      }
    } 

    const decCounter = () => {
      if (counter > -50) {
        setCounter(counter => counter - 1)
      }
    }

    const rndCounter = () => {
      setCounter(+(Math.random() * (50 - -50) + -50).toFixed(0))
    }

    const resetCounter = () => {
      setCounter(initial)
    }
    
    return {
      counter,
      incCounter,
      decCounter,
      rndCounter,
      resetCounter
    }
}

const Counter = (props) => {
    const {counter, incCounter, decCounter, rndCounter, resetCounter} = useCounter(props.counter);

    return (
      <div className="component">
        <div className="counter">{counter}</div>
        <div className="controls">
          <button onClick={incCounter}>INC</button>
          <button onClick={decCounter}>DEC</button>
          <button onClick={rndCounter}>RND</button>
          <button onClick={resetCounter}>RESET</button>
        </div>
      </div>
    )
}

const RndCounter = (props) => {
    const {counter, rndCounter, resetCounter} = useCounter(props.counter);

    return (
      <div className="component">
        <div className="counter">{counter}</div>
        <div className="controls">
          <button onClick={rndCounter}>RND</button>
          <button onClick={resetCounter}>RESET</button>
        </div>
      </div>
    )
}

const App = () => {
    return (
        <>
            <Counter counter={0}/>
            <RndCounter counter={5}/>
        </>
    )
}

ReactDOM.render(<App />, document.getElementById('app')); 
``` 
 
```jsx harmony
import {useState, useEffect} from 'react';
import {Container} from 'react-bootstrap';
import './App.css';

function useInputWithValidate(initialValue) {
	const [value, setValue] = useState(initialValue);

	const onChange = event => {
		setValue(event.target.value);
	}

	const validateInput = () => {
		return value.search(/\d/) >= 0
	}

	return {value, onChange, validateInput}
}

const Form = () => {

	const input = useInputWithValidate('');
	const textArea = useInputWithValidate('');

	const color = input.validateInput() ? 'text-danger' : null;

	return (
		<Container>
			<form className="w-50 border mt-5 p-3 m-auto">
				<div className="mb-3">
					<input value={`${input.value} / ${textArea.value}`} type="text" className="form-control" readOnly/>
					<label htmlFor="exampleFormControlInput1" className="form-label mt-3">Email address</label>
					<input onChange={input.onChange} type="email" value={input.value} className={`form-control ${color}`}
								 id="exampleFormControlInput1" placeholder="name@example.com"/>
				</div>
				<div className="mb-3">
					<label htmlFor="exampleFormControlTextarea1" className="form-label">Example textarea</label>
					<textarea onChange={textArea.onChange} value={textArea.value} className="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
				</div>
			</form>
		</Container>
	)
}

function App() {
	return (
		<Form/>
	);
}

export default App;	
```	
	
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
305. ### <a name="305"></a> –ü—Ä–∞–∫—Ç–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤

### http.hook.js	  
```jsx harmony
import { useState, useCallback } from "react";

export const useHttp = () => {
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);

    const request = useCallback(async (url, method = 'GET', body = null, headers = {'Content-Type': 'application/json'}) => {

        setLoading(true);

        try {
            const response = await fetch(url, {method, body, headers});

            if (!response.ok) {
                throw new Error(`Could not fetch ${url}, status: ${response.status}`);
            }

            const data = await response.json();

            setLoading(false);
            return data;
        } catch(e) {
            setLoading(false);
            setError(e.message);
            throw e;
        }
    }, []);

    const clearError = useCallback(() => setError(null), []);

    return {loading, request, error, clearError}
}	  
```
	  
### MarvelService.js 
```jsx harmony
import {useHttp} from '../hooks/http.hook';

const useMarvelService = () => {
    const {loading, request, error, clearError} = useHttp();

    const _apiBase = 'https://gateway.marvel.com:443/v1/public/';
    // –ó–î–ï–°–¨ –ë–£–î–ï–¢ –í–ê–® –ö–õ–Æ–ß, –≠–¢–û–¢ –ö–õ–Æ–ß –ú–û–ñ–ï–¢ –ù–ï –†–ê–ë–û–¢–ê–¢–¨
    const _apiKey = 'apikey=c5d6fc8b83116d92ed468ce36bac6c62';
    const _baseOffset = 210;

    const getAllCharacters = async (offset = _baseOffset) => {
        const res = await request(`${_apiBase}characters?limit=9&offset=${offset}&${_apiKey}`);
        return res.data.results.map(_transformCharacter);
    }

    const getCharacter = async (id) => {
        const res = await request(`${_apiBase}characters/${id}?${_apiKey}`);
        return _transformCharacter(res.data.results[0]);
    }

    const getAllComics = async (offset = 0) => {
        const res = await request(`${_apiBase}comics?orderBy=issueNumber&limit=8&offset=${offset}&${_apiKey}`);
        return res.data.results.map(_transformComics);
    }

    const getComics = async (id) => {
        const res = await request(`${_apiBase}comics/${id}?${_apiKey}`);
        return _transformComics(res.data.results[0]);
    }

    const _transformCharacter = (char) => {
        return {
            id: char.id,
            name: char.name,
            description: char.description ? `${char.description.slice(0, 210)}...` : 'There is no description for this character',
            thumbnail: char.thumbnail.path + '.' + char.thumbnail.extension,
            homepage: char.urls[0].url,
            wiki: char.urls[1].url,
            comics: char.comics.items
        }
    }

    const _transformComics = (comics) => {
        return {
            id: comics.id,
            title: comics.title,
            description: comics.description || 'There is no description',
            pageCount: comics.pageCount ? `${comics.pageCount} p.` : 'No information about the number of pages',
            thumbnail: comics.thumbnail.path + '.' + comics.thumbnail.extension,
            language: comics.textObjects.language || 'en-us',
            price: comics.prices.price ? `${comics.prices.price}$` : 'not available'
        }
    }

    return {loading, error, clearError, getAllCharacters, getCharacter, getAllComics, getComics}
}

export default useMarvelService;	  
```
	  
### RandomChar.js
```jsx harmony
import {useState, useEffect} from 'react';
import Spinner from '../spinner/Spinner';
import ErrorMessage from '../errorMessage/ErrorMessage';
import useMarvelService from '../../services/MarvelService';

import './randomChar.scss';
import mjolnir from '../../resources/img/mjolnir.png';

const RandomChar = () => {

    const [char, setChar] = useState(null);
    const {loading, error, getCharacter, clearError} = useMarvelService();

    useEffect(() => {
        updateChar();
        const timerId = setInterval(updateChar, 60000);

        return () => {
            clearInterval(timerId)
        }
    }, [])

    const onCharLoaded = (char) => {
        setChar(char);
    }

    const updateChar = () => {
        clearError();
        const id = Math.floor(Math.random() * (1011400 - 1011000)) + 1011000;
        getCharacter(id)
            .then(onCharLoaded);
    }

    const errorMessage = error ? <ErrorMessage/> : null;
    const spinner = loading ? <Spinner/> : null;
    const content = !(loading || error || !char) ? <View char={char} /> : null;

    return (
        <div className="randomchar">
            {errorMessage}
            {spinner}
            {content}
            <div className="randomchar__static">
                <p className="randomchar__title">
                    Random character for today!<br/>
                    Do you want to get to know him better?
                </p>
                <p className="randomchar__title">
                    Or choose another one
                </p>
                <button onClick={updateChar} className="button button__main">
                    <div className="inner">try it</div>
                </button>
                <img src={mjolnir} alt="mjolnir" className="randomchar__decoration"/>
            </div>
        </div>
    )
}

const View = ({char}) => {
    const {name, description, thumbnail, homepage, wiki} = char;
    let imgStyle = {'objectFit' : 'cover'};
    if (thumbnail === 'http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg') {
        imgStyle = {'objectFit' : 'contain'};
    }

    return (
        <div className="randomchar__block">
            <img src={thumbnail} alt="Random character" className="randomchar__img" style={imgStyle}/>
            <div className="randomchar__info">
                <p className="randomchar__name">{name}</p>
                <p className="randomchar__descr">
                    {description}
                </p>
                <div className="randomchar__btns">
                    <a href={homepage} className="button button__main">
                        <div className="inner">homepage</div>
                    </a>
                    <a href={wiki} className="button button__secondary">
                        <div className="inner">Wiki</div>
                    </a>
                </div>
            </div>
        </div>
    )
}

export default RandomChar;	  
```
	  
### CharList.js
```jsx harmony
import {useState, useEffect, useRef} from 'react';
import PropTypes from 'prop-types';

import Spinner from '../spinner/Spinner';
import ErrorMessage from '../errorMessage/ErrorMessage';
import useMarvelService from '../../services/MarvelService';
import './charList.scss';

const CharList = (props) => {

    const [charList, setCharList] = useState([]);
    const [newItemLoading, setNewItemLoading] = useState(false);
    const [offset, setOffset] = useState(210);
    const [charEnded, setCharEnded] = useState(false);

    const {loading, error, getAllCharacters} = useMarvelService();

    useEffect(() => {
        onRequest(offset, true);
    }, [])

    const onRequest = (offset, initial) => {
        initial ? setNewItemLoading(false) : setNewItemLoading(true);
        getAllCharacters(offset)
            .then(onCharListLoaded)
    }

    const onCharListLoaded = (newCharList) => {
        let ended = false;
        if (newCharList.length < 9) {
            ended = true;
        }

        setCharList(charList => [...charList, ...newCharList]);
        setNewItemLoading(newItemLoading => false);
        setOffset(offset => offset + 9);
        setCharEnded(charEnded => ended);
    }

    const itemRefs = useRef([]);

    const focusOnItem = (id) => {
        // –Ø —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –≤–∞—Ä–∏–∞–Ω—Ç —á—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ, –∏ —Å –∫–ª–∞—Å—Å–æ–º –∏ —Å —Ñ–æ–∫—É—Å–æ–º
        // –ù–æ –≤ —Ç–µ–æ—Ä–∏–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–æ–∫—É—Å, –∏ –µ–≥–æ –≤ —Å—Ç–∏–ª—è—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–∞
        // –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —Ä–µ—à–µ–Ω–∏–µ —Å css-–∫–ª–∞—Å—Å–æ–º –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, –≤—ã–Ω–µ—Å—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
        // –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –ù–æ –∫–æ–¥–∞ –±—É–¥–µ—Ç –±–æ–ª—å—à–µ, –ø–æ—è–≤–∏—Ç—Å—è –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        // –∏ –Ω–µ —Ñ–∞–∫—Ç, —á—Ç–æ –º—ã –≤—ã–∏–≥—Ä–∞–µ–º –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞ —Å—á–µ—Ç –±–û–ª—å—à–µ–≥–æ –∫–æ–ª-–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

        // –ü–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –Ω–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–π—Ç–µ —Ä–µ—Ñ–∞–º–∏, —Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö
        itemRefs.current.forEach(item => item.classList.remove('char__item_selected'));
        itemRefs.current[id].classList.add('char__item_selected');
        itemRefs.current[id].focus();
    }

    // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, 
    // —á—Ç–æ–±—ã –Ω–µ –ø–æ–º–µ—â–∞—Ç—å —Ç–∞–∫—É—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ –º–µ—Ç–æ–¥ render
    function renderItems(arr) {
        const items =  arr.map((item, i) => {
            let imgStyle = {'objectFit' : 'cover'};
            if (item.thumbnail === 'http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg') {
                imgStyle = {'objectFit' : 'unset'};
            }
            
            return (
                <li 
                    className="char__item"
                    tabIndex={0}
                    ref={el => itemRefs.current[i] = el}
                    key={item.id}
                    onClick={() => {
                        props.onCharSelected(item.id);
                        focusOnItem(i);
                    }}
                    onKeyPress={(e) => {
                        if (e.key === ' ' || e.key === "Enter") {
                            props.onCharSelected(item.id);
                            focusOnItem(i);
                        }
                    }}>
                        <img src={item.thumbnail} alt={item.name} style={imgStyle}/>
                        <div className="char__name">{item.name}</div>
                </li>
            )
        });
        // –ê —ç—Ç–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—ã–Ω–µ—Å–µ–Ω–∞ –¥–ª—è —Ü–µ–Ω—Ç—Ä–æ–≤–∫–∏ —Å–ø–∏–Ω–Ω–µ—Ä–∞/–æ—à–∏–±–∫–∏
        return (
            <ul className="char__grid">
                {items}
            </ul>
        )
    }
    
    const items = renderItems(charList);

    const errorMessage = error ? <ErrorMessage/> : null;
    const spinner = loading && !newItemLoading ? <Spinner/> : null;

    return (
        <div className="char__list">
            {errorMessage}
            {spinner}
            {items}
            <button 
                className="button button__main button__long"
                disabled={newItemLoading}
                style={{'display': charEnded ? 'none' : 'block'}}
                onClick={() => onRequest(offset)}>
                <div className="inner">load more</div>
            </button>
        </div>
    )
}

CharList.propTypes = {
    onCharSelected: PropTypes.func.isRequired
}

export default CharList;	  
```
	  
### CharInfo.js
```jsx harmony
import { useState, useEffect } from 'react';
import PropTypes from 'prop-types';

import useMarvelService from '../../services/MarvelService';
import Spinner from '../spinner/Spinner';
import ErrorMessage from '../errorMessage/ErrorMessage';
import Skeleton from '../skeleton/Skeleton';

import './charInfo.scss';

const CharInfo = (props) => {

    const [char, setChar] = useState(null);

    const {loading, error, getCharacter, clearError} = useMarvelService();

    useEffect(() => {
        updateChar()
    }, [props.charId])

    const updateChar = () => {
        const {charId} = props;
        if (!charId) {
            return;
        }

        clearError();
        getCharacter(charId)
            .then(onCharLoaded)
    }

    const onCharLoaded = (char) => {
        setChar(char);
    }

    const skeleton = char || loading || error ? null : <Skeleton/>;
    const errorMessage = error ? <ErrorMessage/> : null;
    const spinner = loading ? <Spinner/> : null;
    const content = !(loading || error || !char) ? <View char={char}/> : null;

    return (
        <div className="char__info">
            {skeleton}
            {errorMessage}
            {spinner}
            {content}
        </div>
    )
}

const View = ({char}) => {
    const {name, description, thumbnail, homepage, wiki, comics} = char;

    let imgStyle = {'objectFit' : 'cover'};
    if (thumbnail === 'http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg') {
        imgStyle = {'objectFit' : 'contain'};
    }

    return (
        <>
            <div className="char__basics">
                <img src={thumbnail} alt={name} style={imgStyle}/>
                <div>
                    <div className="char__info-name">{name}</div>
                    <div className="char__btns">
                        <a href={homepage} className="button button__main">
                            <div className="inner">homepage</div>
                        </a>
                        <a href={wiki} className="button button__secondary">
                            <div className="inner">Wiki</div>
                        </a>
                    </div>
                </div>
            </div>
            <div className="char__descr">
                {description}
            </div>
            <div className="char__comics">Comics:</div>
            <ul className="char__comics-list">
                {comics.length > 0 ? null : 'There is no comics with this character'}
                {
                    comics.map((item, i) => {
                        // eslint-disable-next-line
                        if (i > 9) return;
                        return (
                            <li key={i} className="char__comics-item">
                                {item.name}
                            </li>
                        )
                    })
                }                
            </ul>
        </>
    )
}

CharInfo.propTypes = {
    charId: PropTypes.number
}

export default CharInfo;	  
```
	  
### ComicsList.js
```jsx harmone
import {useState, useEffect} from 'react';
import useMarvelService from '../../services/MarvelService';
import Spinner from '../spinner/Spinner';
import ErrorMessage from '../errorMessage/ErrorMessage';

import './comicsList.scss';

const ComicsList = () => {

    const [comicsList, setComicsList] = useState([]);
    const [newItemLoading, setnewItemLoading] = useState(false);
    const [offset, setOffset] = useState(0);
    const [comicsEnded, setComicsEnded] = useState(false);

    const {loading, error, getAllComics} = useMarvelService();

    useEffect(() => {
        onRequest(offset, true);
    }, [])

    const onRequest = (offset, initial) => {
        initial ? setnewItemLoading(false) : setnewItemLoading(true);
        getAllComics(offset)
            .then(onComicsListLoaded)
    }

    const onComicsListLoaded = (newComicsList) => {
        let ended = false;
        if (newComicsList.length < 8) {
            ended = true;
        }
        setComicsList([...comicsList, ...newComicsList]);
        setnewItemLoading(false);
        setOffset(offset + 8);
        setComicsEnded(ended);
    }

    function renderItems (arr) {
        const items = arr.map((item, i) => {
            return (
                <li className="comics__item" key={i}>
                    <a href="#">
                        <img src={item.thumbnail} alt={item.title} className="comics__item-img"/>
                        <div className="comics__item-name">{item.title}</div>
                        <div className="comics__item-price">{item.price}</div>
                    </a>
                </li>
            )
        })

        return (
            <ul className="comics__grid">
                {items}
            </ul>
        )
    }

    const items = renderItems(comicsList);

    const errorMessage = error ? <ErrorMessage/> : null;
    const spinner = loading && !newItemLoading ? <Spinner/> : null;

    return (
        <div className="comics__list">
            {errorMessage}
            {spinner}
            {items}
            <button 
                disabled={newItemLoading} 
                style={{'display' : comicsEnded ? 'none' : 'block'}}
                className="button button__main button__long"
                onClick={() => onRequest(offset)}>
                <div className="inner">load more</div>
            </button>
        </div>
    )
}

export default ComicsList;	  
```	  	  
	  
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
306. ### <a name="306"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
307. ### <a name="307"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
308. ### <a name="308"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
309. ### <a name="309"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
310. ### <a name="310"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**

325. ### <a name="325"></a> configureStore(), createReducer(), createAction(), createSlice(), createAsyncThunk(), createEntityAdapter()

- [configureStore()](#configureStore)
- [createReducer()](#createReducer)
- [createAction()](#createAction)
- [createSlice()](#createSlice)
- [createAsyncThunk()](#createAsyncThunk)
- [createEntityAdapter()](#createEntityAdapter)	

	
`Redux Toolkit` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –∞ —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ–∑–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–¥.	
	
### configureStore() <a name="configureStore"></a>

`configureStore()` –ø–æ–º–æ–≥–∞–µ—Ç —Ä–µ—à–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å "–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–º–∏" –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, —á—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –∏–∑—É—á–µ–Ω–∏–µ –∫–æ–¥–∞
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ middlewares –∏ enhancers, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—è applyMiddleware() –∏ compose()
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Redux DevTools
	
–ö—Ä–æ–º–µ —Ç–æ–≥–æ, configureStore() –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤:
- redux-thunk - –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–ª–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–ª–æ–π –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫, –≤—Ä–æ–¥–µ –º—É—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
	
–ü—Ä–æ—Å—Ç–µ–π—à–∏–º —Å–ø–æ—Å–æ–±–æ–º —Å–æ–∑–¥–∞–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—á–∞ –≤ configureStore() –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ reducer:
	
```jsx harmony
import { configureStore } from '@reduxjs/toolkit'
import rootReducer from './reducers'

const store = configureStore({
  reducer: rootReducer
})

export default store
```	
	
–¢–∞–∫–∂–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç —Å —á–∞—Å—Ç–∏—á–Ω—ã–º–∏ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞–º–∏, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ configureStore() –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç combineReducers():
	
```jsx harmony
import usersReducer from './usersReducer'
import postsReducer from './postsReducer'

const store = configureStore({
  reducer: {
    users: usersReducer,
    posts: postsReducer
  }
})
```
	
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏. –ï—Å–ª–∏ —Ç—Ä–µ–±—É—é—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ–¥—É–∫—Ç–æ—Ä—ã, –ø—Ä–∏–¥–µ—Ç—Å—è –≤—ã–∑—ã–≤–∞—Ç—å combineReducers() —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.	
	
**[‚¨Ü 325](#325)**

	
### createReducer() <a name="createReducer"></a>

–§—É–Ω–∫—Ü–∏—è `createReducer()` –ø–æ—Ö–æ–∂–∞ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ Redux. –í –Ω–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ immer, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å "–º—É—Ç–∏—Ä—É—é—â–∏–π" –∫–æ–¥, –æ–±–Ω–æ–≤–ª—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ. –≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –Ω–µ–ø—Ä–µ–¥–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ–≥–æ –º—É—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ä–µ–¥—É–∫—Ç–æ—Ä–µ.	

```jsx harmony
const todosReducer = createReducer([], builder => {
  builder
    .addCase('ADD_TODO', (state, action) => {
      // "–º—É—Ç–∏—Ä—É–µ–º" –º–∞—Å—Å–∏–≤, –≤—ã–∑—ã–≤–∞—è push()
      state.push(action.payload)
    })
    .addCase('TOGGLE_TODO', (state, action) => {
      const todo = state[action.payload.index]
      // "–º—É—Ç–∏—Ä—É–µ–º" –æ–±—ä–µ–∫—Ç, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—è –µ–≥–æ –ø–æ–ª–µ `completed`
      todo.completed = !todo.completed
    })
    .addCase('REMOVE_TODO', (state,action) => {
      // –º—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
      return state.filter((todo,i) => i !== action.payload.index)
    })
})	
```	

–§—É–Ω–∫—Ü–∏—è createReducer() –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ–π, –Ω–æ —Å–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å –æ —Ç–æ–º, —á—Ç–æ:

"–ú—É—Ç–∏—Ä—É—é—â–∏–π" –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ createReducer()
Immer –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–º–µ—à–∏–≤–∞—Ç—å "–º—É—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" —á–µ—Ä–Ω–æ–≤–∏–∫–∞ (draft) —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è	
	
	
**[‚¨Ü 325](#325)**

	
### createAction() <a name="createAction"></a>
	
–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω—ã–º. Redux Toolkit –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é createAction(), –∫–æ—Ç–æ—Ä–∞—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞—Ç–µ–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Ç–∏–ø–æ–º –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –ø–æ–ª–µ payload:

```jsx harmony	
const addTodo = createAction('ADD_TODO')
addTodo({ text: 'Buy milk' })
// { type : "ADD_TODO", payload : {text : "Buy milk"}} )
```
	
createAction() —Ç–∞–∫–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç-–∫–æ–ª–±–µ–∫ prepare, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–µ –ø–æ–ª–µ payload –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª–µ meta, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
	
```jsx harmony
const actionCreator = createAction('SOME_ACTION_TYPE')

console.log(actionCreator.toString())
// SOME_ACTION_TYPE

console.log(actionCreator.type)
// SOME_ACTION_TYPE

const reducer = createReducer({}, builder => {
  // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–≤–∞–Ω `actionCreator.toString()`
  // –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ TypeScript, –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω) —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏
  builder.addCase(actionCreator, (state, action) => {})

  // –ò–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª–µ `type`
  // –í —ç—Ç–æ–º—É —Å–ª—É—á–∞–µ, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ TypeScript, —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω –Ω–µ –±—É–¥–µ—Ç
  builder.addCase(actionCreator.type, (state, action) => {})
})	
```	
	
**[‚¨Ü 325](#325)**
	
	
### createSlice() <a name="createSlice"></a>
	
`createSlice()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–∏–ø—ã –∏ —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è —Ä–µ–¥—É–∫—Ç–æ—Ä–∞:

```jsx harmony	
const postsSlice = createSlice({
  name: 'posts',
  initialState: [],
  reducers: {
    createPost(state, action) {},
    updatePost(state, action) {},
    deletePost(state, action) {}
  }
})

console.log(postsSlice)
/*
{
  name: 'posts',
  actions : {
      createPost,
      updatePost,
      deletePost,
  },
  reducer
}
*/

const { createPost } = postsSlice.actions

console.log(createPost({ id: 123, title: '–ü—Ä–∏–≤–µ—Ç, –Ω–∞—Ä–æ–¥!' }))
// { type : 'posts/createPost', payload : { id : 123, title : '–ü—Ä–∏–≤–µ—Ç, –Ω–∞—Ä–æ–¥!' } }
```
	
`createSlice()` –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ –ø–æ–ª–µ reducers, —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–¥—É–∫—Ç–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª—É—á–∞—è –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∏–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ä–µ–¥—É–∫—Ç–æ—Ä createPost —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–∏–ø–æ–º –æ–ø–µ—Ä–∞—Ü–∏–∏ posts/createPost, –∞ —Å–æ–∑–¥–∞—Ç–µ–ª—å createPost() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é —Å —ç—Ç–∏–º —Ç–∏–ø–æ–º.

–≠–∫—Å–ø–æ—Ä—Ç –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è
	
–û–±—ã—á–Ω–æ, –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —á–∞—Å—Ç—å –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π –∏ —Ä–µ–¥—É–∫—Ç–æ—Ä—ã:

```jsx harmony	
const postsSlice = createSlice({
  name: 'posts',
  initialState: [],
  reducers: {
    createPost(state, action) {},
    updatePost(state, action) {},
    deletePost(state, action) {}
  }
})

// –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–±—ä–µ–∫—Ç —Å —Å–æ–∑–¥–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–µ–¥—É–∫—Ç–æ—Ä
const { actions, reducer } = postsSlice
// –ò–∑–≤–ª–µ–∫–∞–µ–º –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞–∂–¥–æ–≥–æ —Å–æ–∑–¥–∞—Ç–µ–ª—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
export const { createPost, updatePost, deletePost } = actions
// –≠–∫–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–¥—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
export default reducer
```	
	
**[‚¨Ü 325](#325)**

	
### createAsyncThunk() <a name="createAsyncThunk"></a>
	
`createAsyncThunk()` —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ - –º—ã –ø–µ—Ä–µ–¥–∞–µ–º –µ–º—É —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø—Ä–µ—Ñ–∏–∫—Å–∞ —Ç–∏–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∫–æ–ª–±–µ–∫ —Å–æ–∑–¥–∞—Ç–µ–ª—è –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (payload), –≤—ã–ø–æ–ª–Ω—è—é—â–µ–≥–æ —Ä–µ–∞–ª—å–Ω—É—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–≥–æ –ø—Ä–æ–º–∏—Å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º. `createAsyncThunk()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–±–æ—Ç–∏—Ç—Å—è –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–∏—Å–∞, –∏ —Ç–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞—Ö:

```jsx harmony	
import { createAsyncThunk, createSlice } from '@redux/toolkit'
import { userAPI } from './userAPI'

// –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è
const fetchUserById = createAsyncThunk(
  'user/fetchByIdStatus',
  async (userId, thunkAPI) => {
    const response = await userAPI.fetchById(userId)
    return response.data
  }
)

// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞—Ö
const usersSlice = createSlice({
  name: 'users',
  initialState: {entries: [], loading: 'idle'},
  reducers: {
    // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞ —Å –∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–º–∏ —Ç–∏–ø–∞–º–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞
  },
  extraReducers: {
    [fetchUserById.fullfilled]: (state, action) => {
      // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –º–∞—Å—Å–∏–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è
      state.entries.push(action.payload)
    }
  }
})

// –ü–æ–∑–∂–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º `thunk`
dispatch(fetchUserById(123))
```	
	
**[‚¨Ü 325](#325)**
	
	
### createEntityAdapter() <a name="createEntityAdapter"></a>
	
`createEntityAdapter()` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—É—Ç–µ–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ —Ñ–æ—Ä–º—É { ids: [], entities: {} }. –ö—Ä–æ–º–µ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è, —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–∞–±–æ—Ä —Ä–µ–¥—É–∫—Ç–æ—Ä–æ–≤ –∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–Ω–∞—é—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–∞–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
	
```jsx harmony
import {
  createSlice,
  createAsyncThunk,
  createEntityAdapter
} from '@reduxjs/toolkit'
import userAPI from './userAPI'

export const fetchUsers = createAsyncThunk('users/fetchAll', async () => {
  const response = await userAPI.fetchAll()
  // –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ `response.data` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
  // [{id: 1, first_name: 'Example', last_name: 'User'}]
  return response.data
})

export const updateUser = createAsyncThunk('users/updateOne', async arg => {
  const response = await userAPI.updateUser(arg)
  // –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ `response.data` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
  // { id: 1, first_name: 'Example', last_name: 'UpdatedLastName'}
  return response.data
})

export const usersAdapter = createEntityAdapter()

// –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `createEntityAdapter()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{ ids: [], entities: {} }`
// –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è 'loading' –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∫–ª—é—á–µ–π, –∏—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:
// `getInitialState({ loading: false, activeRequestId: null })`
const initialState = usersAdapter.getInitialState()

export const slice = createSlice({
  name: 'users',
  initialState,
  reducers: {
    removeUser: usersAdapter.removeOne
  },
  extraReducers: builder => {
    builder.addCase(fetchUsers.fulfilled, usersAdapter.upsertMany)
    builder.addCase(updateUser.fulfilled, (state, { payload }) => {
      const { id, ...changes } = payload
      usersAdapter.updateOne(state, { id, changes })
    })
  }
})

const reducer = slice.reducer
export default reducer

export const { removeUser } = slice.actions
```	
	
**[‚¨Ü 325](#325)**
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
		

326. ### <a name="326"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
327. ### <a name="327"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
328. ### <a name="328"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
329. ### <a name="329"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	
	
330. ### <a name="330"></a> Redux Toolkit: configureStore()

```jsx harmony
import { configureStore } from '@reduxjs/toolkit';
import heroes from '../reducers/heroes';
import filters from '../reducers/filters';

const stringMiddleware = () => (next) => (action) => {
    if (typeof action === 'string') {
        return next({
            type: action
        })
    }
    return next(action)
};

const store = configureStore({
    reducer: {heroes, filters},
    middleware: getDefaultMiddleware => getDefaultMiddleware().concat(stringMiddleware),
    devTools: process.env.NODE_ENV !== 'production',
})

export default store;			
```			
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	  
331. ### <a name="331"></a> Redux Toolkit: createAction()

```jsx harmony
import { createAction } from "@reduxjs/toolkit";

export const fetchHeroes = (request) => (dispatch) => {
    dispatch(heroesFetching());
    request("http://localhost:3001/heroes")
        .then(data => dispatch(heroesFetched(data)))
        .catch(() => dispatch(heroesFetchingError()))
}

export const fetchFilters = (request) => (dispatch) => {
    dispatch(filtersFetching());
    request("http://localhost:3001/filters")
        .then(data => dispatch(filtersFetched(data)))
        .catch(() => dispatch(filtersFetchingError()))
}

// export const heroesFetching = () => {
//     return {
//         type: 'HEROES_FETCHING'
//     }
// }

export const heroesFetching = createAction('HEROES_FETCHING');

// export const heroesFetched = (heroes) => {
//     return {
//         type: 'HEROES_FETCHED',
//         payload: heroes
//     }
// }

export const heroesFetched = createAction('HEROES_FETCHED');

// export const heroesFetchingError = () => {
//     return {
//         type: 'HEROES_FETCHING_ERROR'
//     }
// }

export const heroesFetchingError = createAction('HEROES_FETCHING_ERROR');

export const filtersFetching = () => {
    return {
        type: 'FILTERS_FETCHING'
    }
}

export const filtersFetched = (filters) => {
    return {
        type: 'FILTERS_FETCHED',
        payload: filters
    }
}

export const filtersFetchingError = () => {
    return {
        type: 'FILTERS_FETCHING_ERROR'
    }
}

export const activeFilterChanged = (filter) => {
    return {
        type: 'ACTIVE_FILTER_CHANGED',
        payload: filter
    }
}

// export const heroCreated = (hero) => {
//     return {
//         type: 'HERO_CREATED',
//         payload: hero
//     }
// }

export const heroCreated = createAction('HERO_CREATED');

// export const heroDeleted = (id) => {
//     return {
//         type: 'HERO_DELETED',
//         payload: id
//     }
// }

export const heroDeleted = createAction('HERO_DELETED');			
```			
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	  

332. ### <a name="332"></a> Redux Toolkit: createReducer()

```jsx harmony
import { createReducer } from "@reduxjs/toolkit";

import {
    heroesFetching,
    heroesFetched,
    heroesFetchingError,
    heroCreated,
    heroDeleted
} from '../actions';

const initialState = {
    heroes: [],
    heroesLoadingStatus: 'idle'
}

const heroes = createReducer(initialState, {
    [heroesFetching]: state => {state.heroesLoadingStatus = 'loading'},
    [heroesFetched]: (state, action) => {
                    state.heroesLoadingStatus = 'idle';
                    state.heroes = action.payload;
                },
    [heroesFetchingError]: state => {
                    state.heroesLoadingStatus = 'error';
                },
    [heroCreated]: (state, action) => {
                    state.heroes.push(action.payload);
                },
    [heroDeleted]: (state, action) => {
                    state.heroes = state.heroes.filter(item => item.id !== action.payload);
                }
        },
    [],
    state => state
)

// –∏–ª–∏ –≤–æ—Ç —Ç–∞–∫ ->			
			
const heroes = createReducer(initialState, builder => {
     builder
         .addCase(heroesFetching, state => {
             state.heroesLoadingStatus = 'loading';
         })
         .addCase(heroesFetched, (state, action) => {
             state.heroesLoadingStatus = 'idle';
             state.heroes = action.payload;
         })
         .addCase(heroesFetchingError, state => {
             state.heroesLoadingStatus = 'error';
         })
         .addCase(heroCreated, (state, action) => {
             state.heroes.push(action.payload);
         })
         .addCase(heroDeleted, (state, action) => {
             state.heroes = state.heroes.filter(item => item.id !== action.payload);
         })
         .addDefaultCase(() => {});
})

export default heroes;			
```			
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
			
333. ### <a name="333"></a> Redux Toolkit: createSlice()

### heroesSlice			
```jsx harmony
import { createSlice } from "@reduxjs/toolkit";

const initialState = {
    heroes: [],
    heroesLoadingStatus: 'idle'
}

const heroesSlice = createSlice({
    name: 'heroes',
    initialState,
    reducers: {
        heroesFetching: state => {state.heroesLoadingStatus = 'loading'},
        heroesFetched: (state, action) => {
            state.heroesLoadingStatus = 'idle';
            state.heroes = action.payload;
        },
        heroesFetchingError: state => {
            state.heroesLoadingStatus = 'error';
        },
        heroCreated: (state, action) => {
            state.heroes.push(action.payload);
        },
        heroDeleted: (state, action) => {
            state.heroes = state.heroes.filter(item => item.id !== action.payload);
        }
    }
});

const {actions, reducer} = heroesSlice;

export default reducer;
export const {
    heroesFetching,
    heroesFetched,
    heroesFetchingError,
    heroCreated,
    heroDeleted
} = actions;			
```			

### filtersSlice
```jsx harmony
import { createSlice } from "@reduxjs/toolkit";

const initialState = {
    filters: [],
    filtersLoadingStatus: 'idle',
    activeFilter: 'all'
}

const filtersSlice = createSlice({
    name: 'filters',
    initialState,
    reducers: {
        filtersFetching: state => {state.filtersLoadingStatus = 'loading'},
        filtersFetched: (state, action) => {
            state.filtersLoadingStatus = 'idle';
            state.filters = action.payload;
        },
        filtersFetchingError: state => {
            state.filtersLoadingStatus = 'error';
        },
        filtersChanged: (state, action) => {
            state.activeFilter = action.payload;
        }
    }
});

const {actions, reducer} = filtersSlice;

export default reducer;
export const {
    filtersFetching,
    filtersFetched,
    filtersFetchingError,
    filtersChanged
} = actions;			
```						
			
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			

334. ### <a name="334"></a> Redux Toolkit: createAsyncThunk()

### heroesSlice.js
```jsx harmony
import { createSlice, createAsyncThunk } from "@reduxjs/toolkit";
import {useHttp} from '../../hooks/http.hook';

const initialState = {
    heroes: [],
    heroesLoadingStatus: 'idle'
}

export const fetchHeroes = createAsyncThunk(
    'heroes/fetchHeroes',
    async () => {
        const {request} = useHttp();
        return await request("http://localhost:3001/heroes");
    }
);

const heroesSlice = createSlice({
    name: 'heroes',
    initialState,
    reducers: {
        heroCreated: (state, action) => {
            state.heroes.push(action.payload);
        },
        heroDeleted: (state, action) => {
            state.heroes = state.heroes.filter(item => item.id !== action.payload);
        }
    },
    extraReducers: (builder) => {
        builder
            .addCase(fetchHeroes.pending, state => {state.heroesLoadingStatus = 'loading'})
            .addCase(fetchHeroes.fulfilled, (state, action) => {
                state.heroesLoadingStatus = 'idle';
                state.heroes = action.payload;
            })
            .addCase(fetchHeroes.rejected, state => {
                state.heroesLoadingStatus = 'error';
            })
            .addDefaultCase(() => {})
    }
});

const {actions, reducer} = heroesSlice;

export default reducer;
export const {
    heroesFetching,
    heroesFetched,
    heroesFetchingError,
    heroCreated,
    heroDeleted
} = actions;			
```			

### filtersSlice.js
```jsx harmony
import { createSlice, createAsyncThunk } from "@reduxjs/toolkit";
import {useHttp} from '../../hooks/http.hook';

const initialState = {
    filters: [],
    filtersLoadingStatus: 'idle',
    activeFilter: 'all'
}

export const fetchFilters = createAsyncThunk(
    'filters/fetchFilters',
    async () => {
        const {request} = useHttp();
        return await request("http://localhost:3001/filters");
    }
);

const filtersSlice = createSlice({
    name: 'filters',
    initialState,
    reducers: {
        filtersChanged: (state, action) => {
            state.activeFilter = action.payload;
        }
    },
    extraReducers: (builder) => {
        builder
            .addCase(fetchFilters.pending, state => {state.filtersLoadingStatus = 'loading'})
            .addCase(fetchFilters.fulfilled, (state, action) => {
                state.filtersLoadingStatus = 'idle';
                state.filters = action.payload;
            })
            .addCase(fetchFilters.rejected, state => {
                state.filtersLoadingStatus = 'error';
            })
            .addDefaultCase(() => {})
    }
});

const {actions, reducer} = filtersSlice;

export default reducer;
export const {
    filtersFetching,
    filtersFetched,
    filtersFetchingError,
    filtersChanged
} = actions;			
```			

### http.hook.js
```jsx harmony
export const useHttp = () => {

    const request = async (url, method = 'GET', body = null, headers = {'Content-Type': 'application/json'}) => {

        try {
            const response = await fetch(url, {method, body, headers});

            if (!response.ok) {
                throw new Error(`Could not fetch ${url}, status: ${response.status}`);
            }

            const data = await response.json();

            return data;
        } catch(e) {
            throw e;
        }
    };

    return {request}
}			
```			

### HeroesList.js
```jsx harmony
import {useHttp} from '../../hooks/http.hook';
import { useEffect, useCallback } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { CSSTransition, TransitionGroup} from 'react-transition-group';
import { createSelector } from '@reduxjs/toolkit';

import { heroDeleted, fetchHeroes } from './heroesSlice';

import HeroesListItem from "../heroesListItem/HeroesListItem";
import Spinner from '../spinner/Spinner';

import './heroesList.scss';

const HeroesList = () => {

    const filteredHeroesSelector = createSelector(
        (state) => state.filters.activeFilter,
        (state) => state.heroes.heroes,
        (filter, heroes) => {
            if (filter === 'all') {
                return heroes;
            } else {
                return heroes.filter(item => item.element === filter);
            }
        }
    );

    const filteredHeroes = useSelector(filteredHeroesSelector);
    const heroesLoadingStatus = useSelector(state => state.heroes.heroesLoadingStatus);
    const dispatch = useDispatch();
    const {request} = useHttp();

    useEffect(() => {
        dispatch(fetchHeroes());
        // eslint-disable-next-line
    }, []);

    const onDelete = useCallback((id) => {
        request(`http://localhost:3001/heroes/${id}`, "DELETE")
            .then(data => console.log(data, 'Deleted'))
            .then(dispatch(heroDeleted(id)))
            .catch(err => console.log(err));
        // eslint-disable-next-line  
    }, [request]);

    if (heroesLoadingStatus === "loading") {
        return <Spinner/>;
    } else if (heroesLoadingStatus === "error") {
        return <h5 className="text-center mt-5">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>
    }

    const renderHeroesList = (arr) => {
        if (arr.length === 0) {
            return (
                <CSSTransition
                    timeout={0}
                    classNames="hero">
                    <h5 className="text-center mt-5">–ì–µ—Ä–æ–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h5>
                </CSSTransition>
            )
        }

        return arr.map(({id, ...props}) => {
            return (
                <CSSTransition 
                    key={id}
                    timeout={500}
                    classNames="hero">
                    <HeroesListItem  {...props} onDelete={() => onDelete(id)}/>
                </CSSTransition>
            )
        })
    }

    const elements = renderHeroesList(filteredHeroes);
    return (
        <TransitionGroup component="ul">
            {elements}
        </TransitionGroup>
    )
}

export default HeroesList;			
```			

### HeroesFilters.js
```jsx harmony
import {useHttp} from '../../hooks/http.hook';
import { useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import classNames from 'classnames';

import { filtersChanged, fetchFilters } from './filtersSlice';
import Spinner from '../spinner/Spinner';

const HeroesFilters = () => {

    const {filters, filtersLoadingStatus, activeFilter} = useSelector(state => state.filters);
    const dispatch = useDispatch();
    const {request} = useHttp();

    useEffect(() => {
        dispatch(fetchFilters(request));

        // eslint-disable-next-line
    }, []);

    if (filtersLoadingStatus === "loading") {
        return <Spinner/>;
    } else if (filtersLoadingStatus === "error") {
        return <h5 className="text-center mt-5">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>
    }

    const renderFilters = (arr) => {
        if (arr.length === 0) {
            return <h5 className="text-center mt-5">–§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h5>
        }

        return arr.map(({name, className, label}) => {

            const btnClass = classNames('btn', className, {
                'active': name === activeFilter
            });
            
            return <button 
                        key={name} 
                        id={name} 
                        className={btnClass}
                        onClick={() => dispatch(filtersChanged(name))}
                        >{label}</button>
        })
    }

    const elements = renderFilters(filters);

    return (
        <div className="card shadow-lg mt-4">
            <div className="card-body">
                <p className="card-text">–û—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ –≥–µ—Ä–æ–µ–≤ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º</p>
                <div className="btn-group">
                    {elements}
                </div>
            </div>
        </div>
    )
}

export default HeroesFilters;
```			
			
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			

335. ### <a name="335"></a> Redux Toolkit: createEntityAdapter()

### heroesSlice.js
```jsx harmony
import { createSlice, createAsyncThunk, createEntityAdapter, createSelector } from "@reduxjs/toolkit";
import {useHttp} from '../../hooks/http.hook';

const heroesAdapter = createEntityAdapter();

const initialState = heroesAdapter.getInitialState({
    heroesLoadingStatus: 'idle'
});

export const fetchHeroes = createAsyncThunk(
    'heroes/fetchHeroes',
    async () => {
        const {request} = useHttp();
        return await request("http://localhost:3001/heroes");
    }
);

const heroesSlice = createSlice({
    name: 'heroes',
    initialState,
    reducers: {
        heroCreated: (state, action) => {
            heroesAdapter.addOne(state, action.payload);
        },
        heroDeleted: (state, action) => {
            heroesAdapter.removeOne(state, action.payload);
        }
    },
    extraReducers: (builder) => {
        builder
            .addCase(fetchHeroes.pending, state => {state.heroesLoadingStatus = 'loading'})
            .addCase(fetchHeroes.fulfilled, (state, action) => {
                state.heroesLoadingStatus = 'idle';
                heroesAdapter.setAll(state, action.payload);
            })
            .addCase(fetchHeroes.rejected, state => {
                state.heroesLoadingStatus = 'error';
            })
            .addDefaultCase(() => {})
    }
});

const {actions, reducer} = heroesSlice;

export default reducer;

const {selectAll} = heroesAdapter.getSelectors(state => state.heroes);

export const filteredHeroesSelector = createSelector(
    (state) => state.filters.activeFilter,
    selectAll,
    (filter, heroes) => {
        if (filter === 'all') {
            return heroes;
        } else {
            return heroes.filter(item => item.element === filter);
        }
    }
);

export const {
    heroesFetching,
    heroesFetched,
    heroesFetchingError,
    heroCreated,
    heroDeleted
} = actions;			
```			

### filtersSlice.js
```jsx harmony
import { createSlice, createAsyncThunk, createEntityAdapter } from "@reduxjs/toolkit";
import {useHttp} from '../../hooks/http.hook';

const filtersAdapter = createEntityAdapter();

const initialState = filtersAdapter.getInitialState({
    filtersLoadingStatus: 'idle',
    activeFilter: 'all'
});

export const fetchFilters = createAsyncThunk(
    'filters/fetchFilters',
    async () => {
        const {request} = useHttp();
        return await request("http://localhost:3001/filters");
    }
);

const filtersSlice = createSlice({
    name: 'filters',
    initialState,
    reducers: {
        filtersChanged: (state, action) => {
            state.activeFilter = action.payload;
        }
    },
    extraReducers: (builder) => {
        builder
            .addCase(fetchFilters.pending, state => {state.filtersLoadingStatus = 'loading'})
            .addCase(fetchFilters.fulfilled, (state, action) => {
                state.filtersLoadingStatus = 'idle';
                filtersAdapter.setAll(state, action.payload);
            })
            .addCase(fetchFilters.rejected, state => {
                state.filtersLoadingStatus = 'error';
            })
            .addDefaultCase(() => {})
    }
});

const {actions, reducer} = filtersSlice;

export default reducer;

export const {selectAll} = filtersAdapter.getSelectors(state => state.filters);

export const {
    filtersFetching,
    filtersFetched,
    filtersFetchingError,
    filtersChanged
} = actions;			
```			
		
### HeroesList.js
```jsx harmony
import {useHttp} from '../../hooks/http.hook';
import { useEffect, useCallback } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { CSSTransition, TransitionGroup} from 'react-transition-group';

import { heroDeleted, fetchHeroes, filteredHeroesSelector } from './heroesSlice';

import HeroesListItem from "../heroesListItem/HeroesListItem";
import Spinner from '../spinner/Spinner';

import './heroesList.scss';

const HeroesList = () => {
    const filteredHeroes = useSelector(filteredHeroesSelector);
    const heroesLoadingStatus = useSelector(state => state.heroes.heroesLoadingStatus);
    const dispatch = useDispatch();
    const {request} = useHttp();

    useEffect(() => {
        dispatch(fetchHeroes());
        // eslint-disable-next-line
    }, []);

    const onDelete = useCallback((id) => {
        request(`http://localhost:3001/heroes/${id}`, "DELETE")
            .then(data => console.log(data, 'Deleted'))
            .then(dispatch(heroDeleted(id)))
            .catch(err => console.log(err));
        // eslint-disable-next-line  
    }, [request]);

    if (heroesLoadingStatus === "loading") {
        return <Spinner/>;
    } else if (heroesLoadingStatus === "error") {
        return <h5 className="text-center mt-5">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>
    }

    const renderHeroesList = (arr) => {
        if (arr.length === 0) {
            return (
                <CSSTransition
                    timeout={0}
                    classNames="hero">
                    <h5 className="text-center mt-5">–ì–µ—Ä–æ–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h5>
                </CSSTransition>
            )
        }

        return arr.map(({id, ...props}) => {
            return (
                <CSSTransition 
                    key={id}
                    timeout={500}
                    classNames="hero">
                    <HeroesListItem  {...props} onDelete={() => onDelete(id)}/>
                </CSSTransition>
            )
        })
    }

    const elements = renderHeroesList(filteredHeroes);
    return (
        <TransitionGroup component="ul">
            {elements}
        </TransitionGroup>
    )
}

export default HeroesList;			
```			
			
### HeroesFilters.js
```jsx harmony
import {useHttp} from '../../hooks/http.hook';
import { useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import classNames from 'classnames';
import store from '../../store';

import { filtersChanged, fetchFilters, selectAll } from './filtersSlice';
import Spinner from '../spinner/Spinner';

const HeroesFilters = () => {

    const {filtersLoadingStatus, activeFilter} = useSelector(state => state.filters);
    const filters = selectAll(store.getState());
    const dispatch = useDispatch();
    const {request} = useHttp();

    useEffect(() => {
        dispatch(fetchFilters(request));

        // eslint-disable-next-line
    }, []);

    if (filtersLoadingStatus === "loading") {
        return <Spinner/>;
    } else if (filtersLoadingStatus === "error") {
        return <h5 className="text-center mt-5">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>
    }

    const renderFilters = (arr) => {
        if (arr.length === 0) {
            return <h5 className="text-center mt-5">–§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h5>
        }

        return arr.map(({name, className, label}) => {

            const btnClass = classNames('btn', className, {
                'active': name === activeFilter
            });
            
            return <button 
                        key={name} 
                        id={name} 
                        className={btnClass}
                        onClick={() => dispatch(filtersChanged(name))}
                        >{label}</button>
        })
    }

    const elements = renderFilters(filters);

    return (
        <div className="card shadow-lg mt-4">
            <div className="card-body">
                <p className="card-text">–û—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ –≥–µ—Ä–æ–µ–≤ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º</p>
                <div className="btn-group">
                    {elements}
                </div>
            </div>
        </div>
    )
}

export default HeroesFilters;			
```						

### HeroesAddForm.js
```jsx harmony
import {useHttp} from '../../hooks/http.hook';
import { useState } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { v4 as uuidv4 } from 'uuid';
import store from '../../store';

import { selectAll } from '../heroesFilters/filtersSlice';
import { heroCreated } from '../heroesList/heroesSlice';

const HeroesAddForm = () => {
    const [heroName, setHeroName] = useState('');
    const [heroDescr, setHeroDescr] = useState('');
    const [heroElement, setHeroElement] = useState('');

    const {filtersLoadingStatus} = useSelector(state => state.filters);
    const filters = selectAll(store.getState());
    const dispatch = useDispatch();
    const {request} = useHttp();

    const onSubmitHandler = (e) => {
        e.preventDefault();
        const newHero = {
            id: uuidv4(),
            name: heroName,
            description: heroDescr,
            element: heroElement
        }

        request("http://localhost:3001/heroes", "POST", JSON.stringify(newHero))
            .then(res => console.log(res, '–û—Ç–ø—Ä–∞–≤–∫–∞ —É—Å–ø–µ—à–Ω–∞'))
            .then(dispatch(heroCreated(newHero)))
            .catch(err => console.log(err));

        setHeroName('');
        setHeroDescr('');
        setHeroElement('');
    }

    const renderFilters = (filters, status) => {
        if (status === "loading") {
            return <option>–ó–∞–≥—Ä—É–∑–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤</option>
        } else if (status === "error") {
            return <option>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</option>
        }
        
        if (filters && filters.length > 0 ) {
            return filters.map(({name, label}) => {
                // eslint-disable-next-line
                if (name === 'all')  return;

                return <option key={name} value={name}>{label}</option>
            })
        }
    }

    return (
        <form className="border p-4 shadow-lg rounded" onSubmit={onSubmitHandler}>
            <div className="mb-3">
                <label htmlFor="name" className="form-label fs-4">–ò–º—è –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è</label>
                <input 
                    required
                    type="text" 
                    name="name" 
                    className="form-control" 
                    id="name" 
                    placeholder="–ö–∞–∫ –º–µ–Ω—è –∑–æ–≤—É—Ç?"
                    value={heroName}
                    onChange={(e) => setHeroName(e.target.value)}/>
            </div>

            <div className="mb-3">
                <label htmlFor="text" className="form-label fs-4">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea
                    required
                    name="text" 
                    className="form-control" 
                    id="text" 
                    placeholder="–ß—Ç–æ —è —É–º–µ—é?"
                    style={{"height": '130px'}}
                    value={heroDescr}
                    onChange={(e) => setHeroDescr(e.target.value)}/>
            </div>

            <div className="mb-3">
                <label htmlFor="element" className="form-label">–í—ã–±—Ä–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≥–µ—Ä–æ—è</label>
                <select 
                    required
                    className="form-select" 
                    id="element" 
                    name="element"
                    value={heroElement}
                    onChange={(e) => setHeroElement(e.target.value)}>
                    <option value="">–Ø –≤–ª–∞–¥–µ—é —ç–ª–µ–º–µ–Ω—Ç–æ–º...</option>
                    {renderFilters(filters, filtersLoadingStatus)}
                </select>
            </div>

            <button type="submit" className="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
        </form>
    )
}

export default HeroesAddForm;			
```						
			
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			

336. ### <a name="336"></a> Redux Toolkit: RTK Query

apiSlice.js		
```jsx harmony
import {createApi, fetchBaseQuery} from '@reduxjs/toolkit/query/react';

export const apiSlice = createApi({
    reducerPath: 'api',
    baseQuery: fetchBaseQuery({baseUrl: 'http://localhost:3001'}),
    tagTypes: ['Heroes'],
    endpoints: builder => ({
        getHeroes: builder.query({
            query: () => '/heroes',
            providesTags: ['Heroes']
        }),
        createHero: builder.mutation({
            query: hero => ({
                url: '/heroes',
                method: 'POST',
                body: hero
            }),
            invalidatesTags: ['Heroes']
        }),
        deleteHero: builder.mutation({
            query: id => ({
                url: `/heroes/${id}`,
                method: 'DELETE'
            }),
            invalidatesTags: ['Heroes']
        })
    })
});

export const {useGetHeroesQuery, useCreateHeroMutation, useDeleteHeroMutation} = apiSlice;		
```		

store/index.js		
```jsx harmony
import { configureStore } from '@reduxjs/toolkit';
import filters from '../components/heroesFilters/filtersSlice';
import { apiSlice } from '../api/apiSlice'; 

const stringMiddleware = () => (next) => (action) => {
    if (typeof action === 'string') {
        return next({
            type: action
        })
    }
    return next(action)
};

const store = configureStore({
    reducer: {  filters, 
                [apiSlice.reducerPath]: apiSlice.reducer},
    middleware: getDefaultMiddleware => getDefaultMiddleware().concat(stringMiddleware, apiSlice.middleware),
    devTools: process.env.NODE_ENV !== 'production'
})

export default store;		
```		

HeroesList.js
```jsx harmony
import { useCallback, useMemo } from 'react';
import { useSelector } from 'react-redux';
import { CSSTransition, TransitionGroup} from 'react-transition-group';

import { useGetHeroesQuery, useDeleteHeroMutation } from '../../api/apiSlice';

import HeroesListItem from "../heroesListItem/HeroesListItem";
import Spinner from '../spinner/Spinner';

import './heroesList.scss';

const HeroesList = () => {
    const {
        data: heroes = [],
        isLoading,
        isError,
    } = useGetHeroesQuery();

    const [deleteHero] = useDeleteHeroMutation();

    const activeFilter = useSelector(state => state.filters.activeFilter);

    const filteredHeroes = useMemo(() => {
        const filteredHeroes = heroes.slice();

        if (activeFilter === 'all') {
            return filteredHeroes;
        } else {
            return filteredHeroes.filter(item => item.element === activeFilter);
        }
    }, [heroes, activeFilter]);

    const onDelete = useCallback((id) => {
        deleteHero(id);
        // eslint-disable-next-line  
    }, []);

    if (isLoading) {
        return <Spinner/>;
    } else if (isError) {
        return <h5 className="text-center mt-5">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>
    }

    const renderHeroesList = (arr) => {
        if (arr.length === 0) {
            return (
                <CSSTransition
                    timeout={0}
                    classNames="hero">
                    <h5 className="text-center mt-5">–ì–µ—Ä–æ–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h5>
                </CSSTransition>
            )
        }

        return arr.map(({id, ...props}) => {
            return (
                <CSSTransition 
                    key={id}
                    timeout={500}
                    classNames="hero">
                    <HeroesListItem  {...props} onDelete={() => onDelete(id)}/>
                </CSSTransition>
            )
        })
    }

    const elements = renderHeroesList(filteredHeroes);
    return (
        <TransitionGroup component="ul">
            {elements}
        </TransitionGroup>
    )
}

export default HeroesList;		
```		

HeroesAddForm.js
```jsx harmony
import { useState } from 'react';
import { useSelector } from 'react-redux';
import { v4 as uuidv4 } from 'uuid';
import store from '../../store';

import { selectAll } from '../heroesFilters/filtersSlice';
import { useCreateHeroMutation } from '../../api/apiSlice';

const HeroesAddForm = () => {
    const [heroName, setHeroName] = useState('');
    const [heroDescr, setHeroDescr] = useState('');
    const [heroElement, setHeroElement] = useState('');

    const [createHero] = useCreateHeroMutation();

    const {filtersLoadingStatus} = useSelector(state => state.filters);
    const filters = selectAll(store.getState());

    const onSubmitHandler = (e) => {
        e.preventDefault();
        const newHero = {
            id: uuidv4(),
            name: heroName,
            description: heroDescr,
            element: heroElement
        }

        createHero(newHero).unwrap();

        setHeroName('');
        setHeroDescr('');
        setHeroElement('');
    }

    const renderFilters = (filters, status) => {
        if (status === "loading") {
            return <option>–ó–∞–≥—Ä—É–∑–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤</option>
        } else if (status === "error") {
            return <option>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</option>
        }
        
        if (filters && filters.length > 0 ) {
            return filters.map(({name, label}) => {
                // eslint-disable-next-line
                if (name === 'all')  return;

                return <option key={name} value={name}>{label}</option>
            })
        }
    }

    return (
        <form className="border p-4 shadow-lg rounded" onSubmit={onSubmitHandler}>
            <div className="mb-3">
                <label htmlFor="name" className="form-label fs-4">–ò–º—è –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è</label>
                <input 
                    required
                    type="text" 
                    name="name" 
                    className="form-control" 
                    id="name" 
                    placeholder="–ö–∞–∫ –º–µ–Ω—è –∑–æ–≤—É—Ç?"
                    value={heroName}
                    onChange={(e) => setHeroName(e.target.value)}/>
            </div>

            <div className="mb-3">
                <label htmlFor="text" className="form-label fs-4">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea
                    required
                    name="text" 
                    className="form-control" 
                    id="text" 
                    placeholder="–ß—Ç–æ —è —É–º–µ—é?"
                    style={{"height": '130px'}}
                    value={heroDescr}
                    onChange={(e) => setHeroDescr(e.target.value)}/>
            </div>

            <div className="mb-3">
                <label htmlFor="element" className="form-label">–í—ã–±—Ä–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≥–µ—Ä–æ—è</label>
                <select 
                    required
                    className="form-select" 
                    id="element" 
                    name="element"
                    value={heroElement}
                    onChange={(e) => setHeroElement(e.target.value)}>
                    <option value="">–Ø –≤–ª–∞–¥–µ—é —ç–ª–µ–º–µ–Ω—Ç–æ–º...</option>
                    {renderFilters(filters, filtersLoadingStatus)}
                </select>
            </div>

            <button type="submit" className="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
        </form>
    )
}

export default HeroesAddForm;			
```						
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			

337. ### <a name="337"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			

338. ### <a name="338"></a> Redux Toolkit –ø—Ä–∏–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### index.js		
```jsx harmony
import React from 'react';
import ReactDOM from 'react-dom';
import { Provider } from 'react-redux';
import store from './store';
import './index.css';
import App from './App';

ReactDOM.render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>,
  document.getElementById('root')
);		
```
		
### store/index.js
```jsx harmony
import { configureStore } from '@reduxjs/toolkit';
import todoReducer from './todoSlice';

export default configureStore({
  reducer: {
    todos: todoReducer,
  },
});		
```
		
### todoSlice.js
```jsx harmony
import { createSlice } from '@reduxjs/toolkit';

const todoSlice = createSlice({
    name: 'todos',
    initialState: {
        todos: [],
    },
    reducers: {
        addTodo(state, action) {
            state.todos.push({
              id: new Date().toISOString(),
              text: action.payload.text,
              completed: false,
            });
        },
        toggleComplete(state, action) {
            const toggledTodo = state.todos.find(todo => todo.id === action.payload.id);
            toggledTodo.completed = !toggledTodo.completed;
        },
        removeTodo(state, action) {
            state.todos = state.todos.filter(todo => todo.id !== action.payload.id);
        }
    },
});

export const {addTodo, toggleComplete, removeTodo} = todoSlice.actions;

export default todoSlice.reducer;		
```		

### App.jsx
```jsx harmony
import {useState} from 'react';
import { useDispatch } from 'react-redux';

import { addTodo } from './store/todoSlice';
import NewTodoForm from './components/NewTodoForm';
import TodoList from './components/TodoList';

import './App.css';


function App() {
  const [text, setText] = useState('');
  const dispatch = useDispatch();

  const handleAction = () => {
    if(text.trim().length) {
      dispatch(addTodo({text}));
      setText('');
    }
  }

  return (
    <div className='App'>
      <NewTodoForm
        value={text}
        updateText={setText}
        handleAction={handleAction}
      />
      <TodoList />
    </div>
  );
}

export default App;		
```		

### TodoList.jsx
```jsx harmony
import { useSelector } from 'react-redux';
import TodoItem from './TodoItem';

const TodoList = () => {
    const todos = useSelector(state => state.todos.todos);

  return (
    <ul>
      {todos.map((todo) => (
        <TodoItem
          key={todo.id}
          {...todo}
        />
      ))}
    </ul>
  );
};

export default TodoList;		
```		

### TodoItem.jsx
```jsx harmony
import { useDispatch } from 'react-redux';
import {toggleComplete, removeTodo} from '../store/todoSlice';

const TodoItem = ({ id, text, completed }) => {
  const dispatch = useDispatch();

  return (
    <li>
      <input
        type='checkbox'
        checked={completed}
        onChange={() => dispatch(toggleComplete({ id }))}
      />
      <span>{text}</span>
      <span onClick={() => dispatch(removeTodo({id}))}>&times;</span>
    </li>
  );
};

export default TodoItem;		
```		

### NewTodoForm.jsx
```jsx harmony
const NewTodoForm = ({ value, updateText, handleAction }) => {
  return (
    <label>
      <input
        placeholer='new todo'
        value={value}
        onChange={(e) => updateText(e.target.value)}
      />
      <button onClick={handleAction}>Add todo</button>
    </label>
  );
};

export default NewTodoForm;		
```			

## Typescript + Redux Toolkit
		
### index.tsx
```jsx harmony
import ReactDOM from 'react-dom/client';
import {Provider} from 'react-redux';
import store from './store';
import './index.css';
import App from './App';

const root = ReactDOM.createRoot(
  document.getElementById('root') as HTMLElement
);
root.render(
  <Provider store={store}>
    <App />
  </Provider>
);		
```		

### store/index.ts
```jsx harmony
import { configureStore } from '@reduxjs/toolkit';
import todoReducer from './todoSlice';

const store = configureStore({
  reducer: {
    todos: todoReducer,
  },
});

export default store;

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;		
```		

### hooks.ts
```jsx harmony
import {useDispatch, useSelector, TypedUseSelectorHook} from 'react-redux';
import type {RootState, AppDispatch} from './store';

export const useAppDispatch = () => useDispatch<AppDispatch>();
export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;		
```		

### todoSlice.ts
```jsx harmony
import { createSlice, PayloadAction } from '@reduxjs/toolkit';

type Todo = {
  id: string;
  title: string;
  completed: boolean;
}

type TodosState = {
  list: Todo[];
}

const initialState: TodosState = {
  list: [],
}

const todoSlice = createSlice({
  name: 'todos',
  initialState,
  reducers: {
    addTodo(state, action: PayloadAction<string>) {
      state.list.push({
        id: new Date().toISOString(),
        title: action.payload,
        completed: false,
      });
    },
    toggleComplete(state, action: PayloadAction<string>) {
      const toggledTodo = state.list.find(todo => todo.id === action.payload);
      if (toggledTodo) {
        toggledTodo.completed = !toggledTodo.completed;
      }
    },
    removeTodo(state, action: PayloadAction<string>) {
      state.list = state.list.filter(todo => todo.id !== action.payload);
    }
  },
});

export const { addTodo, toggleComplete, removeTodo } = todoSlice.actions;

export default todoSlice.reducer;		
```		

### App.tsx
```jsx harmony
import { useState } from 'react';
import { useAppDispatch } from './hook';
import { addTodo } from './store/todoSlice';
import NewTodoForm from './components/NewTodoForm';
import TodoList from './components/TodoList';

import './App.css';


function App() {
  const [text, setText] = useState('');
  const dispatch = useAppDispatch();

  const handleAction = () => {
    if (text.trim().length) {
      dispatch(addTodo(text));
      setText('');
    }
  }

  return (
    <div className='App'>
      <NewTodoForm
        value={text}
        updateText={setText}
        handleAction={handleAction}
      />
      <TodoList />
    </div>
  );
}

export default App;		
```		

### TodoList.tsx
```jsx harmony
import { useAppSelector } from '../hook';
import TodoItem from './TodoItem';

const TodoList: React.FC = () => {
  const todos = useAppSelector(state => state.todos.list);

  return (
    <ul>
      {todos.map((todo) => (
        <TodoItem
          key={todo.id}
          {...todo}
        />
      ))}
    </ul>
  );
};

export default TodoList;		
```		

### TodoItem.tsx
```jsx harmony
import { useAppDispatch } from '../hook';
import { toggleComplete, removeTodo } from '../store/todoSlice';

interface TodoItemProps {
  id: string,
  title: string,
  completed: boolean,
}

const TodoItem: React.FC<TodoItemProps> = ({ id, title, completed }) => {
  const dispatch = useAppDispatch();

  return (
    <li>
      <input
        type='checkbox'
        checked={completed}
        onChange={() => dispatch(toggleComplete(id))}
      />
      <span>{title}</span>
      <span onClick={() => dispatch(removeTodo(id))}>&times;</span>
    </li>
  );
};

export default TodoItem;		
```
		
### NewTodoForm.tsx
```jsx harmony
interface NewTodoFormProps {
  value: string,
  updateText: (str: string) => void,
  handleAction: () => void,
}

const NewTodoForm: React.FC<NewTodoFormProps> = ({ value, updateText, handleAction }) => {
  return (
    <label>
      <input
        placeholder='new todo'
        value={value}
        onChange={(e) => updateText(e.target.value)}
      />
      <button onClick={handleAction}>Add todo</button>
    </label>
  );
};

export default NewTodoForm;		
```				
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			

339. ### <a name="339"></a> Redux Toolkit –ø—Ä–∏–º–µ—Ä 2

### index.js
```jsx harmony
import React from 'react';
import ReactDOM from 'react-dom';
import { store } from './store/store';
import { Provider } from 'react-redux';
import './index.css';
import App from './App';

ReactDOM.render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>,
  document.getElementById('root')
);		
```		

### store.js
```jsx harmony
import { configureStore } from '@reduxjs/toolkit';
import userSlice from '../features/user/userSlice';
import todoSlice from '../features/todo/todoSlice';
import postSlice from '../features/post/postSlice';

export const store = configureStore({
  reducer: {
    user: userSlice,
    todo: todoSlice,
    post: postSlice,
  },
});		
```		

### App.js
```jsx harmony
import React from 'react';
import Form from './components/Form';
import TodoItem from './components/TodoItem';
import User from './components/User';
import Posts from './components/Posts';
import { useSelector } from 'react-redux';

function App() {
  return (
    <div className='min-h-screen h-full w-screen bg-indigo-400'>
      <div className='container mx-auto px-4'>
        <header className='flex gap-20 '>
          <div className='w-1/3'>
            <h1 className='font-bold my-5'>Redux Toolkit State Change</h1>
            <User />
          </div>
          <div className='w-1/3'>
            <h1 className='font-bold my-5'>Redux Toolkit Todo App</h1>
            <Form />

            {todos.map((todo) => (
              <TodoItem key={todo.id} todo={todo} />
            ))}
          </div>
          <div className='w-1/3'>
            <h1 className='font-bold my-5'>Redux Toolkit Async Thunk</h1>
            <Posts />
          </div>
        </header>
      </div>
    </div>
  );
}

export default App;		
```

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 1	
		
### userSlice.js		
```jsx harmony
import { createSlice } from '@reduxjs/toolkit';

const initialState = {
  firstName: '',
  lastName: '',
};

export const userSlice = createSlice({
  name: 'user',
  initialState,
  reducers: {
    setFirstName: (state, action) => {
      state.firstName = action.payload;
    },
    setLastName: (state, action) => {
      state.lastName = action.payload;
    },
  },
});

export const { setFirstName, setLastName } = userSlice.actions;

export default userSlice.reducer;		
```		

### User.js
```jsx harmony
import React from 'react';
import FirstName from './FirstName';
import LastName from './LastName';
import { useDispatch } from 'react-redux';
import { setFirstName, setLastName } from '../features/user/userSlice';

const User = () => {
  const dispatch = useDispatch();

  return (
    <div className='flex flex-col'>
      <input
        type='text'
        placeholder='First Name'
        onChange={(e) => {
          dispatch(setFirstName(e.target.value));
        }}
        className='w-full p-1 mb-2 focus:outline-none focus:border-lime-500 focus: border-2 placeholder:text-sm'
      />
      <input
        type='text'
        placeholder='Second Name'
        onChange={(e) => {
          dispatch(setLastName(e.target.value));
        }}
        className='w-full p-1 mb-2 focus:outline-none focus:border-lime-500 focus: border-2 placeholder:text-sm'
      />
      <div className='flex gap-20 py-5'>
        <div className='flex flex-col'>
          <div className='flex font-light'>First Name:</div>
          <div className='flex'>
            <FirstName />
          </div>
        </div>

        <div className='flex flex-col'>
          <div className='flex font-light'>Last Name:</div>
          <div className='flex'>
            <LastName />
          </div>
        </div>
      </div>
    </div>
  );
};

export default User;		
```		

### FirstName.js
```jsx harmony
import React from 'react';
import { useSelector } from 'react-redux';

const FirstName = () => {
  const name = useSelector((state) => state.user.firstName);

  return <div className='font-bold'>{name}</div>;
};

export default FirstName;		
```

### LastName
```jsx harmony
import React from 'react';
import { useSelector } from 'react-redux';

const LastName = () => {
  const lastname = useSelector((state) => state.user.lastName);

  return <div className='font-bold'>{lastname}</div>;
};

export default LastName;		
```					

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 2

### App.js
```jsx harmony
import React from 'react';
import Form from './components/Form';
import TodoItem from './components/TodoItem';
import User from './components/User';
import Posts from './components/Posts';
import { useSelector } from 'react-redux';

function App() {
  const todos = useSelector((state) => state.todo.todos);
		
  return (
    <div className='min-h-screen h-full w-screen bg-indigo-400'>
      <div className='container mx-auto px-4'>
        <header className='flex gap-20 '>
          <div className='w-1/3'>
            <h1 className='font-bold my-5'>Redux Toolkit State Change</h1>
            <User />
          </div>
          <div className='w-1/3'>
            <h1 className='font-bold my-5'>Redux Toolkit Todo App</h1>
            <Form />

            {todos?.map((todo) => (
              <TodoItem key={todo.id} todo={todo} />
            ))}
          </div>
          <div className='w-1/3'>
            <h1 className='font-bold my-5'>Redux Toolkit Async Thunk</h1>
            <Posts />
          </div>
        </header>
      </div>
    </div>
  );
}

export default App;		
```		
		
### todoSlice.js
```jsx harmony
import { createSlice } from '@reduxjs/toolkit';

const initialState = {
  todos: [],
};

export const todoSlice = createSlice({
  name: 'todos',
  initialState,
  reducers: {
    addTodo: (state, action) => {
      state.todos.push(action.payload);
    },
    toggleCompletedTodo: (state, action) => {
      const toggleTodo = state.todos.find((todo) => todo.id === action.payload);
      toggleTodo.completed = !toggleTodo.completed;
    },
    removeTodo: (state, action) => {
      state.todos = state.todos.filter((todo) => todo.id !== action.payload);
    },
  },
});

export const { addTodo, toggleCompletedTodo, removeTodo } = todoSlice.actions;
export default todoSlice.reducer;		
```		

### Form.js
```jsx harmony
import React from 'react';
import { useDispatch } from 'react-redux';
import { addTodo } from '../features/todo/todoSlice';
import { v4 } from 'uuid';

const Form = () => {
  const dispatch = useDispatch();
  const [todoValue, setTodoValue] = React.useState('');

  const addTodoHandler = () => {
    const todo = {
      id: v4(),
      text: todoValue,
      completed: false,
    };

    dispatch(addTodo(todo))
    setTodoValue('')
  };

  return (
    <form className='w-full flex' onSubmit={(e) => e.preventDefault()}>
      <input
        type='text'
        value={todoValue}
        placeholder='Type something...'
        onChange={(e) => setTodoValue(e.target.value)}
        className='w-full p-1 focus:outline-none focus:border-lime-500 focus: border-2 placeholder:text-sm'
      />
      <button
        type='submit'
        className='shrink-0 bg-lime-300  hover:bg-lime-400 transition-all px-3 text-sm'
        onClick={() => addTodoHandler()}
      >
        Submit
      </button>
    </form>
  );
};

export default Form;		
```		

### TodoItem.js
```jsx harmony
import React from 'react';
import { useDispatch } from 'react-redux';
import { toggleCompletedTodo, removeTodo } from '../features/todo/todoSlice';

const TodoItem = ({ todo }) => {
  const dispatch = useDispatch();

  const toggleTodoHandler = (id) => {
    dispatch(toggleCompletedTodo(id));
  };

  const removeTodoHandler = (id) => {
    dispatch(removeTodo(id));
  };

  return (
    <div className='flex justify-between items-center my-2'>
      <div
        onClick={() => toggleTodoHandler(todo.id)}
        className='text-sm px-4 py-2 cursor-pointer bg-lime-300 hover:bg-lime-400'
      >
        Complete
      </div>
      <div
        className={`text-sm ${
          todo.completed ? 'line-through font-medium text-lime-400' : ''
        }`}
      >
        {todo.text}
      </div>
      <div
        onClick={() => removeTodoHandler(todo.id)}
        className='text-sm px-4 py-2 flex bg-red-400 hover:bg-red-500 transition-all text-white cursor-pointer'
      >
        Delete
      </div>
    </div>
  );
};

export default TodoItem;		
```		

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 3

### postSlice.js
```jsx harmony
import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';
import axios from 'axios';

const initialState = {
  posts: [],
};

export const getPosts = createAsyncThunk(
  'posts/getPosts',
  async (_, { rejectWithValue, dispatch }) => {
    const res = await axios.get('https://jsonplaceholder.typicode.com/posts');
    dispatch(setPosts(res.data));
  }
);

export const deletePostById = createAsyncThunk(
  'posts/deletePostById',
  async (id, { rejectWithValue, dispatch }) => {
    await axios.delete(`https://jsonplaceholder.typicode.com/posts/${id}`);
    dispatch(deletePost(id));
  }
);

export const postSlice = createSlice({
  name: 'posts',
  initialState,
  reducers: {
    setPosts: (state, action) => {
      state.posts = action.payload;
    },
    deletePost: (state, action) => {
      state.posts = state.posts.filter((post) => post.id !== action.payload);
    },
  },
  extraReducers: {
    [getPosts.fulfilled]: () => console.log('getPosts: fullfiled'),
    [getPosts.pending]: () => console.log('getPosts: pending'),
    [getPosts.rejected]: () => console.log('getPosts: rejected'),
    [deletePostById.fulfilled]: () => console.log('deletePostById: fullfiled'),
    [deletePostById.pending]: () => console.log('deletePostById: pending'),
    [deletePostById.rejected]: () => console.log('deletePostById: rejected'),
  },
});

export const { setPosts, deletePost } = postSlice.actions;

export default postSlice.reducer;		
```		

### Posts.js
```jsx harmony
import React from 'react';
import PostItem from './PostItem';
import { useDispatch, useSelector } from 'react-redux';
import { getPosts } from '../features/post/postSlice';

const Posts = () => {
  const dispatch = useDispatch();
  const posts = useSelector((state) => state.post.posts);

  return (
    <div>
      <button
        onClick={() => dispatch(getPosts())}
        type='submit'
        className='bg-lime-300  hover:bg-lime-400 transition-all p-2 text-sm'
      >
        Get posts
      </button>

      {posts?.map((post) => (
        <PostItem key={post.title} post={post} />
      ))}
    </div>
  );
};

export default Posts;		
```		

### PostItem.js
```jsx harmony
import React from 'react';
import { deletePostById } from '../features/post/postSlice';
import { useDispatch } from 'react-redux';

const PostItem = ({ post }) => {
  const dispatch = useDispatch();

  return (
    <div
      onClick={() => dispatch(deletePostById(post.id))}
      className='flex w-full bg-indigo-500 hover:bg-indigo-300 transition-all py-1 px-2 text-white rounded-sm cursor-pointer mt-4'
    >
      {post.title}
    </div>
  );
};

export default PostItem;		
```					
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			

340. ### <a name="340"></a> Redux Toolkit createAsyncThunk

### index.js
```jsx harmony
import React from 'react';
import ReactDOM from 'react-dom';
import { Provider } from 'react-redux';
import store from './store';
import './index.css';
import App from './App';

ReactDOM.render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>,
  document.getElementById('root')
);		
```		
 
### store/index.js
```jsx harmony
import { configureStore } from '@reduxjs/toolkit';
import todoReducer from './todoSlice';

export default configureStore({
  reducer: {
    todos: todoReducer,
  },
});		
```		

### todoSlice.js
```jsx harmony
import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';

export const fetchTodos = createAsyncThunk(
    'todos/fetchTodos',
    async function(_, {rejectWithValue}) {
        try {
            const response = await fetch('https://jsonplaceholder.typicode.com/todos?_limit=10');
            
            if (!response.ok) {
                throw new Error('Server Error!');
            }
    
            const data = await response.json();
    
            return data;
        } catch (error) {
            return rejectWithValue(error.message);
        }
    }
);

export const deleteTodo = createAsyncThunk(
    'todos/deleteTodo',
    async function(id, {rejectWithValue, dispatch}) {
        try {
            const response = await fetch(`https://jsonplaceholder.typicode.com/todos/${id}`, {
                method: 'DELETE',
            })

            if (!response.ok) {
                throw new Error('Can\'t delete task. Server error.');
            }

            dispatch(removeTodo({id}));

        } catch (error) {
            return rejectWithValue(error.message);
        }
    }
);

export const toggleStatus = createAsyncThunk(
    'todos/toggleStatus',
    async function (id, {rejectWithValue, dispatch, getState}) {
        const todo = getState().todos.todos.find(todo => todo.id === id);

        try {
            const response = await fetch(`https://jsonplaceholder.typicode.com/todos/${id}`, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    completed: !todo.completed,
                })
            });

            if (!response.ok) {
                throw new Error('Can\'t toggle status. Server error.');
            }

            dispatch(toggleComplete({id}));

        } catch (error) {
            return rejectWithValue(error.message)
        }
    }
);

export const addNewTodo = createAsyncThunk(
    'todos/addNewTodo',
    async function (text, {rejectWithValue, dispatch}) {
        try {
            const todo = {
                title: text,
                userId: 1,
                completed: false,
            };

            const response = await fetch('https://jsonplaceholder.typicode.com/todos', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(todo)
            });

            if (!response.ok) {
                throw new Error('Can\'t add task. Server error.');
            }

            const data = await response.json();
            dispatch(addTodo(data));

        } catch (error) {
            return rejectWithValue(error.message);
        }
    }
);

const setError = (state, action) => {
    state.status = 'rejected';
    state.error = action.payload;
}

const todoSlice = createSlice({
    name: 'todos',
    initialState: {
        todos: [],
        status: null,
        error: null,
    },
    reducers: {
        addTodo(state, action) {
            state.todos.push(action.payload);
        },
        toggleComplete(state, action) {
            const toggledTodo = state.todos.find(todo => todo.id === action.payload.id);
            toggledTodo.completed = !toggledTodo.completed;
        },
        removeTodo(state, action) {
            state.todos = state.todos.filter(todo => todo.id !== action.payload.id);
        }
    },
    extraReducers: {
        [fetchTodos.pending]: (state) => {
            state.status = 'loading';
            state.error = null;
        },
        [fetchTodos.fulfilled]: (state, action) => {
            state.status = 'resolved';
            state.todos = action.payload;
        },
        [fetchTodos.rejected]: setError,
        [deleteTodo.rejected]: setError,
        [toggleStatus.rejected]: setError,
    },
});

const {addTodo, toggleComplete, removeTodo} = todoSlice.actions;

export default todoSlice.reducer;		
```		

### App.js
```jsx harmony
import {useState, useEffect} from 'react';
import { useDispatch, useSelector } from 'react-redux';

import { addNewTodo, fetchTodos } from './store/todoSlice';
import NewTodoForm from './components/NewTodoForm';
import TodoList from './components/TodoList';

import './App.css';


function App() {
  const [text, setText] = useState('');
  const {status, error} = useSelector(state => state.todos);
  const dispatch = useDispatch();

  const handleAction = () => {
    if(text.trim().length) {
      dispatch(addNewTodo(text));
      setText('');
    }
  }

  useEffect(() => {
    dispatch(fetchTodos());
  }, [dispatch]);

  return (
    <div className='App'>
      <NewTodoForm
        value={text}
        updateText={setText}
        handleAction={handleAction}
      />

      {status === 'loading' && <h2>Loading...</h2>}
      {error &&  <h2>An error occured: {error}</h2>}

      <TodoList />
    </div>
  );
}

export default App;		
```		

### TodoList.js
```jsx harmony
import { useSelector } from 'react-redux';
import TodoItem from './TodoItem';

const TodoList = () => {
    const todos = useSelector(state => state.todos.todos);

  return (
    <ul>
      {todos.map((todo) => (
        <TodoItem
          key={todo.id}
          {...todo}
        />
      ))}
    </ul>
  );
};

export default TodoList;		
```		

### TodoItem.js
```jsx harmony
import { useDispatch } from 'react-redux';
import {toggleStatus, deleteTodo} from '../store/todoSlice';

const TodoItem = ({ id, title, completed }) => {
  const dispatch = useDispatch();

  return (
    <li>
      <input
        type='checkbox'
        checked={completed}
        onChange={() => dispatch(toggleStatus(id))}
      />
      <span>{title}</span>
      <span onClick={() => dispatch(deleteTodo(id))}>&times;</span>
    </li>
  );
};

export default TodoItem;		
```

### NewTodoForm.js
```jsx harmony
const NewTodoForm = ({ value, updateText, handleAction }) => {
  return (
    <label>
      <input
        placeholer='new todo'
        value={value}
        onChange={(e) => updateText(e.target.value)}
      />
      <button onClick={handleAction}>Add todo</button>
    </label>
  );
};

export default NewTodoForm;		
```		

## Typescript + Redux Toolkit
		
### index.tsx
```jsx harmony
import ReactDOM from 'react-dom/client';
import {Provider} from 'react-redux';
import store from './store';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';

const root = ReactDOM.createRoot(
  document.getElementById('root') as HTMLElement
);
root.render(
  <Provider store={store}>
    <App />
  </Provider>
);		
```		

### store/index.ts
```jsx harmony
import { configureStore } from '@reduxjs/toolkit';
import todoReducer from './todoSlice';

const store = configureStore({
  reducer: {
    todos: todoReducer,
  },
});

export default store;

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;		
```		

### hooks.ts
```jsx harmony
import {useDispatch, useSelector, TypedUseSelectorHook} from 'react-redux';
import type {RootState, AppDispatch} from './store';

export const useAppDispatch = () => useDispatch<AppDispatch>();
export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;		
```		

### todoSlice.ts
```jsx harmony
import { createSlice, PayloadAction, createAsyncThunk, AnyAction } from '@reduxjs/toolkit';

type Todo = {
  id: string;
  title: string;
  completed: boolean;
}

type TodosState = {
  list: Todo[];
  loading: boolean;
  error: string | null;
}
export const fetchTodos = createAsyncThunk<Todo[], undefined, {rejectValue: string}>(
    'todos/fetchTodos',
    async function (_, { rejectWithValue }) {
      const response = await fetch('https://jsonplaceholder.typicode.com/todos?_limit=10');

      if (!response.ok) {
        return rejectWithValue('Server Error!');
      }

      const data = await response.json();

      return data;
    }
);

export const addNewTodo = createAsyncThunk<Todo, string, { rejectValue: string }>(
  'todos/addNewTodo',
  async function (text, { rejectWithValue }) {
      const todo = {
        title: text,
        userId: 1,
        completed: false,
      };

      const response = await fetch('https://jsonplaceholder.typicode.com/todos', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(todo)
      });

      if (!response.ok) {
        return rejectWithValue('Can\'t add task. Server error.');
      }

      return (await response.json()) as Todo;
  }
);

export const toggleStatus = createAsyncThunk<Todo, string, { rejectValue: string, state: { todos: TodosState} }>(
  'todos/toggleStatus',
  async function (id, { rejectWithValue, getState }) {
    const todo = getState().todos.list.find(todo => todo.id === id);

    if (todo) {
      const response = await fetch(`https://jsonplaceholder.typicode.com/todos/${id}`, {
        method: 'PATCH',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          completed: !todo.completed,
        })
      });
  
      if (!response.ok) {
        return rejectWithValue('Can\'t toggle status. Server error.');
      }
  
      return (await response.json()) as Todo; 
    }

    return rejectWithValue('No such todo in the list!')
  }
);

export const deleteTodo = createAsyncThunk<string, string, { rejectValue: string }>(
  'todos/deleteTodo',
  async function (id, { rejectWithValue }) {
    const response = await fetch(`https://jsonplaceholder.typicode.com/todos/${id}`, {
      method: 'DELETE',
    })

    if (!response.ok) {
      return rejectWithValue('Can\'t delete task. Server error.');
    }

    return id;
  }
);

const initialState: TodosState = {
  list: [],
  loading: false,
  error: null,
}

const todoSlice = createSlice({
  name: 'todos',
  initialState,
  reducers: {},
  extraReducers: (builder) => {
    builder
      .addCase(fetchTodos.pending, (state) => {
        state.loading = true;
        state.error = null;
      })
      .addCase(fetchTodos.fulfilled, (state, action) => {
        state.list = action.payload;
        state.loading = false;
      })
      .addCase(addNewTodo.pending, (state) => {
        state.error = null;
      })
      .addCase(addNewTodo.fulfilled, (state, action) => {
        state.list.push(action.payload);
      })
      .addCase(toggleStatus.fulfilled, (state, action) => {
        const toggledTodo = state.list.find(todo => todo.id === action.payload.id);
        if (toggledTodo) {
          toggledTodo.completed = !toggledTodo.completed;
        }
      })
      .addCase(deleteTodo.fulfilled, (state, action) => {
        state.list = state.list.filter(todo => todo.id !== action.payload);
      })
      .addMatcher(isError, (state, action: PayloadAction<string>) => {
        state.error = action.payload;
        state.loading = false;
      });
  }
});

// export const { addTodo, toggleComplete, removeTodo } = todoSlice.actions;

export default todoSlice.reducer;

function isError(action: AnyAction) {
  return action.type.endsWith('rejected');
}		
```		

### App.tsx
```jsx harmony
import { useState, useEffect } from 'react';
import { useAppDispatch, useAppSelector } from './hook';
import { fetchTodos, addNewTodo } from './store/todoSlice';
import NewTodoForm from './components/NewTodoForm';
import TodoList from './components/TodoList';

import './App.css';


function App() {
  const [text, setText] = useState('')
  const { loading, error } = useAppSelector(state => state.todos);;
  const dispatch = useAppDispatch();

  const handleAction = () => {
    if (text.trim().length) {
      dispatch(addNewTodo(text));
      setText('');
    }
  }

  useEffect(() => {
    dispatch(fetchTodos());
  }, [dispatch]);

  return (
    <div className='App'>
      <NewTodoForm
        value={text}
        updateText={setText}
        handleAction={handleAction}
      />

      {loading && <h2>Loading...</h2>}
      {error && <h2>An error occured: {error}</h2>}
      <TodoList />
    </div>
  );
}

export default App;		
```		

### TodoList.tsx
```jsx harmony
import { useAppSelector } from '../hook';
import TodoItem from './TodoItem';

const TodoList: React.FC = () => {
  const todos = useAppSelector(state => state.todos.list);

  return (
    <ul>
      {todos.map((todo) => (
        <TodoItem
          key={todo.id}
          {...todo}
        />
      ))}
    </ul>
  );
};

export default TodoList;		
```		

### TodoItem.tsx
```jsx harmony
import { useAppDispatch } from '../hook';
import { toggleStatus, deleteTodo } from '../store/todoSlice';

interface TodoItemProps {
  id: string,
  title: string,
  completed: boolean,
}

const TodoItem: React.FC<TodoItemProps> = ({ id, title, completed }) => {
  const dispatch = useAppDispatch();

  return (
    <li>
      <input
        type='checkbox'
        checked={completed}
        onChange={() => dispatch(toggleStatus(id))}
      />
      <span>{title}</span>
      <span onClick={() => dispatch(deleteTodo(id))}>&times;</span>
    </li>
  );
};

export default TodoItem;		
```		

### NewTodoForm.tsx
```jsx harmony
interface NewTodoFormProps {
  value: string,
  updateText: (str: string) => void,
  handleAction: () => void,
}

const NewTodoForm: React.FC<NewTodoFormProps> = ({ value, updateText, handleAction }) => {
  return (
    <label>
      <input
        placeholder='new todo'
        value={value}
        onChange={(e) => updateText(e.target.value)}
      />
      <button onClick={handleAction}>Add todo</button>
    </label>
  );
};

export default NewTodoForm;		
```				
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			

341. ### <a name="341"></a> RTK Query

### index.js
```jsx harmony
import React from 'react';
import ReactDOM from 'react-dom';
import { Provider } from 'react-redux';
import './index.css';
import App from './App';
import { store } from './redux';

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById('root')
);		
```		

### db.json
```jsx harmony
{
  "goods": [
    {
      "id": 1,
      "name": "Milk"
    },
    {
      "id": 2,
      "name": "bananas"
    },
    {
      "id": 3,
      "name": "icecream"
    }
  ]
}		
```		

### redux/index.js
```jsx harmony
export * from './store';
export * from './goodsApi';		
```		

### redux/goodsApi.js
```jsx harmony
import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

export const goodsApi = createApi({
    reducerPath: 'goodsApi',
    tagTypes: ['Products'],
    baseQuery: fetchBaseQuery({baseUrl: 'http://localhost:3001/'}),
    endpoints: (build) => ({
        getGoods: build.query({
            query: (limit = '') => `goods?${limit && `_limit=${limit}`}`,
            providesTags: (result) => result
              ? [
                  ...result.map(({ id }) => ({ type: 'Products', id })),
                  { type: 'Products', id: 'LIST' },
                ]
              : [{ type: 'Products', id: 'LIST' }],
        }),
        addProduct: build.mutation({
            query: (body) => ({
                url: 'goods',
                method: 'POST',
                body,
            }),
            invalidatesTags: [{type: 'Products', id: 'LIST'}]
        }),
        deleteProduct: build.mutation({
            query: (id) => ({
                url: `goods/${id}`,
                method: 'DELETE',
            }),
            invalidatesTags: [{type: 'Products', id: 'LIST'}]
        })
    })
});

export const {useGetGoodsQuery, useAddProductMutation, useDeleteProductMutation} = goodsApi;		
```		
		
### redux/store.js
```jsx harmony
import { configureStore } from '@reduxjs/toolkit';
import { goodsApi } from './goodsApi';

export const store = configureStore({
    reducer: {
        [goodsApi.reducerPath]: goodsApi.reducer,
    },
    middleware: (getDefaultMiddlware) => getDefaultMiddlware().concat(goodsApi.middleware)
});		
```		

### App.js
```jsx harmony
import { useState } from 'react';
import { useGetGoodsQuery, useAddProductMutation, useDeleteProductMutation } from './redux';

function App() {
  const [count, setCount] = useState('');
  const [newProduct, setNewProduct] = useState('');
  const {data = [], isLoading} = useGetGoodsQuery(count);
  const [addProduct, {isError}] = useAddProductMutation();
  const [deleteProduct] = useDeleteProductMutation();

  const handleAddProduct = async () => {
    if(newProduct) {
      await addProduct({name: newProduct}).unwrap();
      setNewProduct('');
    }
  }

  const handleDeleteProduct = async (id) => {
    await deleteProduct(id).unwrap();
  }

  if (isLoading) return <h1>Loading...</h1>

  return (
    <div>
      <div>
        <input
          type="text"
          value={newProduct}
          onChange={(e) => setNewProduct(e.target.value)}
        />
        <button onClick={handleAddProduct}>Add product</button>
      </div>
      <div>
        <select value={count} onChange={(e) => setCount(e.target.value)}>
          <option value="">all</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <ul>
        {data.map(item => (
          <li key={item.id} onClick={() => handleDeleteProduct(item.id)}>
            {item.name}
          </li>
        ))}
      </ul>
    </div>
  );
}

export default App;		
```		
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**		

342. ### <a name="342"></a> 
		
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**		
		
343. ### <a name="343"></a> 
		
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	
		
344. ### <a name="344"></a> 
		
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	
		
345. ### <a name="345"></a> 
		
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	
		
346. ### <a name="346"></a> 
		
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	
		
347. ### <a name="347"></a> 
		
		
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			
		
350. ### <a name="350"></a> Redux

 Redux - —ç—Ç–æ —Ü–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –Ω–æ –≤—ã —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω—ã —É—á–∏—Ç—ã–≤–∞—Ç—å, –ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –æ–Ω –¥–ª—è –≤–∞—à–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redux —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –∫—Ç–æ-—Ç–æ —Å–∫–∞–∑–∞–ª, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ - –ø–æ—Ç—Ä–∞—Ç—å—Ç–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –≤—ã–≥–æ–¥—ã –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã —Å –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.
	
*Redux* - —ç—Ç–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π (–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è JavaScript-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Flux. Redux –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å React –∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π. –û–Ω –ª–µ–≥–∫–∏–π (–æ–∫–æ–ª–æ 2 –ö–±) –∏ –Ω–µ –∏–º–µ–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.	

![2](https://user-images.githubusercontent.com/80325645/152787114-911ae428-304e-49c9-bafd-63a93d54466a.jpg)  
	  
### Redux —Å–ª–µ–¥—É–µ—Ç —Ç—Ä–µ–º —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:

1. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã: —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–º –æ–±—ä–µ–∫—Ç–∞ - –≤ –æ–¥–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ-–¥–µ—Ä–µ–≤–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –∏ –æ—Ç–ª–∞–¥–∫—É –∏–ª–∏ –∏–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è: –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∑–∞–ø—É—Å–∫–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ - –æ–±—ä–µ–∫—Ç–µ, –æ–ø–∏—Å—ã–≤–∞—é—â–µ–º –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–µ–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –Ω–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –Ω–∏ —Å–µ—Ç–µ–≤—ã–µ –∫–æ–ª–ª–±–µ–∫–∏ –Ω–µ –±—É–¥—É –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é
3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è —Å –ø–æ–º–æ—â—å—é "—á–∏—Å—Ç—ã—Ö" —Ñ—É–Ω–∫—Ü–∏–π: –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≥–æ, –∫–∞–∫ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä–µ–¥—É–∫—Ç–æ—Ä—ã (reducers). –†–µ–¥—É–∫—Ç–æ—Ä—ã - —ç—Ç–æ "—á–∏—Å—Ç—ã–µ" —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ –Ω–æ–≤–æ–µ


### –í —á–µ–º –∑–∞–∫–ª—é—á–∞—é—Ç—Å—è –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ Redux?***

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**

* –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª—é–±–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –ø–æ–ª—É—á–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–æ–ø–æ–≤
* –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–º—É —Å—Ä–∞–≤–Ω–µ–Ω–∏—é –Ω–æ–≤–æ–≥–æ –∏ —Å—Ç–∞—Ä–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
* –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ UI –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –æ–±–ª–µ–≥—á–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
* –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∏–ª–∏ –æ—Ç–º–µ–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**

* –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è. –õ—é–±–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é
* –ú–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω
* –ü–æ—Å–∫–æ–ª—å–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–º, —Ä–µ–¥—É–∫—Ç–æ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç –µ–≥–æ, –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤–æ–∑–≤—Ä–∞—â–∞—è –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ –≤–ª–µ—á–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –ø–∞–º—è—Ç–∏	
	
	
*Redux –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∏—Å–∞–Ω —Ç—Ä–µ–º—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏:*

### –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã
	
–°–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ–≥–æ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –¥–µ—Ä–µ–≤–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Å—Ç–æ—Ä–∞.

–≠—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–∏–ª–∏–π. –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –º—ã –∏–º–µ–µ–º –¥–µ–ª–æ —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –¥–µ—Ä–µ–≤–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ò —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –¥–µ—Ä–µ–≤–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ç–∏–ø–∞ Undo/Redo –∏–∑ –∫–æ—Ä–æ–±–∫–∏.
```jsx harmony
console.log(store.getState())

{
  visibilityFilter: 'SHOW_ALL',
  todos: [
    {
      text: 'Consider using Redux',
      completed: true,
    },
    {
      text: 'Keep all state in a single tree',
      completed: false
    }
  ]
}
```
	
### –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
	
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî —ç—Ç–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —ç–∫—à–µ–Ω ‚Äî –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç, —á—Ç–æ —Å–ª—É—á–∏—Ç—Å—è.

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏, —Ä–µ–∞–≥–∏—Ä—É—é—â–∏–µ –Ω–∞ —Å–æ–±—ã—Ç–∏—è —Å–µ—Ç–∏ (network callbacks), –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–∑–º–µ–Ω—è—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é. –ü–æ—Å–∫–æ–ª—å–∫—É –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ, –ø–æ—ç—Ç–æ–º—É –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–ª–µ–¥–∏—Ç—å –∑–∞ "–≥–æ–Ω–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π". –≠–∫—à–µ–Ω—ã ‚Äî —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –ø—Ä–æ—Å—Ç—ã–µ –æ–±—ä–µ–∫—Ç—ã, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω—ã, —Å–µ—Ä–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã, —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏ –∑–∞—Ç–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
```jsx harmony
store.dispatch({
  type: 'COMPLETE_TODO',
  index: 1
})

store.dispatch({
  type: 'SET_VISIBILITY_FILTER',
  filter: 'SHOW_COMPLETED'
})
```
	
### –ú—É—Ç–∞—Ü–∏–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã, –∫–∞–∫ —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
	
–î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≥–æ, –∫–∞–∫ –¥–µ—Ä–µ–≤–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±—É–¥–µ—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ —ç–∫—à–µ–Ω–∞–º–∏, –≤—ã –ø–∏—à–µ—Ç–µ —á–∏—Å—Ç—ã–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã.

–†–µ–¥—å—é—Å–µ—Ä—ã ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±–µ—Ä—É—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —ç–∫—à–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω—è—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å —Å –æ–¥–Ω–æ–≥–æ —Ä–µ–¥—å—é—Å–µ—Ä–∞, –Ω–æ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º, –∫–æ–≥–¥–∞ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞—Å—Ç–µ—Ç—Å—è, –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –µ–≥–æ –Ω–∞ –±–æ–ª–µ–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–∞–≤–ª—è—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —á–∞—Å—Ç—è–º–∏ –¥–µ—Ä–µ–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ü–æ—Å–∫–æ–ª—å–∫—É —Ä–µ–¥—å—é—Å–µ—Ä—ã ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –≤—ã –º–æ–∂–µ—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –¥–∞–∂–µ –ø–∏—Å–∞—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã –¥–ª—è –æ–±—â–∏—Ö –∑–∞–¥–∞—á, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏.
```jsx harmony
function visibilityFilter(state = 'SHOW_ALL', action) {
  switch (action.type) {
    case 'SET_VISIBILITY_FILTER':
      return action.filter
    default:
      return state
  }
}

function todos(state = [], action) {
  switch (action.type) {
    case 'ADD_TODO':
      return [
        ...state,
        {
          text: action.text,
          completed: false
        }
      ]
    case 'COMPLETE_TODO':
      return state.map((todo, index) => {
        if (index === action.index) {
          return Object.assign({}, todo, {
            completed: true
          })
        }
        return todo
      })
    default:
      return state
  }
}

import { combineReducers, createStore } from 'redux'
let reducer = combineReducers({ visibilityFilter, todos })
let store = createStore(reducer)	
```

	
### –°—É—â–Ω–æ—Å—Ç–∏ –≤ React:
- Actions
- Reducers
- Store
- Dispatch	
	
	
	
*Flux* - —ç—Ç–æ *–ø–∞—Ä–∞–¥–∏–≥–º–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π*, —è–≤–ª—è—é—â–∞—è—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –±–æ–ª–µ–µ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É MVC. –≠—Ç–æ –Ω–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∞ –Ω–æ–≤—ã–π –≤–∏–¥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è React —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö. Facebook –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –≤ —Å–≤–æ–∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.	
	
### –û—Ç–ª–∏—á–∏—è –º–µ–∂–¥—É Redux –∏ Flux –º–æ–∂–Ω–æ —Å–≤–µ—Å—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É:

1. –ù–µ–¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –º—É—Ç–∞—Ü–∏–π: –≤–æ Flux —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω—è–µ–º—ã–º, –∞ Redux —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—ã–ª–æ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–º, –∏ –º–Ω–æ–≥–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è Redux –∏—Å—Ö–æ–¥—è—Ç –∏–∑ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ –≤—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç–µ –º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é. –í—ã –º–æ–∂–µ—Ç–µ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —Ç–∞–∫–∏—Ö –ø–∞–∫–µ—Ç–æ–≤, –∫–∞–∫ `redux-immutable-state-invariant`, `Immutable.js` –∏–ª–∏ —É—Å–ª–æ–≤–∏–≤—à–∏—Å—å —Å –¥—Ä—É–≥–∏–º–∏ —á–ª–µ–Ω–∞–º–∏ –∫–æ–º–∞–Ω–¥—ã –æ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
2. –û—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å –≤ –≤—ã–±–æ—Ä–µ –±–∏–±–ª–∏–æ—Ç–µ–∫: Flux –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–µ—à–∞—Ç—å —Ç–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–∞–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (–ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ) –∫–æ–¥–∞ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Ñ–æ—Ä–º, —è–≤–Ω–æ, –∞ Redux –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è (middleware) –∏ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–π —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, —á—Ç–æ –ø–æ—Ä–æ–¥–∏–ª–æ –±–æ–≥–∞—Ç—É—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—É
3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Flow: Flux –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –æ—á–µ–Ω—å –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤, –∞ Redux –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–∫–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
351. ### <a name="351"></a> connect. HOC

 ### –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ —Ç–∞–∫–æ–µ connect.
	
–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `mapStateToProps()`:** –æ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤–∞–º–∏ –ø—Ä–æ–ø—ã
2. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–ø—ã –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É:** –æ–±—ä–µ–∫—Ç, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–π `mapStateToProps()` –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É. –í—ã –º–æ–∂–µ—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `connect()` –∏–∑ `react-redux`:

 ```jsx harmony
 import React from 'react'
 import { connect } from 'react-redux'

 class App extends React.Component {
   render() {
     return <div>{this.props.containerData}</div>
   }
 }

 function mapStateToProps(state) {
   return { containerData: state.data }
 }

 export default connect(mapStateToProps)(App)
 ```	

–õ—É—á—à–∏–º —Å–ø–æ—Å–æ–±–æ–º –ø–æ–ª—É—á–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `connect()`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ–±–æ—Ä–∞—á–∏–≤–∞—é—â–∏–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π. –≠—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è *–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞*, –æ–Ω —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ React. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ "—Å–æ–∑–¥–∞—Ç–µ–ª–µ–π –æ–ø–µ—Ä–∞—Ü–∏–π" (action creators), –≤ —Ç–æ–º —á–∏—Å–ª–µ, –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

–°–æ–∑–¥–∞–¥–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `FilterLink` —Å –ø–æ–º–æ—â—å—é `connect()`:

```javascript
import { connect } from 'react-redux'
import { setVisibilityFilter } from '../actions'
import Link from '../components/Link'

const mapStateToProps = (state, ownProps) => ({
active: ownProps.filter === state.visibilityFilter
})

const mapDispatchToProps = (dispatch, ownProps) => ({
onClick: () => dispatch(setVisibilityFilter(ownProps.filter))
})

const FilterLink = connect(
mapStateToProps,
mapDispatchToProps
)(Link)

export default FilterLink
```

–ü–æ—Å–∫–æ–ª—å–∫—É —Ç–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –º–µ–Ω—å—à–µ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω "–±–∞–≥–∞–º", —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ Redux –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `connect()` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É (—Å –ø–æ–º–æ—â—å—é API –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞).

```javascript
     class MyComponent {
       someMethod() {
         doSomethingWith(this.context.store)
       }
     }
```	
	
	
### HOC
	
Higher-order component (HOC) - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –≠—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π –æ—Ç –∫–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ–π –ø—Ä–∏—Ä–æ–¥—ã React.

–ú—ã –Ω–∞–∑—ã–≤–∞–µ–º —Ç–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã *—á–∏—Å—Ç—ã–º–∏*, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–æ –Ω–µ –º–µ–Ω—è—é—Ç –∏ –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

```javascript
const EnhancedComponent = higherOrderComponent(WrappedComponent)
```

HOC, –æ–±—ã—á–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è:

1. –û–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞, –ª–æ–≥–∏–∫–∏, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤
2. –û—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
3. –ê–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
4. –ú–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–ø–∞–º–∏	

	
HOC –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é React API. HOC —è–≤–ª—è–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º, –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–º –æ—Ç –∫–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ–π –ø—Ä–∏—Ä–æ–¥—ã React. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø—Ä–æ–ø—ã –≤ UI, –∞ HOC —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –¥—Ä—É–≥–æ–π. –ü—Ä–∏–º–µ—Ä–∞–º–∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö HOC —è–≤–ª—è—é—Ç—Å—è –º–µ—Ç–æ–¥—ã `connect()` –≤ Redux –∏ `createContainer()` –≤ Relay.

```js
// HOC.js
import React, { Component } from 'react'

export default function Hoc(HocComponent){
    return class extends Component{
        render(){
            return (
                <div>
                  <HocComponent></HocComponent>
                </div>

            )
        }
    }
}
```

```js
// App.js
import React, { Component } from 'react'
import Hoc from './HOC'

class App extends Component {
  render() {
    return (
      <div>
        –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞!
      </div>
    )
  }
}
App = Hoc(App)
export default App
```

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:**

* –ú—ã –Ω–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∞ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ
* HOC –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
* HOC —è–≤–ª—è—é—Ç—Å—è "—á–∏—Å—Ç—ã–º–∏" —Ñ—É–Ω–∫—Ü–∏—è–º–∏. –û–Ω–∏ –Ω–µ –∏–º–µ—é—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (side effects) –∏ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
352. ### <a name="352"></a> actions

 *Actions* - —ç—Ç–æ –æ–±—ã—á–Ω—ã–µ JavaScript-–æ–±—ä–µ–∫—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –û–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `type`, —É–∫–∞–∑—ã–≤–∞—é—â–µ–µ –∫–∞–∫–æ–π —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å. –û–ø–µ—Ä–∞—Ü–∏–∏ —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–ª–µ–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É (payload) - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è.

–í–æ—Ç –∫–∞–∫ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –≤ —Å–ø–∏—Å–æ–∫:

```jsx harmony
// –∑–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞
{
type: ADD_TODO,
text: '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ —Å–ø–∏—Å–æ–∫'
}
```
	
–≠–∫—à–µ–Ω—ã ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Å—Ç–æ—Ä. –û–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —Å—Ç–æ—Ä–∞. –í—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –∏—Ö –≤ —Å—Ç–æ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ store.dispatch().

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Ç —ç–∫—à–µ–Ω, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –≤ —Å–ø–∏—Å–æ–∫ –¥–µ–ª:
```jsx harmony
const ADD_TODO = 'ADD_TODO'
```
```jsx harmony	
{
  type: ADD_TODO,
  text: 'Build my first Redux app'
}
```	
–≠–∫—à–µ–Ω—ã ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω—ã–µ JavaScript-–æ–±—ä–µ–∫—Ç—ã. –≠–∫—à–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –ø–æ–ª–µ type, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–∏–ø –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —ç–∫—à–µ–Ω–∞. –¢–∏–ø—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –∑–∞–¥–∞–Ω—ã, –∫–∞–∫ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞—Å—Ç–µ—Ç—Å—è, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç–µ—Ç—å –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å.
```jsx harmony
import { ADD_TODO, REMOVE_TODO } from '../actionTypes'
```	

–ú—ã –¥–æ–±–∞–≤–∏–º –µ—â–µ –æ–¥–∏–Ω —Ç–∏–ø —ç–∫—à–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–º–µ—á–∞—Ç—å –∑–∞–¥–∞—á—É, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é. –ú—ã –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É todo –ø–æ index, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã —Ö—Ä–∞–Ω–∏–º –∏—Ö –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞. –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ä–∞–∑—É–º–Ω–µ–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è.
```jsx harmony
{
  type: TOGGLE_TODO,
  index: 5
}
```	
–≠—Ç–æ —Ö–æ—Ä–æ—à–∞—è –∏–¥–µ—è, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞–∂–¥–æ–º —ç–∫—à–µ–Ω–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –ª—É—á—à–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å index, —á–µ–º –≤–µ—Å—å –æ–±—ä–µ–∫—Ç todo.

–ù–∞–∫–æ–Ω–µ—Ü, –º—ã –¥–æ–±–∞–≤–∏–º –µ—â–µ –æ–¥–∏–Ω —Ç–∏–ø —ç–∫—à–µ–Ω–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–∏–º—ã—Ö, –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, –∑–∞–¥–∞—á.
```jsx harmony
{
  type: SET_VISIBILITY_FILTER,
  filter: SHOW_COMPLETED
}
```
	
### –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤ (Action Creators)
	
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤ (Action Creators) ‚Äî –Ω–µ —á—Ç–æ –∏–Ω–æ–µ, –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç —ç–∫—à–µ–Ω—ã. –î–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø—É—Ç–∞—Ç—å —Ç–µ—Ä–º–∏–Ω—ã ‚Äúaction‚Äù –∏ ‚Äúaction creator,‚Äù –ø–æ—ç—Ç–æ–º—É –ø–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ—Ä–º–∏–Ω.

–í Redux –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤ (action creators) –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç action:
```jsx harmony
function addTodo(text) {
  return {
    type: ADD_TODO,
    text
  }
}
```	
–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∏—Ö –±–æ–ª–µ–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–º–∏ –∏ –ª–µ–≥–∫–∏–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

–í —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Flux, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤ (action creators) –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞—é—Ç dispatch, –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
```jsx harmony
function addTodoWithDispatch(text) {
  const action = {
    type: ADD_TODO,
    text
  }
  dispatch(action)
}
```	
–í Redux —ç—Ç–æ –Ω–µ —Ç–∞–∫. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–∞—á–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É, –ø–µ—Ä–µ–¥–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é dispatch():
```jsx harmony
dispatch(addTodo(text))
dispatch(completeTodo(index))
```	
–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ç–∫—à–µ–Ω–∞ (bound action creator), –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —ç–∫—à–µ–Ω–∞:
```jsx harmony
const boundAddTodo = (text) => dispatch(addTodo(text))
const boundCompleteTodo = (index) => dispatch(completeTodo(index))
```	
–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å –µ–≥–æ –Ω–∞–ø—Ä—è–º—É—é:
```jsx harmony
boundAddTodo(text)
boundCompleteTodo(index)
```	
–î–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏–∏ dispatch() –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑ —Å—Ç–æ—Ä–∞ (store) store.dispatch(), –Ω–æ, —á—Ç–æ –±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ —á–µ–≥–æ-—Ç–æ —Ç–∏–ø–∞ connect() –∏–∑ react-redux. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é bindActionCreators() –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–≤—è–∑—ã–≤–∞–Ω–∏—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ —ç–∫—à–µ–Ω–æ–≤ (action creators) –∫ —Ñ—É–Ω–∫—Ü–∏–∏ dispatch().

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ç–∫—à–µ–Ω—ã —Ç–∞–∫ –∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –∏ –∏–º–µ—Ç—å —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç—ã. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ—á–∏—Ç–∞—Ç—å –ø—Ä–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —ç–∫—à–µ–Ω—ã –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã AJAX –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–µ–π—Å—Ç–≤–∏–π –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –ø–æ—Ç–æ–∫–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ù–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º —ç–∫—à–µ–Ω–∞–º –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤—ã –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –±–∞–∑–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –¥—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —ç–∫—à–µ–Ω–æ–≤.

### –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
	
**actions.js**
	
```jsx harmony	
/*
 * —Ç–∏–ø—ã —ç–∫—à–µ–Ω–æ–≤
 */

export const ADD_TODO = 'ADD_TODO'
export const TOGGLE_TODO = 'TOGGLE_TODO'
export const SET_VISIBILITY_FILTER = 'SET_VISIBILITY_FILTER'

/*
 * –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
 */

export const VisibilityFilters = {
  SHOW_ALL: 'SHOW_ALL',
  SHOW_COMPLETED: 'SHOW_COMPLETED',
  SHOW_ACTIVE: 'SHOW_ACTIVE'
}

/*
 * –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤
 */

export function addTodo(text) {
  return { type: ADD_TODO, text }
}

export function toggleTodo(index) {
  return { type: TOGGLE_TODO, index }
}

export function setVisibilityFilter(filter) {
  return { type: SET_VISIBILITY_FILTER, filter }
}	
```
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
353. ### <a name="353"></a> reducer

 ### –†–µ–¥—å—é—Å–µ—Ä—ã (Reducers)
	
–†–µ–¥—å—é—Å–µ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —ç–∫—à–µ–Ω—ã, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ —Å—Ç–æ—Ä. –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —ç–∫—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –æ–ø–∏—Å—ã–≤–∞—é—Ç, _—á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ, –Ω–æ –Ω–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç, –∫–∞–∫ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è (State)
	
–í Redux –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –≤–∏–¥–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞. –ü–æ–¥—É–º–∞—Ç—å –æ –µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞ ‚Äî –¥–æ–≤–æ–ª—å–Ω–æ –Ω–µ–ø–ª–æ—Ö–∞—è –∏–¥–µ—è. –ö–∞–∫–æ–≤–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –í–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –≤–∏–¥–µ –æ–±—ä–µ–∫—Ç–∞?

–î–ª—è –Ω–∞—à–µ–≥–æ todo-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –º—ã —Ö–æ—Ç–∏–º —Ö—Ä–∞–Ω–∏—Ç—å –¥–≤–µ —Ä–∞–∑–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:
- –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏;
- –ê–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ todo-–∑–∞–¥–∞—á.
	
–ß–∞—Å—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞ —Ç–∞–∫–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –¥–µ—Ä–µ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å —Ç–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–º–µ—à–∏–≤–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ UI.
```jsx harmony
{
  visibilityFilter: 'SHOW_ALL',
  todos: [
    {
      text: 'Consider using Redux',
      completed: true,
    },
    {
      text: 'Keep all state in a single tree',
      completed: false
    }
  ]
}
```	

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —ç–∫—à–µ–Ω–æ–≤
	
–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏—Å—å —Å —Ç–µ–º, –∫–∞–∫ –¥–æ–ª–∂–Ω—ã –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–∞—à–∏ –æ–±—ä–µ–∫—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è (state objects), –º—ã –≥–æ—Ç–æ–≤—ã –Ω–∞–ø–∏—Å–∞—Ç—å —Ä–µ–¥—å—é—Å–µ—Ä –¥–ª—è –Ω–∏—Ö.
	
`–†–µ–¥—å—é—Å–µ—Ä` (reducer) ‚Äî —ç—Ç–æ —á–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —ç–∫—à–µ–Ω (state –∏ action) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ).
```jsx harmony
(previousState, action) => newState
```	
–§—É–Ω–∫—Ü–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ä–µ–¥—å—é—Å–µ—Ä–æ–º (reducer) –ø–æ—Ç–æ–º—É, —á—Ç–æ –µ–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ Array.prototype.reduce(reducer, ?initialValue). –û—á–µ–Ω—å –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Ä–µ–¥—å—é—Å–µ—Ä—ã –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —á–∏—Å—Ç—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏. –í–æ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≥–æ, —á–µ–≥–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å –≤ —Ä–µ–¥—å—é—Å–µ—Ä–µ:
- –ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å —Ç–æ, —á—Ç–æ –ø—Ä–∏—à–ª–æ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö —Ñ—É–Ω–∫—Ü–∏–∏;
- –í—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç—ã: –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ API –∏–ª–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Ä–æ—É—Ç–∞–º;
- –í—ã–∑—ã–≤–∞—Ç—å –Ω–µ —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä Date.now() –∏–ª–∏ Math.random().
	
–ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ø–æ—Å–æ–±—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ. –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —Ä–µ–¥—å—é—Å–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å—Ç—ã–º. –ü–æ–ª—É—á–∞—è –∞—Ä–≥—É–º–µ–Ω—Ç—ã –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞, —Ä–µ–¥—å—é—Å–µ—Ä –¥–æ–ª–∂–µ–Ω –≤—ã—á–∏—Å–ª—è—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –µ–µ. –ù–∏–∫–∞–∫–∏—Ö —Å—é—Ä–ø—Ä–∏–∑–æ–≤. –ù–∏–∫–∞–∫–∏—Ö —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤. –ù–∏–∫–∞–∫–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–º—É API. –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (mutations). –¢–æ–ª—å–∫–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

–ò—Å—Ö–æ–¥—è –∏–∑ –≤—ã—à–µ–Ω–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤, –¥–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º –ø–∏—Å–∞—Ç—å —Ä–µ–¥—å—é—Å–µ—Ä, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –æ–±—É—á–∞—è –µ–≥–æ –ø–æ–Ω–∏–º–∞—Ç—å —ç–∫—à–µ–Ω—ã (actions), –∫–æ—Ç–æ—Ä—ã–µ –º—ã –æ–ø–∏—Å–∞–ª–∏ —á—É—Ç—å —Ä–∞–Ω—å—à–µ.

–ú—ã –Ω–∞—á–Ω–µ–º —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (initial state). –í –ø–µ—Ä–≤—ã–π —Ä–∞–∑ Redux –≤—ã–∑–æ–≤–µ—Ç —Ä–µ–¥—å—é—Å–µ—Ä —Å –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º(state === undefined). –≠—Ç–æ –Ω–∞—à —à–∞–Ω—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```jsx harmony
import { VisibilityFilters } from './actions'

const initialState = {
  visibilityFilter: VisibilityFilters.SHOW_ALL,
  todos: []
}

function todoApp(state, action) {
  if (typeof state === 'undefined') {
    return initialState
  }

  // –ü–æ–∫–∞ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–∏–∫–∞–∫–∏—Ö —ç–∫—à–µ–Ω–æ–≤
  // –∏ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–Ω—è–ª–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
  return state
}
```	
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ ES6 –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è ‚Äî –ø—Ä–æ—Å—Ç–æ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π —Ç—Ä—é–∫:
```jsx harmony
function todoApp(state = initialState, action) {
  // –ü–æ–∫–∞ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–∏–∫–∞–∫–∏—Ö —ç–∫—à–µ–Ω–æ–≤
  // –∏ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–Ω—è–ª–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
  return state
}
```	
–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç–∫—à–µ–Ω SET_VISIBILITY_FILTER. –í—Å–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å ‚Äî —ç—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å visibilityFilter –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ:
```jsx harmony
import {
  SET_VISIBILITY_FILTER,
  VisibilityFilters
} from './actions'

...

function todoApp(state = initialState, action) {
  switch (action.type) {
    case SET_VISIBILITY_FILTER:
      return Object.assign({}, state, {
        visibilityFilter: action.filter
      })
    default:
      return state
  }
}
```	
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:
- –ú—ã –Ω–µ –∏–∑–º–µ–Ω—è–µ–º state. –ú—ã —Å–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é —Å –ø–æ–º–æ—â—å—é Object.assign(). Object.assign(state, { visibilityFilter: action.filter }) —Ç–æ–∂–µ –Ω–µ–≤–µ—Ä–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω. –í—ã –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–¥–∞—Ç—å –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å object spread operator proposal, —á—Ç–æ–±—ã –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–∏—Å–∞—Ç—å { ...state, ...newState } .

- –ú—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è (state) –≤ default –≤–µ—Ç–∫–µ. –û—á–µ–Ω—å –≤–∞–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è (state) –¥–ª—è –ª—é–±–æ–≥–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ/–Ω–µ–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–≥–æ —ç–∫—à–µ–Ω–∞ (action).


### –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –±–æ–ª—å—à–µ —ç–∫—à–µ–Ω–æ–≤
	
–£ –Ω–∞—Å –µ—Å—Ç—å –µ—â–µ –¥–≤–∞ —ç–∫—à–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã! –¢–∞–∫ –∂–µ, –∫–∞–∫ –º—ã —Å–¥–µ–ª–∞–ª–∏ —Å SET_VISIBILITY_FILTER –º—ã –∏–º–æ—Ä—Ç–∏—Ä—É–µ–º ADD_TODO –∏ TOGGLE_TODO —ç–∫—à–µ–Ω—ã –∏ –∑–∞—Ç–µ–º –¥–æ–ø–∏—à–µ–º –Ω–∞—à —Ä–µ–¥—å—é—Å–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ ADD_TODO.
```jsx harmony
import {
  ADD_TODO,
  TOGGLE_TODO,
  SET_VISIBILITY_FILTER,
  VisibilityFilters
} from './actions'

...

function todoApp(state = initialState, action) {
  switch (action.type) {
    case SET_VISIBILITY_FILTER:
      return Object.assign({}, state, {
        visibilityFilter: action.filter
      })
    case ADD_TODO:
      return Object.assign({}, state, {
        todos: [
          ...state.todos,
          {
            text: action.text,
            completed: false
          }
        ]
      })
    default:
      return state
  }
}
```	
–ö–∞–∫ –∏ —Ä–∞–Ω—å—à–µ, –º—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–∑–º–µ–Ω—è–µ–º –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ state –∏–ª–∏ –µ–≥–æ –ø–æ–ª—è. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç. –ù–æ–≤—ã–π todos —Ä–∞–≤–µ–Ω —Å—Ç–∞—Ä–æ–º—É todos, –≤ –∫–æ–Ω–µ—Ü –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç todo. –°–≤–µ–∂–∏–π tod –±—ã–ª —Å–æ–∑–¥–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –∏–∑ action.

–ù—É –∏ –Ω–∞–∫–æ–Ω–µ—Ü, –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è —ç–∫—à–µ–Ω–∞ TOGGLE_TODO –Ω–µ –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å –¥–ª—è –í–∞—Å –±–æ–ª—å—à–∏–º —Å—é—Ä–ø—Ä–∏–∑–æ–º:
```jsx harmony
case TOGGLE_TODO:
  return Object.assign({}, state, {
    todos: state.todos.map((todo, index) => {
      if (index === action.index) {
        return Object.assign({}, todo, {
          completed: !todo.completed
        })
      }
      return todo
    })
  })
```	
–ü–æ—Å–∫–æ–ª—å–∫—É –º—ã —Ö–æ—Ç–∏–º –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –º–∞—Å—Å–∏–≤–µ, –Ω–µ –ø—Ä–∏–±–µ–≥–∞—è –∫ –º—É—Ç–∞—Ü–∏—è–º, –º—ã –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ —Å —Ç–µ–º–∏ –∂–µ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É. –ï—Å–ª–∏ –≤—ã —á–∞—Å—Ç–æ –ø–∏—à–µ—Ç–µ —Ç–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—ç–ª–ø–µ—Ä—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ [immutability-helper] (https://github.com/kolodny/immutability-helper), [updeep] (https://github.com/essential/updeep) –∏–ª–∏ –¥–∞–∂–µ —Ç–∞–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∫–∞–∫ [Immutable] (http://facebook.github.io/immutable-js/), –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–ª—è –≥–ª—É–±–æ–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π. –ü—Ä–æ—Å—Ç–æ –∑–∞–ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –Ω–µ–ª—å–∑—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –Ω–∏—á–µ–≥–æ –≤–Ω—É—Ç—Ä–∏ state, –ø–æ–∫–∞ –≤—ã –µ–≥–æ –Ω–µ —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–ª–∏.

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–¥—å—é—Å–µ—Ä–æ–≤
	
–í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–∞—à –∫–æ–¥ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç. –í—ã–≥–ª—è–¥–∏—Ç –∏–∑–ª–∏—à–Ω–µ –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã–º:
```jsx harmony
function todoApp(state = initialState, action) {
  switch (action.type) {
    case SET_VISIBILITY_FILTER:
      return Object.assign({}, state, {
        visibilityFilter: action.filter
      })
    case ADD_TODO:
      return Object.assign({}, state, {
        todos: [
          ...state.todos,
          {
            text: action.text,
            completed: false
          }
        ]
      })
    case TOGGLE_TODO:
      return Object.assign({}, state, {
        todos: state.todos.map((todo, index) => {
          if (index === action.index) {
            return Object.assign({}, todo, {
              completed: !todo.completed
            })
          }
          return todo
        })
      })
    default:
      return state
  }
}
```	
–ï—Å—Ç—å –ª–∏ —Å–ø–æ—Å–æ–± –æ–±–ª–µ–≥—á–∏—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ? –ö–∞–∂–µ—Ç—Å—è, —á—Ç–æ todos –∏ visibilityFilter –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ. –ò–Ω–æ–≥–¥–∞ –ø–æ–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (state fields) –∑–∞–≤–∏—Å—è—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π –∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª—å—à–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, –Ω–æ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ–º –º—ã –±–µ–∑–±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ –º–æ–∂–µ–º –≤—ã–Ω–µ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ todos –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é:
```jsx harmony
function todos(state = [], action) {
  switch (action.type) {
    case ADD_TODO:
      return [
        ...state,
        {
          text: action.text,
          completed: false
        }
      ]
    case TOGGLE_TODO:
      return state.map((todo, index) => {
        if (index === action.index) {
          return Object.assign({}, todo, {
            completed: !todo.completed
          })
        }
        return todo
      })
    default:
      return state
  }
}

function todoApp(state = initialState, action) {
  switch (action.type) {
    case SET_VISIBILITY_FILTER:
      return Object.assign({}, state, {
        visibilityFilter: action.filter
      })
    case ADD_TODO:
      return Object.assign({}, state, {
        todos: todos(state.todos, action)
      })
    case TOGGLE_TODO:
      return Object.assign({}, state, {
        todos: todos(state.todos, action)
      })
    default:
      return state
  }
}
```	
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è todos —Ç–∞–∫–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç state, –Ω–æ state ‚Äî —ç—Ç–æ –º–∞—Å—Å–∏–≤! –¢–µ–ø–µ—Ä—å todoApp –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç —Å—Ä–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏—é todos, –∫–æ—Ç–æ—Ä–∞—è, —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç, –∫–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –∫—É—Å–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π —Ä–µ–¥—å—é—Å–µ—Ä–æ–≤ –∏ —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è Redux-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–æ–º–ø–æ–∑–∏—Ü–∏—é —Ä–µ–¥—å—é—Å–µ—Ä–æ–≤ –ø–æ–¥—Ä–æ–±–Ω–µ–µ. –ú–æ–∂–µ–º –ª–∏ –º—ã –∏–∑–≤–ª–µ—á—å —Ä–µ–¥—å—é—Å–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ visibilityFilter? –ö–æ–Ω–µ—á–Ω–æ –º–æ–∂–µ–º:

–ù–∏–∂–µ –Ω–∞—à–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–≤–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ES6 Object Destructuring, —á—Ç–æ–±—ã –æ–±—ä—è–≤–∏—Ç—å SHOW_ALL:
```jsx harmony
const { SHOW_ALL } = VisibilityFilters
```	
–ó–∞—Ç–µ–º:
```jsx harmony
function visibilityFilter(state = SHOW_ALL, action) {
  switch (action.type) {
    case SET_VISIBILITY_FILTER:
      return action.filter
    default:
      return state
  }
}
```	
–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞—à –≥–ª–∞–≤–Ω—ã–π —Ä–µ–¥—å—é—Å–µ—Ä –≤ –≤–∏–¥–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç –¥—Ä—É–≥–∏–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–µ —á–∞—Å—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –æ–¥–∏–Ω —Ü–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç. –¢–∞–∫–∂–µ –≥–ª–∞–≤–Ω–æ–º—É —Ä–µ–¥—å—é—Å–µ—Ä—É –±–æ–ª—å—à–µ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–Ω–∞—Ç—å –ø–æ–ª–Ω–æ–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≥–æ, —á—Ç–æ –∫–∞–∂–¥—ã–π –¥–æ—á–µ—Ä–Ω–∏–π —Ä–µ–¥—å—é—Å–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –µ—Å–ª–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ –ø–æ–ª—É—á–∞–µ—Ç undefined –≤–º–µ—Å—Ç–æ state.
```jsx harmony
function todos(state = [], action) {
  switch (action.type) {
    case ADD_TODO:
      return [
        ...state,
        {
          text: action.text,
          completed: false
        }
      ]
    case TOGGLE_TODO:
      return state.map((todo, index) => {
        if (index === action.index) {
          return Object.assign({}, todo, {
            completed: !todo.completed
          })
        }
        return todo
      })
    default:
      return state
  }
}

function visibilityFilter(state = SHOW_ALL, action) {
  switch (action.type) {
    case SET_VISIBILITY_FILTER:
      return action.filter
    default:
      return state
  }
}

function todoApp(state = {}, action) {
  return {
    visibilityFilter: visibilityFilter(state.visibilityFilter, action),
    todos: todos(state.todos, action)
  }
}
```	
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ –∫–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–µ–¥—å—é—Å–µ—Ä–æ–≤ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫–æ–π-—Ç–æ –æ–¥–Ω–æ–π —á–∞—Å—Ç—å—é –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ü–∞—Ä–∞–º–µ—Ç—Ä state —Ä–∞–∑–Ω—ã–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –¥–æ—á–µ—Ä–Ω–µ–≥–æ —Ä–µ–¥—å—é—Å–µ—Ä–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–π —á–∞—Å—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–æ—Ç –¥–æ—á–µ—Ä–Ω–∏–π —Ä–µ–¥—å—é—Å–µ—Ä.

–£–∂–µ –≤—ã–≥–ª—è–¥–∏—Ç –ª—É—á—à–µ! –ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞—Å—Ç–∞–µ—Ç—Å—è, –º—ã –º–æ–∂–µ–º –≤—ã–Ω–æ—Å–∏—Ç—å —Ä–µ–¥—å—é—Å–µ—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏—Ö —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏, —á—Ç–æ –¥–∞–µ—Ç –Ω–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏ –Ω–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

–ù–∞–∫–æ–Ω–µ—Ü, Redux –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É—Ç–∏–ª–∏—Ç—É, –Ω–∞–∑—ã–≤–∞–µ–º—É—é combineReducers(), –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–π —à–∞–±–ª–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –≤ todoApp. –° –µ–µ –ø–æ–º–æ—â—å—é –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å todoApp —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
```jsx harmony
import { combineReducers } from 'redux'

const todoApp = combineReducers({
  visibilityFilter,
  todos
})

export default todoApp
```	
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ —Ç–∞–∫–æ–º—É –∫–æ–¥—É:
```jsx harmony
export default function todoApp(state = {}, action) {
  return {
    visibilityFilter: visibilityFilter(state.visibilityFilter, action),
    todos: todos(state.todos, action)
  }
}
```	
–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏–º —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –∏–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ-—Ä–∞–∑–Ω–æ–º—É. –ï—Å—Ç—å –¥–≤–∞ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Ä–∞–≤–Ω–æ—Ü–µ–Ω–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –ø–∏—Å–∞—Ç—å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã:
```jsx harmony
const reducer = combineReducers({
  a: doSomethingWithA,
  b: processB,
  c: c
})
```
```jsx harmony	
function reducer(state = {}, action) {
  return {
    a: doSomethingWithA(state.a, action),
    b: processB(state.b, action),
    c: c(state.c, action)
  }
}
```	
–í—Å–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç combineReducers() ‚Äî —ç—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç –≤–∞—à–∏ —Ä–µ–¥—å—é—Å–µ—Ä—ã c —á–∞—Å—Ç—å—é –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∏—Ö –∫–ª—é—á–∞–º–∏, –∏ –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ —Å–æ–±–∏—Ä–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤ –≤ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç. –¢—É—Ç –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–π –º–∞–≥–∏–∏. –ò, –∫–∞–∫ –∏ –¥—Ä—É–≥–∏–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã, combineReducers() –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –µ—Å–ª–∏ –≤—Å–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –µ–º—É —Ä–µ–¥—å—é—Å–µ—Ä—ã –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

–ó–∞–º–µ—Ç–∫–∞ –¥–ª—è —Å–æ–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ ES6
–¢.–∫. combineReducers –æ–∂–∏–¥–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥–µ –æ–±—ä–µ–∫—Ç, –º—ã –º–æ–∂–µ–º –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è –≤ —Ä–∞–∑–Ω—ã–µ —Ñ–∞–π–ª—ã, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é-—Ä–µ–¥—å—é—Å–µ—Ä –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å import * as reducers –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ –æ–±—ä–µ–∫—Ç–∞, –∫–ª—é—á–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥—É—Ç –∏–º–µ–Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.
```jsx harmony
import { combineReducers } from 'redux'
import * as reducers from './reducers'

const todoApp = combineReducers(reducers)
```	
–ü–æ—Å–∫–æ–ª—å–∫—É import * ‚Äî —ç—Ç–æ –≤—Å–µ –µ—â–µ –Ω–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –º—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –Ω–∏–≥–¥–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –ø—É—Ç–∞–Ω–∏—Ü—ã, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–ª—É—á–∞–π–Ω–æ –Ω–∞—Ç–∫–Ω—É—Ç—å—Å—è –Ω–∞ –Ω–µ–≥–æ –≤ –∫–∞–∫–∏—Ö-–Ω–∏–±—É–¥—å –ø—Ä–∏–º–µ—Ä–∞—Ö –∫–æ–¥–∞ –∏–∑ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.

### –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
	
**reducers.js**
```jsx harmony	
import { combineReducers } from 'redux'
import {
  ADD_TODO,
  TOGGLE_TODO,
  SET_VISIBILITY_FILTER,
  VisibilityFilters
} from './actions'
const { SHOW_ALL } = VisibilityFilters

function visibilityFilter(state = SHOW_ALL, action) {
  switch (action.type) {
    case SET_VISIBILITY_FILTER:
      return action.filter
    default:
      return state
  }
}

function todos(state = [], action) {
  switch (action.type) {
    case ADD_TODO:
      return [
        ...state,
        {
          text: action.text,
          completed: false
        }
      ]
    case TOGGLE_TODO:
      return state.map((todo, index) => {
        if (index === action.index) {
          return Object.assign({}, todo, {
            completed: !todo.completed
          })
        }
        return todo
      })
    default:
      return state
  }
}

const todoApp = combineReducers({
  visibilityFilter,
  todos
})

export default todoApp
```
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
354. ### <a name="354"></a> middleware

 ### M–∏–¥–ª–≤–∞—Ä (Middleware)
	
–í—ã –≤–∏–¥–µ–ª–∏ –º–∏–¥–ª–≤–∞—Ä—ã –≤ –¥–µ–π—Å—Ç–≤–∏–∏ –≤ –ø—Ä–∏–º–µ—Ä–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —ç–∫—à–µ–Ω–æ–≤. –ï—Å–ª–∏ –≤—ã –∫–æ–≥–¥–∞-–ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç–∞–∫–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–∞–∫ Express –∏ Koa, —Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤—ã —É–∂–µ —Ö–æ—Ä–æ—à–æ –∑–Ω–∞–∫–æ–º—ã —Å –∫–æ–Ω—Ü–µ–ø—Ü–∏–µ–π –º–∏–¥–ª–≤–∞—Ä. –í —ç—Ç–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö –º–∏–¥–ª–≤–∞—Ä—ã ‚Äî —ç—Ç–æ —á–∞—Å—Ç–∏ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–µ—Å—Ç–∏—Ç—å –º–µ–∂–¥—É —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–º –∑–∞–ø—Ä–æ—Å –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—â–∏–º –æ—Ç–≤–µ—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–∏–¥–ª–≤–∞—Ä—ã –∏–∑ Express –∏–ª–∏ Koa –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å CORS-–∑–∞–≥–æ–ª–æ–≤–∫–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–∂–∞—Ç–∏–µ –∏ —Ç.–¥. –õ—É—á—à–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –º–∏–¥–ª–≤–∞—Ä–æ–≤ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –∏—Ö –º–æ–∂–Ω–æ —Å–æ–µ–¥–∏–Ω—è—Ç—å –≤ —Ü–µ–ø–æ—á–∫–∏/–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –º–∏–¥–ª–≤–∞—Ä–æ–≤ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ.

Redux-–º–∏–¥–ª–≤–∞—Ä—ã, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –º–∏–¥–ª–≤–∞—Ä–æ–≤ Express –∏–ª–∏ Koa, —Ä–µ—à–∞—é—Ç –Ω–µ–º–Ω–æ–≥–æ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–æ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ —Å—Ö–æ–∂–∏–º —Å–ø–æ—Å–æ–±–æ–º. –û–Ω–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Å—Ç–æ—Ä–æ–Ω–Ω—é—é —Ç–æ—á–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–æ–π —ç–∫—à–µ–Ω–∞ –∏ –º–æ–º–µ–Ω—Ç–æ–º, –∫–æ–≥–¥–∞ —ç—Ç–æ—Ç —ç–∫—à–µ–Ω –¥–æ—Å—Ç–∏–≥–∞–µ—Ç —Ä–µ–¥—å—é—Å–µ—Ä–∞. –õ—é–¥–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Redux-–º–∏–¥–ª–≤–∞—Ä—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö, –æ–±—â–µ–Ω–∏—è —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º API, —Ä–æ—É—Ç–∏–Ω–≥–∞ –∏ —Ç.–¥.

–≠—Ç–∞ —Å—Ç–∞—Ç—å—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ —É–≥–ª—É–±–ª–µ–Ω–Ω–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∏ –ø–∞—Ä—É –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∂—É—Ç –≤–∞–º –≤—Å—é —Å–∏–ª—É –º–∏–¥–ª–≤–∞—Ä–æ–≤. –í–∞–º –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –ø–æ–ª–µ–∑–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —ç—Ç–∏–º–∏ —á–∞—Å—Ç—è–º–∏, —Ç–∞–∫ –∂–µ, –∫–∞–∫ –º–µ–∂–¥—É —Å–∫—É–∫–æ–π –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º.

–ü–æ–Ω–∏–º–∞–Ω–∏–µ –º–∏–¥–ª–≤–∞—Ä–æ–≤
–¢.–∫. –º–∏–¥–ª–≤–∞—Ä—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ API, —Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –≤—ã –ø–æ–Ω–∏–º–∞–ª–∏, –æ—Ç–∫—É–¥–∞ –æ–Ω–∏ –ø—Ä–∏—à–ª–∏. –ú—ã –ø–æ–∫–∞–∂–µ–º –≤–∞–º —Ö–æ–¥ –º—ã—Å–ª–µ–π, —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –≤–µ–¥—É—â–∏–π –∫ –º–∏–¥–ª–≤–∞—Ä–∞–º, –∏—Å–ø–æ–ª—å–∑—É—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞.

–ü—Ä–æ–±–ª–µ–º–∞: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–û–¥–Ω–æ –∏–∑ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤ Redux ‚Äî –æ–Ω –¥–µ–ª–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º–∏. –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –ø–æ—Å—ã–ª–∞–µ—Ç—Å—è —ç–∫—à–µ–Ω, –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è. –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –æ–Ω–æ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ, –∫–∞–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —ç–∫—à–µ–Ω–æ–≤.

–†–∞–∑–≤–µ –Ω–µ –±—ã–ª–æ –±—ã —Ö–æ—Ä–æ—à–æ, –µ—Å–ª–∏ –±—ã –º—ã –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏ –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –≤–º–µ—Å—Ç–µ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–æ–µ –±—ã–ª–æ –≤—ã—á–∏—Å–ª–µ–Ω–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è? –ö–æ–≥–¥–∞ —á—Ç–æ-—Ç–æ –∏–¥–µ—Ç –Ω–µ —Ç–∞–∫, –º—ã –º–æ–∂–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞—à –ª–æ–≥ –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ —ç–∫—à–µ–Ω –∏—Å–ø–æ—Ä—Ç–∏–ª –Ω–∞—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
	
<img width="556" alt="687474703a2f2f692e696d6775722e636f6d2f426a47426c45532e706e67" src="https://user-images.githubusercontent.com/80325645/129259099-f288d0bb-cd34-44a4-a6ec-86414b08df47.png">

*–ü–æ–ø—ã—Ç–∫–∞ #1*: –õ–æ–≥–∏—Ä—É–µ–º –≤—Ä—É—á–Ω—É—é
–ü—Ä–æ—Å—Ç–µ–π—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ - —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —ç–∫—à–µ–Ω –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ store.dispatch(action). –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –Ω–µ —Å–ª–∏—à–∫–æ–º —Ö–æ—Ä–æ—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–≤—ã–π —à–∞–≥ –Ω–∞ –ø—É—Ç–∏ –∫ –ø–æ–Ω–∏–º–∞–Ω–∏—é –ø—Ä–æ–±–ª–µ–º—ã.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ
–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ react-redux –∏–ª–∏ –ø–æ—Ö–æ–∂–∏–π –±–∏–Ω–¥–∏–Ω–≥, —É –≤–∞—Å, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –Ω–µ –±—É–¥–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä—É —Å—Ç–æ—Ä–∞ –≤ –≤–∞—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö. –î–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —è–≤–Ω–æ.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ —Ç–∞–∫–æ–π –∫–æ–¥, –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç–µ todo-—ç–ª–µ–º–µ–Ω—Ç:
```jsx harmony
store.dispatch(addTodo('Use Redux'))
```	
–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —ç–∫—à–µ–Ω –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
```jsx harmony
let action = addTodo('Use Redux')

console.log('dispatching', action)
store.dispatch(action)
console.log('next state', store.getState())
```	
–≠—Ç–æ –¥–∞—Å—Ç –∂–µ–ª–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç, –Ω–æ –≤—ã –±—ã –Ω–µ —Ö–æ—Ç–µ–ª–∏ –¥–µ–ª–∞—Ç—å —Ç–∞–∫ –∫–∞–∂–¥—ã–π —Ä–∞–∑.

*–ü–æ–ø—ã—Ç–∫–∞ #2*: –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º Dispatch
–í—ã –º–æ–∂–µ—Ç–µ –≤—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é:
```jsx harmony
function dispatchAndLog(store, action) {
  console.log('dispatching', action)
  store.dispatch(action)
  console.log('next state', store.getState())
}
```	
–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–µ –≤–µ–∑–¥–µ –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ store.dispatch():
```jsx harmony
dispatchAndLog(store, addTodo('Use Redux'))
```	
–ú—ã –±—ã –º–æ–≥–ª–∏ –∑–∞–∫–æ–Ω—á–∏—Ç—å –Ω–∞ —ç—Ç–æ–º, –Ω–æ –Ω–µ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∫–∞–∂–¥—ã–π —Ä–∞–∑.

*–ü–æ–ø—ã—Ç–∫–∞ #3*: Monkeypatching –¥–ª—è Dispatch
	
–ß—Ç–æ, –µ—Å–ª–∏ –º—ã –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏–º —Ñ—É–Ω–∫—Ü–∏—é dispatch –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–µ —Å—Ç–æ—Ä–∞? Redux —Å—Ç–æ—Ä ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç —Å –ø–∞—Ä–æ–π –º–µ—Ç–æ–¥–æ–≤, –∞ –º—ã –ø–∏—à–µ–º –Ω–∞ JavaScript, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –º—ã –º–æ–∂–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫—É monkeypatch –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ dispatch:
```jsx harmony
const next = store.dispatch
store.dispatch = function dispatchAndLog(action) {
  console.log('dispatching', action)
  let result = next(action)
  console.log('next state', store.getState())
  return result
}
```	
–≠—Ç–æ —É–∂–µ –±–ª–∏–∂–µ –∫ —Ç–æ–º—É, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ! –ù–µ –≤–∞–∂–Ω–æ, –æ—Ç–∫—É–¥–∞ –º—ã –ø–æ—Å—ã–ª–∞–µ–º —ç–∫—à–µ–Ω, –æ–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –±—É–¥–µ—Ç –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω. Monkeypatching –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∫–∞–∂–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ö–æ–¥–æ–º, –Ω–æ –ø–æ–∫–∞ –º—ã –º–æ–∂–µ–º —Å —ç—Ç–∏–º –∂–∏—Ç—å.

### –ü—Ä–æ–±–ª–µ–º–∞: –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö.
	
–ß—Ç–æ, –µ—Å–ª–∏ –º—ã –∑–∞—Ö–æ—Ç–∏–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —Ç–∞–∫–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫ dispatch?

–î—Ä—É–≥–æ–µ —Ç–∞–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –º–Ω–µ –≤ –≥–æ–ª–æ–≤—É, —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ JavaScript-–æ—à–∏–±–∫–∞—Ö –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ window.onerror –Ω–µ –Ω–∞–¥–µ–∂–Ω–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –æ–Ω–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–µ–∫–µ –≤—ã–∑–æ–≤–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –≤–∞–∂–Ω–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ, –ø–æ—á–µ–º—É –∂–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.

–†–∞–∑–≤–µ –Ω–µ –±—ã–ª–æ –±—ã –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –±—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –æ—à–∏–±–∫–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞–ª–∞—Å—å, –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ —ç–∫—à–µ–Ω–∞, –º—ã –º–æ–≥–ª–∏ –±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–µ (–æ—à–∏–±–∫—É), –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ç–µ–∫–æ–º –≤—ã–∑–æ–≤–æ–≤, —ç–∫—à–µ–Ω–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑–≤–∞–ª –æ—à–∏–±–∫—É –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ —Å–µ—Ä–≤–∏—Å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö, —Ç–∞–∫–æ–π –∫–∞–∫ Sentry. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≥–æ—Ä–∞–∑–¥–æ –ª–µ–≥—á–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –æ—à–∏–±–∫—É –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

–û–¥–Ω–∞–∫–æ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –º—ã –¥–µ—Ä–∂–∞–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Ä–∞–∑–¥–µ–ª—å–Ω–æ. –í –∏–¥–µ–∞–ª—å–Ω–æ–º —Å–ª—É—á–∞–µ, –º—ã —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å –∏—Ö, –∫–∞–∫ —Ä–∞–∑–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –º—ã –Ω–µ —Å–º–æ–∂–µ–º –∏–º–µ—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –∏–∑ —Ç–∞–∫–æ–≥–æ —Ä–æ–¥–∞ —É—Ç–∏–ª–∏—Ç. (–ü–æ–¥—Å–∫–∞–∑–∫–∞: –º—ã –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–¥—Ö–æ–¥–∏–º –∫ —Ç–æ–º—É, —á—Ç–æ —Ç–∞–∫–æ–µ –º–∏–¥–ª–≤–∞—Ä—ã!)

–ï—Å–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —è–≤–ª—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏, —Ç–æ –æ–Ω–∏ –º–æ–≥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
```jsx harmony
function patchStoreToAddLogging(store) {
  const next = store.dispatch
  store.dispatch = function dispatchAndLog(action) {
    console.log('dispatching', action)
    let result = next(action)
    console.log('next state', store.getState())
    return result
  }
}

function patchStoreToAddCrashReporting(store) {
  const next = store.dispatch
  store.dispatch = function dispatchAndReportErrors(action) {
    try {
      return next(action)
    } catch (err) {
      console.error('Caught an exception!', err)
      Raven.captureException(err, {
        extra: {
          action,
          state: store.getState()
        }
      })
      throw err
    }
  }
}
```	
–ï—Å–ª–∏ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã, –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏, —Ç–æ –ø–æ–∑–∂–µ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—à–µ–≥–æ —Å—Ç–æ—Ä–∞:
```jsx harmony
patchStoreToAddLogging(store)
patchStoreToAddCrashReporting(store)
```	
–ù–æ —ç—Ç–æ –≤—Å–µ –µ—â–µ –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ.

*–ü–æ–ø—ã—Ç–∫–∞ #4*: –ü—Ä—è—á–µ–º Monkeypatching
	
Monkeypatching ‚Äî —ç—Ç–æ —Ö–∞–∫. "–ó–∞–º–µ–Ω–∏—Ç–µ –ª—é–±–æ–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏—Ç–µ" ‚Äî —á—Ç–æ —ç—Ç–æ –∑–∞ –≤–∏–¥ API? –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è –≤ –µ–≥–æ —Å—É—Ç–∏. –†–∞–Ω–µ–µ –Ω–∞—à–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–º–µ–Ω—è–ª–∏ store.dispatch. –ß—Ç–æ –µ—Å–ª–∏ –±—ã –æ–Ω–∏ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é dispatch?
```jsx harmony
function logger(store) {
  let next = store.dispatch

  // —Ä–∞–Ω–µ–µ –±—ã–ª–æ —Ç–∞–∫:
  // store.dispatch = function dispatchAndLog(action) {

  return function dispatchAndLog(action) {
    console.log('dispatching', action)
    let result = next(action)
    console.log('next state', store.getState())
    return result
  }
}
```	
–ú—ã –º–æ–≥–ª–∏ –±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é-–ø–æ–º–æ—â–Ω–∏–∫ –≤–Ω—É—Ç—Ä–∏ Redux, –∫–æ—Ç–æ—Ä–∞—è –º–æ–≥–ª–∞ –±—ã –ø—Ä–∏–º–µ–Ω—è—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π monkeypatching, –∫–∞–∫ —á–∞—Å—Ç—å –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏:
```jsx harmony
function applyMiddlewareByMonkeypatching(store, middlewares) {
  middlewares = middlewares.slice()
  middlewares.reverse()

  // –ò–∑–º–µ–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é dispatch –∫–∞–∂–¥—ã–º –º–∏–¥–ª–≤–∞—Ä–æ–º.
  middlewares.forEach(middleware =>
    store.dispatch = middleware(store)
  )
}
```	
–ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–¥–ª–≤–∞—Ä–æ–≤:
```jsx harmony
applyMiddlewareByMonkeypatching(store, [ logger, crashReporter ])
```	
–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ - —ç—Ç–æ –≤—Å–µ –µ—â–µ monkeypatching. –§–∞–∫—Ç —Ç–æ–≥–æ, —á—Ç–æ –º—ã –ø—Ä—è—á–µ–º –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è monkeypatching.

*–ü–æ–ø—ã—Ç–∫–∞ #5*: –£–±–∏—Ä–∞–µ–º Monkeypatching
	
–ó–∞—á–µ–º –º—ã –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º dispatch? –ö–æ–Ω–µ—á–Ω–æ –∂–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Ç–æ–º –µ–≥–æ –≤—ã–∑–≤–∞—Ç—å. –ù–æ –µ—Å—Ç—å –µ—â–µ –∏ –¥—Ä—É–≥–∞—è –ø—Ä–∏—á–∏–Ω–∞: –∫–∞–∂–¥—ã–π –º–∏–¥–ª–≤–∞—Ä –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø (–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–∑–≤–∞—Ç—å) —Ä–∞–Ω–µ–µ –æ–±–µ—Ä–Ω—É—Ç—ã–π store.dispatch:
```jsx harmony
function logger(store) {
  // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –≤–µ—Ä–Ω—É–ª –ø—Ä–µ–¥—ã–¥—É—â–∏–π –º–∏–¥–ª–≤–∞—Ä:
  let next = store.dispatch

  return function dispatchAndLog(action) {
    console.log('dispatching', action)
    let result = next(action)
    console.log('next state', store.getState())
    return result
  }
}
```	
–≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –º–∏–¥–ª–≤–∞—Ä—ã –≤ —Ü–µ–ø–æ—á–∫–∏!

–ï—Å–ª–∏ applyMiddlewareByMonkeypatching –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç store.dispatch —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–≤–æ–≥–æ –º–∏–¥–ª–≤–∞—Ä–∞, store.dispatch –±—É–¥–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é dispatch. –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—Ç–æ—Ä–æ–π –º–∏–¥–ª–≤–∞—Ä —Ç–æ–∂–µ –±—É–¥–µ—Ç —Å–≤—è–∑–∞–Ω —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π dispatch.

–ù–æ –µ—Å—Ç—å –µ—â–µ –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –º–∏–¥–ª–≤–∞—Ä–æ–≤ –≤ —Ü–µ–ø–æ—á–∫–∏ (chaining). –ú–∏–¥–ª–≤–∞—Ä –º–æ–≥ –±—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–∫—à–µ–Ω–∞ next() –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å –µ–µ –∏–∑ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å—Ç–æ—Ä–∞.
```jsx harmony
function logger(store) {
  return function wrapDispatchToAddLogging(next) {
    return function dispatchAndLog(action) {
      console.log('dispatching', action)
      let result = next(action)
      console.log('next state', store.getState())
      return result
    }
  }
}
```	
–≠—Ç–æ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ ‚Äúwe need to go deeper‚Äù, —Ç–∞–∫ —á—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–µ –≤—Ä–µ–º—è –Ω–∞ —ç—Ç–æ. –ö–∞—Å–∫–∞–¥ —Ñ—É–Ω–∫—Ü–∏–π –≤—ã–≥–ª—è–¥–∏—Ç –ø—É–≥–∞—é—â–∏–º. –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ ES6 –¥–µ–ª–∞—é—Ç —ç—Ç–æ –∫–∞—Ä—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–º –¥–ª—è –≥–ª–∞–∑:
```jsx harmony
const logger = store => next => action => {
  console.log('dispatching', action)
  let result = next(action)
  console.log('next state', store.getState())
  return result
}

const crashReporter = store => next => action => {
  try {
    return next(action)
  } catch (err) {
    console.error('Caught an exception!', err)
    Raven.captureException(err, {
      extra: {
        action,
        state: store.getState()
      }
    })
    throw err
  }
}
```	
–ò–º–µ–Ω–Ω–æ —Ç–∞–∫ –≤—ã–≥–ª—è–¥—è—Ç –º–∏–¥–ª–≤–∞—Ä—ã –≤ Redux.

–¢–µ–ø–µ—Ä—å –º–∏–¥–ª–≤–∞—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–∫—à–µ–Ω–∞ next() –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–∫—à–µ–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–∫—à–µ–Ω–∞ next() –¥–ª—è –º–∏–¥–ª–≤–∞—Ä–∞ —Å–ª–µ–≤–∞. –í—Å–µ –µ—â–µ –ø–æ–ª–µ–∑–Ω–æ –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –º–µ—Ç–æ–¥–∞–º —Å—Ç–æ—Ä–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä –∫ getState(), —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, store –æ—Å—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–µ–Ω, –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç —Å–∞–º–æ–≥–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è.

*–ü–æ–ø—ã—Ç–∫–∞ #6*: –ü—Ä–æ—Å—Ç–µ–π—à–µ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–¥–ª–≤–∞—Ä–æ–≤
–í–º–µ—Å—Ç–æ applyMiddlewareByMonkeypatching() –º—ã –º–æ–≥–ª–∏ –±—ã –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é applyMiddleware(), –∫–æ—Ç–æ—Ä–∞—è —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é, –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–µ—Ä–Ω—É—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é dispatch() –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ø–∏—é —Å—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é:
```jsx harmony
// –û—Å—Ç–æ—Ä–æ–∂–Ω–æ: –ü—Ä–æ—Å—Ç–µ–π—à–∞—è –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è!
// –≠—Ç–æ *–Ω–µ* Redux API.
function applyMiddleware(store, middlewares) {
  middlewares = middlewares.slice()
  middlewares.reverse()
  let dispatch = store.dispatch
  middlewares.forEach(middleware => (dispatch = middleware(store)(dispatch)))
  return Object.assign({}, store, { dispatch })
}
```	
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è applyMiddleware(), –∫–æ—Ç–æ—Ä–∞—è –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å Redux, –ø–æ—Ö–æ–∂–∞ –Ω–∞ —ç—Ç—É, –Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ç—Ä–µ–º—è –≤–∞–∂–Ω—ã–º–∏ –∞—Å–ø–µ–∫—Ç–∞–º–∏:

–û–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–∏–¥–ª–≤–∞—Ä—É —Ç–æ–ª—å–∫–æ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ API —Å—Ç–æ—Ä–∞: –º–µ—Ç–æ–¥—ã dispatch(action) –∏ getState().

–û–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ö–∏—Ç—Ä–æ—Å—Ç–∏ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ, —ç–∫—à–µ–Ω —Å–Ω–æ–≤–∞ –ø—Ä–æ–π–¥–µ—Ç —á–µ—Ä–µ–∑ –≤—Å—é —Ü–µ–ø–æ—á–∫—É –º–∏–¥–ª–≤–∞—Ä–æ–≤, –≤–∫–ª—é—á–∞—è —Ç–µ–∫—É—â–∏–π, –µ—Å–ª–∏ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ store.dispatch(action) –∏–∑ –≤–∞—à–µ–≥–æ –º–∏–¥–ª–≤–∞—Ä–∞ –≤–º–µ—Å—Ç–æ next(action). –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –º–∏–¥–ª–≤–∞—Ä–æ–≤, –∫–∞–∫ –º—ã —Ä–∞–Ω–µ–µ –≤–∏–¥–µ–ª–∏.

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–¥–ª–≤–∞—Ä —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑, –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å createStore(), –∞ –Ω–µ —Å —Å–∞–º–∏–º store. –í–º–µ—Å—Ç–æ (store, middlewares) => store, –µ–µ —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π —è–≤–ª—è–µ—Ç—Å—è (...middlewares) => (createStore) => createStore.

–ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏–µ: –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
–ü–æ–∫–∞ applyMiddleware –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤–∞—à–∏ –º–∏–¥–ª–≤–∞—Ä–∏, —Ñ—É–Ω–∫—Ü–∏—è store.dispatch –±—É–¥–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—É—é createStore. –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –Ω–∏–∫–∞–∫–æ–π –¥—Ä—É–≥–æ–π –º–∏–¥–ª–≤–∞—Ä –Ω–µ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω. –ï—Å–ª–∏ –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –¥—Ä—É–≥–∏–º –º–∏–¥–ª–≤–∞—Ä–æ–º –≤–æ –≤—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –≤—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, –±—É–¥–µ—Ç–µ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω—ã. –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è applyMiddleware –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –≤—ã –ø–æ–ø—ã—Ç–∞–µ—Ç–µ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —ç–∫—à–µ–Ω –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤–∞–º —Å–ª–µ–¥—É–µ—Ç, –ª–∏–±–æ –Ω–∞–ø—Ä—è–º—É—é —Å–≤—è–∑—ã–≤–∞—Ç—å—Å—è —Å —ç—Ç–∏–º –¥—Ä—É–≥–∏–º –º–∏–¥–ª–≤–∞—Ä–æ–º —á–µ—Ä–µ–∑ –æ–±—â–∏–π –æ–±—ä–µ–∫—Ç (–¥–ª—è –º–∏–¥–ª–≤–∞—Ä–∞, –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ API, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∞—à –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –æ–±—ä–µ–∫—Ç API), –ª–∏–±–æ –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –º–∏–¥–ª–≤–∞—Ä –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Å –∫–æ–ª–±—ç–∫–æ–º.

–§–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
–î–∞–Ω –º–∏–¥–ª–≤–∞—Ä –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –Ω–∞–ø–∏—Å–∞–ª–∏:
```jsx harmony
const logger = store => next => action => {
  console.log('dispatching', action)
  let result = next(action)
  console.log('next state', store.getState())
  return result
}

const crashReporter = store => next => action => {
  try {
    return next(action)
  } catch (err) {
    console.error('Caught an exception!', err)
    Raven.captureException(err, {
      extra: {
        action,
        state: store.getState()
      }
    })
    throw err
  }
}
```	
–í–æ—Ç —Ç–∞–∫ –º–æ–∂–Ω–æ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ Redux —Å—Ç–æ—Ä—É:
```jsx harmony
import { createStore, combineReducers, applyMiddleware } from 'redux'

const todoApp = combineReducers(reducers)
const store = createStore(
  todoApp,
  // applyMiddleware() tells createStore() how to handle middleware
  applyMiddleware(logger, crashReporter)
)
```	
–í–æ—Ç –∏ –≤—Å–µ! –¢–µ–ø–µ—Ä—å –ª—é–±—ã–µ —ç–∫—à–µ–Ω—ã, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä —Å—Ç–æ—Ä–∞, –±—É–¥—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ logger –∏ crashReporter:
```jsx harmony
// –±—É–¥–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ `logger` –∏ `crashReporter`!
store.dispatch(addTodo('Use Redux'))
```
	
*–°–µ–º—å –ø—Ä–∏–º–µ—Ä–æ–≤*
	
–ï—Å–ª–∏ –≤–∞—à–∞ –≥–æ–ª–æ–≤–∞ –≤—Å–∫–∏–ø–µ–ª–∞ –æ—Ç –ø—Ä–æ—á—Ç–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫–æ–≤–æ –±—ã–ª–æ –Ω–∞–ø–∏—Å–∞—Ç—å —ç—Ç–æ. –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è –º–µ–Ω—è –∏ –≤–∞—Å –∏ –ø–æ–º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∞—à–∏ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏.

–ö–∞–∂–¥–∞—è –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã—Ö –Ω–∏–∂–µ, —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º Redux-–º–∏–¥–ª–≤–∞—Ä–æ–º. –û–Ω–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –≤ —Ä–∞–≤–Ω–æ–π —Å—Ç–µ–ø–µ–Ω–∏ –ø–æ–ª–µ–∑–Ω—ã–º–∏, –Ω–æ, –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, –æ–Ω–∏ –≤ —Ä–∞–≤–Ω–æ–π —Å—Ç–µ–ø–µ–Ω–∏ –∑–∞–±–∞–≤–Ω—ã.
```jsx harmony
/**
 * –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —ç–∫—à–µ–Ω—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∏ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã.
 */
const logger = store => next => action => {
  console.group(action.type)
  console.info('dispatching', action)
  let result = next(action)
  console.log('next state', store.getState())
  console.groupEnd(action.type)
  return result
}

/**
 * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á–µ—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö –∫–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª—è—é—Ç—Å—è —Å–ª—É—à–∞—Ç–µ–ª–∏.
 */
const crashReporter = store => next => action => {
  try {
    return next(action)
  } catch (err) {
    console.error('Caught an exception!', err)
    Raven.captureException(err, {
      extra: {
        action,
        state: store.getState()
      }
    })
    throw err
  }
}

/**
 * –ü–ª–∞–Ω–∏—Ä—É–µ—Ç —ç–∫—à–µ–Ω—ã —Å { meta: { delay: N } }, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–ª–æ–∂–µ–Ω—ã –Ω–∞ N –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥.
 * –°–æ–∑–¥–∞–µ—Ç `dispatch`, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏—é, –¥–ª—è –æ—Ç–º–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç–∞.
 */
const timeoutScheduler = store => next => action => {
  if (!action.meta || !action.meta.delay) {
    return next(action)
  }

  let timeoutId = setTimeout(
    () => next(action),
    action.meta.delay
  )

  return function cancel() {
    clearTimeout(timeoutId)
  }
}

/**
 * –ü–ª–∞–Ω–∏—Ä—É–µ—Ç —ç–∫—à–µ–Ω—ã —Å { meta: { raf: true } }, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–Ω—É—Ç—Ä–∏ 
 * —Ñ—Ä–µ–π–º–∞ rAF —Ü–∏–∫–ª–∞. –°–æ–∑–¥–∞–µ—Ç  `dispatch`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è 
 * —ç–∫—à–µ–Ω–∞ –∏–∑ –æ—á–µ—Ä–µ–¥–∏.
 */
const rafScheduler = store => next => {
  const queuedActions = []
  let frame = null

  function loop() {
    frame = null
    try {
      if (queuedActions.length) {
        next(queuedActions.shift())
      }
    } finally {
      maybeRaf()
    }
  }

  function maybeRaf() {
    if (queuedActions.length && !frame) {
      frame = requestAnimationFrame(loop)
    }
  }

  return action => {
    if (!action.meta || !action.meta.raf) {
      return next(action)
    }

    queuedActions.push(action)
    maybeRaf()

    return function cancel() {
      queuedActions = queuedActions.filter(a => a !== action)
    }
  }
}

/**
 * –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–º–∏—Å—ã –≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —ç–∫—à–µ–Ω–∞–º.
 * –ï—Å–ª–∏ –ø—Ä–æ–º–∏—Å –∑–∞—Ä–µ–∑–æ–ª–≤–µ–Ω, –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∫–∞–∫ —ç–∫—à–µ–Ω.
 * –ü—Ä–æ–º–∏—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∏–∑ `dispatch`, —Ç.–æ. –≤—ã–∑—ã–≤–∞—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç 
 * –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–∫–∞–∑ (rejection) –ø—Ä–æ–º–∏—Å–∞.
 */
const vanillaPromise = store => next => action => {
  if (typeof action.then !== 'function') {
    return next(action)
  }

  return Promise.resolve(action).then(store.dispatch)
}

/**
 * –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —ç–∫—à–µ–Ω—ã —Å –ø–æ–ª–µ–º { promise }.
 * –≠—Ç–æ—Ç –º–∏–¥–ª–≤–∞—Ä –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç –∏—Ö –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—à–µ–Ω –≤ –Ω–∞—á–∞–ª–µ,
 * –∏ –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —É—Å–ø–µ—à–Ω—ã–π (–∏–ª–∏ –Ω–µ—É–¥–∞—á–Ω—ã–π) —ç–∫—à–µ–Ω, –∫–æ–≥–¥–∞ `promise` –±—É–¥–µ—Ç –∑–∞—Ä–µ–∑–æ–ª–≤–µ–Ω.
 *
 * –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ `dispatch` –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–æ–º–∏—Å, —Ç.–µ. –≤—ã–∑—ã–≤–∞—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è 
 * –º–æ–∂–µ—Ç –æ–∂–∏–¥–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø—Ä–æ–º–∏—Å–∞.
 */
const readyStatePromise = store => next => action => {
  if (!action.promise) {
    return next(action)
  }

  function makeAction(ready, data) {
    const newAction = Object.assign({}, action, { ready }, data)
    delete newAction.promise
    return newAction
  }

  next(makeAction(false))
  return action.promise.then(
    result => next(makeAction(true, { result })),
    error => next(makeAction(true, { error }))
  )
}

/**
 * –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤–º–µ—Å—Ç–æ —ç–∫—à–µ–Ω–∞.
 * –§—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å `dispatch` –∏ `getState` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
 *
 * –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞–Ω–Ω–µ–≥–æ –≤—ã—Ö–æ–¥–∞ (—É—Å–ª–æ–≤–∏—è –Ω–∞–¥ `getState()`), –∞ —Ç–∞–∫–∂–µ –¥–ª—è 
 * –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–º–æ–∂–µ—Ç `dispatch()` —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ)
 * 
 * `dispatch` –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
 */
const thunk = store => next => action =>
  typeof action === 'function' ?
    action(store.dispatch, store.getState) :
    next(action)

// –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤—Å–µ! (–≠—Ç–æ –Ω–µ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã.)
const todoApp = combineReducers(reducers)
const store = createStore(
  todoApp,
  applyMiddleware(
    rafScheduler,
    timeoutScheduler,
    thunk,
    vanillaPromise,
    readyStatePromise,
    logger,
    crashReporter
  )
)	
```
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
355. ### <a name="355"></a> Redux, Actions, Reducer, Store - –ø—Ä–∏–º–µ—Ä—ã

 `–ü—Ä–∏–º–µ—Ä`	
	
```jsx
const ON_CLICK = 'ON_CLICK'

const increaseCounter = () => ({
	type: ON_CLICK
})

const reducer = (state = 0, action) => {
	if (action.type === ON_CLICK) {
		return state++;
	}

	return state;
}

const Status = () => {
	const count = useSelector((state) => state);

	return (<span>{count}</span>)
}

const Changer = () => {
	const dispatch = useDispatch();

	const onClick = () => dispatch(increaseCounter());

	return (<button onClick={onClick}>Change</button>)
}

class ClassComponentWithStore extends Component {
	constructor(props) {
		super(props);
	}


	render() {
		const { onClick, count } = this.props

		return (
			<div>
				<span>{count}</span>
				<button onClick={onClick}>Change</button>
			</div>
		)
	}
}

const ClassComponent = connect(
	(state) => ({
		count: state
	}),
	(dispatch) => ({
		onClick: () => dispatch(increaseCounter)
	})
)(ClassComponentWithStore)

const store = createStore(reducer)

const App = () => {
	return (
		<Provider store={store}>
			<Status />
			<Changer />
			<ClassComponent />
		</Provider>
	)
}


ReactDOM.render(<App />, document.getElementById('root'))	
```	

### –ù–∞–∑–æ–≤–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ Redux***

<p align="center">
  <img src="../assets/img-v2/redux-components.jpg" alt="Redux Components" width="400px" />
</p>

**1. –û–ø–µ—Ä–∞—Ü–∏—è (action)**

–û–ø–µ—Ä–∞—Ü–∏—è - —ç—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–±—ã—Ç–∏–∏, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ Redux –≤—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –æ–ø–µ—Ä–∞—Ü–∏–∏. –û–ø–µ—Ä–∞—Ü–∏–∏ - —ç—Ç–æ –æ–±—ä–µ–∫—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ `type` –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ `payload`. –û–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `store.dispatch()`. –û–ø–µ—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é "—Å–æ–∑–¥–∞—Ç–µ–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π" (`action creator`).

**–°–æ–∑–¥–∞—Ç–µ–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–π** - —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ–º–æ–≥–∞—é—â–∏–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏. –°–æ–∑–¥–∞—Ç–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ä–µ–¥—É–∫—Ç–æ—Ä—É.

*–ü—Ä–∏–º–µ—Ä*

```js
const setLoginStatus = (name, password) => {
  return {
    type: "LOGIN",
    payload: {
      username: "foo",
      password: "bar"
    }
  }
}
```

**2. –†–µ–¥—É–∫—Ç–æ—Ä (reducer)**

–†–µ–¥—É–∫—Ç–æ—Ä—ã - —ç—Ç–æ "—á–∏—Å—Ç—ã–µ" —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–µ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ –Ω–∞–¥ –Ω–∏–º –æ–ø–µ—Ä–∞—Ü–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - –æ–±—ä–µ–∫—Ç, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∏–µ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –≤—ã–∑–≤–∞–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é.

–≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é `reduce()` –≤ JavaScript, –∫–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–ª–ª–±–µ–∫–∞.

```js
const LoginComponent = (state = initialState, action) => {
    switch (action.type) {

      // –¥–∞–Ω–Ω—ã–π —Ä–µ–¥—É–∫—Ç–æ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–∏–ø–æ–º "LOGIN"
      case "LOGIN":
          return state.map(user => {
              if (user.username !== action.username) {
                  return user
              }

              if (user.password == action.password) {
                  return {
                      ...user,
                      login_status: "LOGGED IN"
                  }
              }
          });
      default:
          return state;
      }
}
```

**–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ–¥—É–∫—Ç–æ—Ä–æ–≤**: –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `combineReducers()` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞–º–∏ –≤ –æ–¥–∏–Ω —Ä–µ–¥—É–∫—Ç–æ—Ä –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ `createStore()`.

*–°–∏–Ω—Ç–∞–∫—Å–∏—Å*

```js
const rootReducert = combineReducer(reducer1, reducer2)
```

**3. –°–æ—Å—Ç–æ—è–Ω–∏–µ (state)**

–°–æ—Å—Ç–æ—è–Ω–∏–µ - —ç—Ç–æ –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤—Å–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–∞ –Ω–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –•—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–ø–∏—Å—å, —á—Ç–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

*–ü—Ä–∏–º–µ—Ä*

```js
import React from 'react'
import { render } from 'react-dom'
import { Provider } from 'react-redux'
import { createStore } from 'redux'
import rootReducer from './reducers'
import App from './components/App'

const store = createStore(rootReducer)
 render (
   <provider store="{store}">
     <app>
   </app></provider>,
   document.getElementById('root')
 )
```

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Redux —Å React —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—ä–µ–º–∞. –≠—Ç–æ —Ç–∞–∫–∂–µ –æ–±–ª–µ–≥—á–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑–≤–∞–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

**4. –û—Ç–ø—Ä–∞–≤–∫–∞ (dispatch)**

–û—Ç–ø—Ä–∞–≤–∫–∞ - —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–∏–ø–æ–º –∏ –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π —Ä–µ–¥—É–∫—Ç–æ—Ä—É.

```js
store.dispatch()
```

**5. –ü–æ–¥–ø–∏—Å–∫–∞ (subscribe)**

–ü–æ–¥–ø–∏—Å–∫–∞ - —ç—Ç–æ –º–µ—Ç–æ–¥, –∏—Å–ø–æ–ª—å—É–∑–µ–º—ã–π –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –¥–∞–Ω–Ω—ã–µ/—Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

```js
store.subscribe()
```

**6. –ü—Ä–æ–≤–∞–π–¥–µ—Ä (provider)**

–ü—Ä–æ–≤–∞–π–¥–µ—Ä - —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å—Å—ã–ª–∫—É –Ω–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –ø–µ—Ä–µ–¥–∞—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–æ—á–µ—Ä–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º.

**7. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (connect)**

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∞—è —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º.

**8. –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–ª–æ–π, –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ (middleware)**

–ü–æ—Å—Ä–µ–¥–Ω–∏–∫ - —ç—Ç–æ —Å–ø–æ—Å–æ–± —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Redux –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º. –ü–æ—Å—Ä–µ–¥–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –û–Ω–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

*–°–∏–Ω—Ç–∞–∫—Å–∏—Å*

```js
const store = createStore(reducers, initialState, middleware);
```	
	
	
### –û–±—ä—è—Å–Ω–∏—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞?

–†–µ–¥—É–∫—Ç–æ—Ä - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π. Redux —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, —Ç–∞–∫ —á—Ç–æ –æ–Ω–∏ –¥–µ–π—Å—Ç–≤—É—é—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ. Redux –≤–æ –º–Ω–æ–≥–æ–º –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–¥—É–∫—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ–ø–µ—Ä–∞—Ü–∏—é –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

**1. –°–æ—Å—Ç–æ—è–Ω–∏–µ**

–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Redux, –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ —Ä–µ–¥—É–∫—Ç–æ—Ä–µ - —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –†–µ–¥—É–∫—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –æ–ø–µ—Ä–∞—Ü–∏—é –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

*–°–∏–Ω—Ç–∞–∫—Å–∏—Å*

```js
const contactReducer = (state = initialState, action) => {
  // ...
}
```

**2. –ü–∞—Ä–∞–º–µ—Ç—Ä `state`**

–ü–∞—Ä–∞–º–µ—Ç—Ä `state`, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ —Ä–µ–¥—É–∫—Ç–æ—Ä, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –º—ã –ø–µ—Ä–µ–¥–∞–µ–º —Ä–µ–¥—É–∫—Ç–æ—Ä—É `initialState`, —Ç.–µ. –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–º—É –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–æ–≤–∞–ª–æ.

```js
contactReducer(initialState, action)
```

*–ü—Ä–∏–º–µ—Ä*

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –Ω–∞—á–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, –∞ –æ–ø–µ—Ä–∞—Ü–∏–µ–π - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫.

```js
const initialState = {
  contacts: []
}
```

**3. –ü–∞—Ä–∞–º–µ—Ç—Ä `action`**

`action` - —ç—Ç–æ –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –¥–≤–µ –ø–∞—Ä—ã –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ –≤ —Ä–µ–¥—É–∫—Ç–æ—Ä–µ, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤–∞ `action.type`.

```js
const action = {
  type: 'NEW_CONTACT',
  payload: {
    name: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤',
    location: '–ú–æ—Å–∫–≤–∞',
    email: 'mail@example.com'
  }
}
```

–û–±—ã—á–Ω–æ, —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ `payload`, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ –¥–∞–Ω–Ω—ã–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è. –°–ª–µ–¥—É–µ—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ `action.type` —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º, –∞ `action.payload` –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º.

**4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**

–°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–º. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ–≥–æ –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å –Ω–∞–ø—Ä—è–º—É—é. –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Object.assign()` –∏–ª–∏ *spread-–æ–ø–µ—Ä–∞—Ç–æ—Ä*.

*–ü—Ä–∏–º–µ—Ä*

```js
const contactReducer = (state, action) => {
  switch (action.type) {
    case 'NEW_CONTACT':
    return {
        ...state, contacts:
        [...state.contacts, action.payload]
    }
    default:
      return state
  }
}
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.

```js
const initialState = {
  contacts: [{
    name: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤',
    age: 30
  }]
}

const contactReducer = (state = initialState, action) => {
  switch (action.type) {
    case "NEW_CONTACT":
      return Object.assign({}, state, {
        contacts: [...state.contacts, action.payload]
      });
    default:
      return state
  }
}

class App extends React.Component {
  constructor(props) {
    super(props)
    this.name = React.createRef()
    this.age = React.createRef()
    this.state = initialState
  }

  handleSubmit = e => {
    e.preventDefault()
    const action = {
      type: "NEW_CONTACT",
      payload: {
        name: this.name.current.value,
        age: this.age.current.value
      }
    }
    const newState = contactReducer(this.state, action)
    this.setState(newState)
  }

  render() {
    const { contacts } = this.state
    return (
      <div className="box">
        <div className="content">
          <pre>{JSON.stringify(this.state, null, 2)}</pre>
        </div>

        <div className="field">
          <form onSubmit={this.handleSubmit}>
            <div className="control">
              <input className="input" placeholder="–ò–º—è" type="text" ref={this.name} />
            </div>
            <div className="control">
              <input className="input" placeholder="–í–æ–∑—Ä–∞—Å—Ç" type="number" ref={this.age} />
            </div>
            <div>
              <button type="submit" className="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
          </form>
        </div>
      </div>
    )
  }
}

ReactDOM.render(
  <App />,
  document.getElementById('root')
)
```	

### –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å "—Å–æ–∑–¥–∞—Ç–µ–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏" (action creator)?

**–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏**

*Action type* - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏. –û–±—ã—á–Ω–æ, —Ç–∏–ø—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ –≤–∏–¥–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏–ª–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π (enumerations).

*–ü—Ä–∏–º–µ—Ä*

```js
export const Actions = {
  GET_USER_DETAILS_REQUEST: 'GET_USER_DETAILS_REQUEST',
  GET_USER_DETAILS_SUCCESS: 'GET_USER_DETAILS_SUCCESS',
  GET_USER_DETAILS_FAILURE: 'GET_USER_DETAILS_FAILURE',
  ...
}
```

**–û–ø–µ—Ä–∞—Ü–∏—è**

–û–ø–µ—Ä–∞—Ü–∏—è –ø–æ—Ö–æ–∂–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º–æ–µ (dispatch) –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏, –æ–Ω–∞ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ —É–≥–æ–¥–Ω–æ. –û–¥–Ω–∞–∫–æ, –ª—É—á—à–µ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å –ø–æ–º–æ—â—å—é TypeScript):

```ts
type Action = {
  type: string;    // –æ–ø–µ—Ä–∞—Ü–∏—è –î–û–õ–ñ–ù–ê –∏–º–µ—Ç—å —Ç–∏–ø
  payload?: any;   // –æ–ø–µ—Ä–∞—Ü–∏—è –ú–û–ñ–ï–¢ –∏–º–µ—Ç—å –ø–æ–ª–µ–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É
  meta?: any;      // –æ–ø–µ—Ä–∞—Ü–∏—è –ú–û–ñ–ï–¢ –∏–º–µ—Ç—å –º–µ—Ç–∞ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é) –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
  error?: boolean; // –æ–ø–µ—Ä–∞—Ü–∏—è –ú–û–ñ–ï–¢ –∏–º–µ—Ç—å –ø–æ–ª–µ –¥–ª—è –æ—à–∏–±–∫–∏
                    // –ø—Ä–∏ –∏—Å—Ç–∏–Ω–Ω–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—è, –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –î–û–õ–ñ–ù–ê –≤–∫–ª—é—á–∞—Ç—å Error
}
```

–û–ø–µ—Ä–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∏–º–µ–Ω–∏ "–ò–≤–∞–Ω" –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```js
{
    type: 'GET_USER_DETAILS_REQUEST',
    payload: '–ò–≤–∞–Ω'
}
```

**–°–æ–∑–¥–∞—Ç–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–∏**

```js
export const getUserDetailsRequest = id => ({
  type: Actions.GET_USER_DETAILS_REQUEST,
  payload: id,
})
```

–í –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞—è—Ö —Å–æ–∑–¥–∞—Ç–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:

```js
store.dispatch(getUserDetailsRequest('–ò–≤–∞–Ω'))
```

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ `dispatch()`, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–µ –≤ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç:

```js
export const mapDispatchToProps = dispatch => ({
  onClick: () => dispatch(getUserDetailsRequest('Alex'))
})
```	

### –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ?

**1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è**

–í Redux —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∫–æ—Ç–æ—Ä–æ–µ —è–≤–ª—è–µ—Ç—Å—è –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏.

–û–ø–µ—Ä–∞—Ü–∏–∏ - —ç—Ç–æ –æ–±—ä–µ–∫—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ "—Ç–∏–ø" –∏ "–ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞". –û–Ω–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è "—Å–æ–∑–¥–∞—Ç–µ–ª—è–º–∏ –æ–ø–µ—Ä–∞—Ü–∏–π".

*–ü—Ä–∏–º–µ—Ä*

–°–æ–∑–¥–∞–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:

```js
import { createStore } from 'redux'

function todosReducer(state = [], action) {
  switch (action.type) {
    case 'ADD_TODO':
      return state.concat([action.payload])
    default:
      return state
  }
}

const store = createStore(todosReducer)
```

–û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

```js
const ADD_TODO = 'ADD_TODO'; // —Å–æ–∑–¥–∞–µ–º —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏
const newTodo = ["–ù–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ç—å—é"];
function todoActionCreator (newTodo) {
  const action = {
    type: ADD_TODO,
    payload: newTodo
  }
  dispatch(action)
}
```

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, Redux –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é –≤ —Ä–µ–¥—É–∫—Ç–æ—Ä –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

**2. `createStore()`**

–ú–µ—Ç–æ–¥ `createStore()` –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `preloadedState` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä. –ö–æ–≥–¥–∞ —Ç–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è, –æ–Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

```js
const initialState = ["–ø–∏—Ç–∞—Ç—å—Å—è", "–∫–æ–¥–∏—Ç—å", "—Å–ø–∞—Ç—å"];
const store = createStore(todosReducer, initialState)
```

**3. –†–µ–¥—É–∫—Ç–æ—Ä**

–†–µ–¥—É–∫—Ç–æ—Ä—ã —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `state` —è–≤–ª—è–µ—Ç—Å—è `undefined`:

```js
function todosReducer(state = [], action) {
  switch (action.type) {
    case 'ADD_TODO':
      return state.concat([action.payload])
    default:
      return state
  }
}
/**
* –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–≤–Ω—è–µ—Ç—Å—è []. –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è,
* —Ç.–µ. –∫–æ–≥–¥–∞ –æ–Ω–æ –Ω–µ –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞–Ω–æ –≤ `createStore()`
**/
```

–ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, `preloadedState` –∏–º–µ–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤ `reducer`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–¥—É–∫—Ç–æ—Ä–∞–º –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∞ —Ç–∞–∫–∂–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ) –ø—Ä–∏ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞.	

	
### –ß—Ç–æ —Ç–∞–∫–æ–µ `mapStateToProps()` –∏ `mapDispatchToProps()`?

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `react-redux` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç 3 —Ñ—É–Ω–∫—Ü–∏–∏: `connect()`, `mapStapteToProps()` –∏ `mapDispatchToProps()`. `connect()` - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è `mapStateToProps()` –∏ `mapDispatchToProps()` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

**1. `mapStateToProps()`**

–§—É–Ω–∫—Ü–∏—è `mapStatetoProps()` –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞ –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–≥–æ —Å –ø—Ä–æ–ø–∞–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

**2. `mapDispatchToProps()`**

–§—É–Ω–∫—Ü–∏—è `mapDispatchToProp()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–¥—É–∫—Ç–æ—Ä–∞—Ö. –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

–ì–æ–≤–æ—Ä—è –ø—Ä–æ—â–µ,

**mapStateToProps**: –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ Redux –∫ –ø—Ä–æ–ø–∞–º React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
**mapDispatchToProps**: –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ Redux –∫ –ø—Ä–æ–ø–∞–º React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

*–ü—Ä–∏–º–µ—Ä*

```js
const { createStore } = Redux
const { connect, Provider } = ReactRedux
const initialState = { collection: ["prima", "altera", "triera"] }

function reducer(state = initialState, action) {
    if (action.type === "REVERSE") {
      return Object.assign({}, state, {
         Collection: state.collection.slice().reverse()
      })
    }
    return state
}

const store = createStore(reducer)

function mapStateToProps(state) {
  return state
}

const PresentationalComponent = React.createClass({
    render: function() {
        return (
          <div>
            <h2>–°–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–≤ –≤–∏–¥–µ –ø—Ä–æ–ø–∞)</h2>
            <pre> {JSON.stringify(this.props.collection)}</pre>
            <StateChangerUI />
          </div>
          )
    }
})

// –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è UI
const StateChangerUI = React.createClass({
  // –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
  handleClick: function() {
     store.dispatch({
         type: 'REVERSE'
      })
  },
  render: function() {
    return (
      <button type="button" className="btn btn-success" onClick={this.handleClick}>–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
    )
  }
})

PresentationalComponent = connect(mapStateToProps)(PresentationalComponent)

ReactDOM.render(
  <Provider store={store}>
    <PresentationalComponent />
  </Provider>,
  document.getElementById('App')
)
```		

### –ß—Ç–æ —Ç–∞–∫–æ–µ "—á–∏—Å—Ç—ã–µ" —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ—á–µ–º—É —Ä–µ–¥—É–∫—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π?

**"–ß–∏—Å—Ç–∞—è" —Ñ—É–Ω–∫—Ü–∏—è**

–§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, DOM –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, —è–≤–ª—è–µ—Ç—Å—è "—á–∏—Å—Ç–æ–π".

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ñ—É–Ω–∫—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è "—á–∏—Å—Ç–æ–π", –µ—Å–ª–∏ –æ–Ω–∞ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º —É—Å–ª–æ–≤–∏—è–º:

* –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
* –û—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, —Ç.–µ. –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
* –ù–µ –∏–∑–º–µ–Ω—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
* –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö

*–ü—Ä–∏–º–µ—Ä*

–ü—Ä–∏–≤–µ–¥–µ–Ω–Ω–∞—è –Ω–∏–∂–µ —Ñ—É–Ω–∫—Ü–∏—è `add()` –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `a` –∏ `b`, –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –∏ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:

```js
const add = (a, b) => a + b // "—á–∏—Å—Ç–∞—è" —Ñ—É–Ω–∫—Ü–∏—è
```

**–ü–æ—á–µ–º—É —Ä–µ–¥—É–∫—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "—á–∏—Å—Ç–æ–π" —Ñ—É–Ω–∫—Ü–∏–µ–π?**

Redux –±–µ—Ä–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–æ–±—ä–µ–∫—Ç) –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –µ–≥–æ –∫–∞–∂–¥–æ–º—É —Ä–µ–¥—É–∫—Ç–æ—Ä—É –≤ —Ü–µ–ø–æ—á–∫–µ (–ø—Ä–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ä–µ–¥—É–∫—Ç–æ—Ä–æ–≤). –†–µ–¥—É–∫—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –≤ —Å–ª—É—á–∞–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ–¥—É–∫—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–π –æ–±—ä–µ–∫—Ç.

Redux –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –ª–∏ —Å—Ç–∞—Ä—ã–π –∏ –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç—ã, —Å—Ä–∞–≤–Ω–∏–≤–∞—è –∏—Ö –º–µ—Å—Ç–∞ –≤ –ø–∞–º—è—Ç–∏. –ü–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ –º—ã –∏–∑–º–µ–Ω–∏–º —Å—Ç–∞—Ä—ã–π –æ–±—ä–µ–∫—Ç –≤ —Ä–µ–¥—É–∫—Ç–æ—Ä–µ, —Å—Ç–∞—Ä–æ–µ –∏ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±—É–¥—É—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç. Redux —Å–¥–µ–ª–∞–µ—Ç –≤—ã–≤–æ–¥ –æ —Ç–æ–º, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –∏ –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±—É–¥–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∞.
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
356. ### <a name="356"></a> redux-forms –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ React + Redux

*Redux Form* —Ä–∞–±–æ—Ç–∞–µ—Ç —Å React –∏ Redux, –ø–æ–∑–≤–æ–ª—è—è —Ñ–æ—Ä–º–∞–º –≤ React —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ Redux. Redux Form –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å –æ–±—ã—á–Ω—ã–º–∏ HTML5-–∏–Ω–ø—É—Ç–∞–º–∏, –∞ —Ç–∞–∫–∂–µ —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ UI-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ Material UI, React Widgets –∏ React Bootstrap.
	
–í–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Redux Form:

1. –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Redux
2. –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è/–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–∞–∑–±–æ—Ä –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª–µ–π
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
357. ### <a name="357"></a> Redux –ø—Ä–∏–º–µ—Ä

### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–æ–¥–∞	  
```jsx harmony
import React from 'react';
import ReactDOM from 'react-dom';
import { createStore } from 'redux';

const initialState = {value: 0};

const reducer = (state = initialState, action) => {
    switch (action.type) {
        case "INC":
            return {
                ...state,
                value: state.value + 1
            };
        case "DEC":
            return {
                ...state,
                value: state.value - 1
            };
        case "RND":
            return {
                ...state,
                value: state.value * action.payload
            };
        default:
            return state;
    }
}

const store = createStore(reducer);

const update = () => {
    document.getElementById('counter').textContent = store.getState().value;
}

store.subscribe(update);

const inc = () => ({type: 'INC'});
const dec = () => ({type: 'DEC'});
const rnd = (value) => ({type: 'RND', payload: value});

document.getElementById('inc').addEventListener('click', () => {
    store.dispatch(inc());
});

document.getElementById('dec').addEventListener('click', () => {
    store.dispatch(dec());
});

document.getElementById('rnd').addEventListener('click', () => {
    const value = Math.floor(Math.random() * 10);
    store.dispatch(rnd(value));
});

ReactDOM.render(
  <React.StrictMode>
    <>
    
    </>
  </React.StrictMode>,
  document.getElementById('root')
);	  
```	  

### –ü—Ä–∏–º–µ—Ä 

### index.js	  
```jsx harmony
import React from 'react';
import ReactDOM from 'react-dom';
import {createStore} from 'redux';
import reducer from './reducer';
import {Provider} from 'react-redux';

import App from './components/App';

const store = createStore(reducer);

ReactDOM.render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>,
  document.getElementById('root')
);	  
```	  

### reducer.js
```jsx harmony
const initialState = {counter: 0};

const reducer = (state = initialState, action) => {
	switch (action.type) {
		case 'INC':
			return {
				...state,
				counter: state.counter + 1
			};
		case 'DEC':
			return {
				...state,
				counter: state.counter - 1
			};
		case 'RND':
			return {
				...state,
				counter: state.counter * action.payload
			};
		default:
			return state;
	}
}

export default reducer;	  
```	  

### actions.js
```jsx harmony
export const inc = () => ({type: 'INC'})
export const dec = () => ({type: 'DEC'})
export const rnd = () => ({type: 'RND', payload: Math.floor(Math.random() * 10)})	  
```	  

### App.js
```jsx harmony
import Counter from './Counter';

const App = () => {
	return <Counter />
}

export default App;	  
```	  

### Counter.js
```jsx harmony
import {inc, dec, rnd} from '../actions';
import {useSelector, useDispatch} from 'react-redux';

const Counter = () => {

	const counter = useSelector(state => state.counter);

	const dispatch = useDispatch();

	return (
		<div className="jumbotron">
			<h1>{counter}</h1>
			<button onClick={() => dispatch(dec())} className="btn btn-primary">DEC</button>
			<button onClick={() => dispatch(inc())} className="btn btn-primary">INC</button>
			<button onClick={() => dispatch(rnd())} className="btn btn-primary">RND</button>
		</div>
	)
}

export default Counter;	  
```	  
	  
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
358. ### <a name="358"></a> –°–æ–µ–¥–∏–Ω—è–µ–º React –∏ Redux –ø—Ä–∏ –ø–æ–º–æ—â–∏ connect –∏ —Ö—É–∫–æ–≤

### –ü—Ä–∏ –ø–æ–º–æ—â–∏ connect	  
```jsx harmony
import { Component } from "react";
import { connect } from "react-redux";
import * as actions from '../actions';

// const Counter = ({counter, inc, dec, rnd}) => {
//     return (
//         <div className="jumbotron">
//             <h1>{counter}</h1>
//             <button onClick={dec} className="btn btn-primary">DEC</button>
//             <button onClick={inc} className="btn btn-primary">INC</button>
//             <button onClick={rnd} className="btn btn-primary">RND</button>
//         </div>
//     )
// }

class Counter extends Component {
    render() {
        const {counter, inc, dec, rnd} = this.props;
        return (
            <div className="jumbotron">
                <h1>{counter}</h1>
                <button onClick={dec} className="btn btn-primary">DEC</button>
                <button onClick={inc} className="btn btn-primary">INC</button>
                <button onClick={rnd} className="btn btn-primary">RND</button>
            </div>
        )
    }
}

const mapStateToProps = (state) => {
    return {
        counter: state.value
    }
}
	  
// const mapDispatchToProps = (dispatch) => {
// 	return bindActionCreators(actions, dispatch)
// }	  

export default connect(mapStateToProps, actions)(Counter);	  
```	  

### –ü—Ä–∏ –ø–æ–º–æ—â–∏ —Ö—É–∫–æ–≤
	  
```jsx harmony
import {inc, dec, rnd} from '../actions';
import { useSelector, useDispatch } from "react-redux";

const Counter = () => {

    const counter = useSelector(state => state.counter);
    const dispatch = useDispatch();
    
    return (
        <div className="jumbotron">
            <h1>{counter}</h1>
            <button onClick={() => dispatch(dec())} className="btn btn-primary">DEC</button>
            <button onClick={() => dispatch(inc())} className="btn btn-primary">INC</button>
            <button onClick={() => dispatch(rnd())} className="btn btn-primary">RND</button>
        </div>
    )
}

export default Counter;	  
```	  
	  
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
359. ### <a name="359"></a> combineReducers –∏ reducers

```jsx harmony
import { createStore, combineReducers } from 'redux';
import heroes from '../reducers/heroes';
import filters from '../reducers/filters';

const store = createStore( combineReducers({heroes, filters}),
    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());

export default store;	  
```	  

```jsx harmony
const initialState = {
    filters: [],
    filtersLoadingStatus: 'idle',
    activeFilter: 'all'
}

const filters = (state = initialState, action) => {
    switch (action.type) {
        case 'FILTERS_FETCHING':
            return {
                ...state,
                filtersLoadingStatus: 'loading'
            }
        case 'FILTERS_FETCHED':
            return {
                ...state,
                filters: action.payload,
                filtersLoadingStatus: 'idle'
            }
        case 'FILTERS_FETCHING_ERROR':
            return {
                ...state,
                filtersLoadingStatus: 'error'
            }
        case 'ACTIVE_FILTER_CHANGED':
            return {
                ...state,
                activeFilter: action.payload
            }
        default: return state
    }
}

export default filters;	  
```	  

```jsx harmony
const initialState = {
    heroes: [],
    heroesLoadingStatus: 'idle'
}

const heroes = (state = initialState, action) => {
    switch (action.type) {
        case 'HEROES_FETCHING':
            return {
                ...state,
                heroesLoadingStatus: 'loading'
            }
        case 'HEROES_FETCHED':
            return {
                ...state,
                heroes: action.payload,
                heroesLoadingStatus: 'idle'
            }
        case 'HEROES_FETCHING_ERROR':
            return {
                ...state,
                heroesLoadingStatus: 'error'
            }
        case 'HERO_CREATED':
            return {
                ...state,
                heroes: [...state.heroes, action.payload]
            }
        case 'HERO_DELETED': 
            return {
                ...state,
                heroes: state.heroes.filter(item => item.id !== action.payload)
            }
        default: return state
    }
}

export default heroes;	  
```	  
	  
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
360. ### <a name="360"></a> createSelector from 'reselect'

```jsx harmony
import {useHttp} from '../../hooks/http.hook';
import { useEffect, useCallback } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { CSSTransition, TransitionGroup} from 'react-transition-group';
import { createSelector } from 'reselect';

import { heroesFetching, heroesFetched, heroesFetchingError, heroDeleted } from '../../actions';
import HeroesListItem from "../heroesListItem/HeroesListItem";
import Spinner from '../spinner/Spinner';

import './heroesList.scss';

const HeroesList = () => {

    const filteredHeroesSelector = createSelector(
        (state) => state.filters.activeFilter,
        (state) => state.heroes.heroes,
        (filter, heroes) => {
            if (filter === 'all') {
                console.log('render');
                return heroes;
            } else {
                return heroes.filter(item => item.element === filter);
            }
        }
    );

    const filteredHeroes = useSelector(filteredHeroesSelector);
    const heroesLoadingStatus = useSelector(state => state.heroes.heroesLoadingStatus);
    const dispatch = useDispatch();
    const {request} = useHttp();

    useEffect(() => {
        dispatch(heroesFetching());
        request("http://localhost:3001/heroes")
            .then(data => dispatch(heroesFetched(data)))
            .catch(() => dispatch(heroesFetchingError()))

        // eslint-disable-next-line
    }, []);

    const onDelete = useCallback((id) => {
        request(`http://localhost:3001/heroes/${id}`, "DELETE")
            .then(data => console.log(data, 'Deleted'))
            .then(dispatch(heroDeleted(id)))
            .catch(err => console.log(err));
        // eslint-disable-next-line  
    }, [request]);

    if (heroesLoadingStatus === "loading") {
        return <Spinner/>;
    } else if (heroesLoadingStatus === "error") {
        return <h5 className="text-center mt-5">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>
    }

    const renderHeroesList = (arr) => {
        if (arr.length === 0) {
            return (
                <CSSTransition
                    timeout={0}
                    classNames="hero">
                    <h5 className="text-center mt-5">–ì–µ—Ä–æ–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h5>
                </CSSTransition>
            )
        }

        return arr.map(({id, ...props}) => {
            return (
                <CSSTransition 
                    key={id}
                    timeout={500}
                    classNames="hero">
                    <HeroesListItem  {...props} onDelete={() => onDelete(id)}/>
                </CSSTransition>
            )
        })
    }

    const elements = renderHeroesList(filteredHeroes);
    return (
        <TransitionGroup component="ul">
            {elements}
        </TransitionGroup>
    )
}

export default HeroesList;	  
```	  
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
361. ### <a name="361"></a> enhancer

```jsx harmony
import { createStore, combineReducers, compose } from 'redux';
import heroes from '../reducers/heroes';
import filters from '../reducers/filters';

const enhancer = (createStore) => (...args) => {
    const store = createStore(...args);

    const oldDispatch = store.dispatch;
    store.dispatch = (action) => {
        if (typeof action === 'string') {
            return oldDispatch({
                type: action
            })
        }
        return oldDispatch(action)
    }
    return store;
}

const store = createStore( 
                    combineReducers({heroes, filters}),
                    compose(
                        enhancer,
                        window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()
                    ));

export default store;			
```			
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
362. ### <a name="362"></a> applyMiddleware

```jsx harmony
import { createStore, combineReducers, compose, applyMiddleware } from 'redux';
import heroes from '../reducers/heroes';
import filters from '../reducers/filters';

const stringMiddleware = () => (next) => (action) => {
    if (typeof action === 'string') {
        return next({
            type: action
        })
    }
    return next(action)
};

const store = createStore( 
                    combineReducers({heroes, filters}),
                    compose(applyMiddleware(stringMiddleware),
                            window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())
                    );

export default store;			
```			
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	
363. ### <a name="363"></a> ReduxThunk

```jsx harmony
import { createStore, combineReducers, compose, applyMiddleware } from 'redux';
import ReduxThunk from 'redux-thunk';
import heroes from '../reducers/heroes';
import filters from '../reducers/filters';

const stringMiddleware = () => (next) => (action) => {
    if (typeof action === 'string') {
        return next({
            type: action
        })
    }
    return next(action)
};

const store = createStore( 
                combineReducers({heroes, filters}),
                compose(applyMiddleware(ReduxThunk, stringMiddleware),
                        window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())
                );

export default store;			
```			
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
	  
364. ### <a name="364"></a> 

    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**

365. ### <a name="365"></a> 

    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
			
366. ### <a name="366"></a> 

    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**			

377. ### <a name="377"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	
		
378. ### <a name="378"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	
		
379. ### <a name="379"></a> 

 
    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**	
		
380. ### <a name="380"></a> 


    
  **[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#top)**
